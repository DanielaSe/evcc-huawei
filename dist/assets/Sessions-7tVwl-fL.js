import{_ as k,f as M,N as j,O as Z,I as ve,R as _e,M as J,c as u,q as P,a as l,h as D,t as h,b as y,d as x,i as W,Q as se,F as T,e as f,o as c,y as K,P as L,r as N,n as V,k as oe,an as ne,ao as m,ap as I,aq as E,ar as F,as as re,at as ae,au as ie,av as U,aw as H,ax as B,ay as le,az as ce,aA as q,aB as de,aC as X,aD as ee,aE as Ce,aF as De,aG as he,aH as Ee,aI as we,a2 as ue,u as Q,j as Pe,G as z,aJ as Te,aK as ke,a1 as $}from"./index-CN0w41DB.js";import{V as Se}from"./checkmark-LlNya1Qf.js";import{T as xe}from"./TopHeader-C6w4H9P6.js";import"./TopNavigation-BCd9W1gB.js";const Me={name:"SessionDetailsModal",components:{VehicleOptions:Se,CustomSelect:j},mixins:[M],props:{session:Object,currency:String,vehicles:Array,loadpoints:Array},emits:["session-changed"],computed:{chargedEnergy:function(){return this.session.chargedEnergy*1e3},avgPower:function(){const e=this.session.chargeDuration/1e9/3600;return this.chargedEnergy/e},solarEnergy:function(){return this.chargedEnergy*(this.session.solarPercentage/100)},vehicleOptions:function(){return this.vehicles.map(e=>({name:e.title,title:e.title}))},loadpointOptions:function(){return this.loadpoints.map(e=>({value:e,name:e}))}},methods:{openSessionDetailsModal(){J.getOrCreateInstance(document.getElementById("sessionDetailsModal")).show()},openRemoveConfirmationModal(){J.getOrCreateInstance(document.getElementById("deleteSessionConfirmationModal")).show()},formatKm:function(e){return"".concat(this.fmtNumber(_e(e),0)," ").concat(ve())},async changeVehicle(e){await this.updateSession({vehicle:e})},async removeVehicle(){await this.updateSession({vehicle:null})},async changeLoadpoint(e){await this.updateSession({loadpoint:e})},async updateSession(e){try{await Z.put("session/"+this.session.id,e),this.$emit("session-changed")}catch(t){console.error(t)}},async removeSession(){try{await Z.delete("session/"+this.session.id),this.$emit("session-changed")}catch(e){console.error(e)}}}},Oe={id:"sessionDetailsModal",class:"modal fade text-dark",tabindex:"-1",role:"dialog","aria-hidden":"true"},Le={class:"modal-dialog modal-dialog-centered",role:"document"},Ne={key:0,class:"modal-content"},Ae={class:"modal-header"},We={class:"modal-body"},Re={class:"table align-middle"},Ie={class:"flex-grow-1 text-truncate loadpoint-name"},Fe={class:"flex-grow-1 text-truncate vehicle-name"},Be={class:"align-baseline"},Ye={class:"align-baseline"},Ge={key:0},$e={key:0},Ke={class:"align-baseline"},Ve={key:1},He={class:"align-baseline"},je={key:2},Ue={key:3},qe={key:4},ze={class:"align-baseline"},Ze={class:"modal-footer d-flex justify-content-start"},Je={id:"deleteSessionConfirmationModal",class:"modal fade text-dark",tabindex:"-1",role:"dialog","aria-hidden":"true"},Qe={class:"modal-dialog modal-dialog-centered",role:"document"},Xe={key:0,class:"modal-content"},et={class:"modal-header"},tt={class:"modal-footer d-flex justify-content-between"};function st(e,t,s,r,i,o){const n=f("CustomSelect"),a=f("VehicleOptions");return c(),u(T,null,[(c(),P(se,{to:"body"},[l("div",Oe,[l("div",Le,[s.session?(c(),u("div",Ne,[l("div",Ae,[l("h5",null,h(e.$t("session.title")),1),t[4]||(t[4]=l("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),l("div",We,[l("table",Re,[l("tbody",null,[l("tr",null,[l("th",null,h(e.$t("sessions.loadpoint")),1),l("td",null,[y(n,{id:"session.vehicle",class:"options",options:o.loadpointOptions,selected:s.session.loadpoint,onChange:t[0]||(t[0]=d=>o.changeLoadpoint(d.target.value))},{default:x(()=>[l("span",Ie,h(s.session.loadpoint?s.session.loadpoint:e.$t("main.loadpoint.fallbackName")),1)]),_:1},8,["options","selected"])])]),l("tr",null,[l("th",null,h(e.$t("sessions.vehicle")),1),l("td",null,[y(a,{id:s.session.vehicle,class:"options",vehicles:o.vehicleOptions,connected:"",selected:s.session.vehicle,onChangeVehicle:o.changeVehicle,onRemoveVehicle:o.removeVehicle},{default:x(()=>[l("span",Fe,h(s.session.vehicle?s.session.vehicle:e.$t("main.vehicle.unknown")),1)]),_:1},8,["id","vehicles","selected","onChangeVehicle","onRemoveVehicle"])])]),l("tr",null,[l("th",Be,h(e.$t("session.date")),1),l("td",null,[W(h(e.fmtFullDateTime(new Date(s.session.created),!1))+" ",1),t[5]||(t[5]=l("br",null,null,-1)),W(" "+h(e.fmtFullDateTime(new Date(s.session.finished),!1)),1)])]),l("tr",null,[l("th",Ye,h(e.$t("sessions.energy")),1),l("td",null,[W(h(e.fmtWh(o.chargedEnergy,o.chargedEnergy>=1e3?e.POWER_UNIT.KW:e.POWER_UNIT.AUTO))+" ",1),s.session.chargeDuration?(c(),u("div",Ge,h(e.fmtDurationNs(s.session.chargeDuration))+" (~"+h(e.fmtW(o.avgPower))+") ",1)):D("",!0)])]),s.session.solarPercentage!=null?(c(),u("tr",$e,[l("th",Ke,h(e.$t("sessions.solar")),1),l("td",null,h(e.fmtPercentage(s.session.solarPercentage,1))+" ("+h(e.fmtWh(o.solarEnergy,e.POWER_UNIT.AUTO))+") ",1)])):D("",!0),s.session.price!=null?(c(),u("tr",Ve,[l("th",He,h(e.$t("session.price")),1),l("td",null,[W(h(e.fmtMoney(s.session.price,s.currency))+" "+h(e.fmtCurrencySymbol(s.currency)),1),t[6]||(t[6]=l("br",null,null,-1)),W(" "+h(e.fmtPricePerKWh(s.session.pricePerKWh,s.currency)),1)])])):D("",!0),s.session.co2PerKWh!=null?(c(),u("tr",je,[l("th",null,h(e.$t("session.co2")),1),l("td",null,h(e.fmtCo2Medium(s.session.co2PerKWh)),1)])):D("",!0),s.session.odometer?(c(),u("tr",Ue,[l("th",null,h(e.$t("session.odometer")),1),l("td",null,h(o.formatKm(s.session.odometer)),1)])):D("",!0),s.session.meterStart?(c(),u("tr",qe,[l("th",ze,h(e.$t("session.meter")),1),l("td",null,[W(h(e.fmtWh(s.session.meterStart*1e3)),1),t[7]||(t[7]=l("br",null,null,-1)),W(" "+h(e.fmtWh(s.session.meterStop*1e3)),1)])])):D("",!0)])])]),l("div",Ze,[l("button",{type:"button",class:"btn btn-link text-danger","data-bs-dismiss":"modal",onClick:t[1]||(t[1]=(...d)=>o.openRemoveConfirmationModal&&o.openRemoveConfirmationModal(...d))},h(e.$t("session.delete")),1)])])):D("",!0)])])])),(c(),P(se,{to:"body"},[l("div",Je,[l("div",Qe,[s.session?(c(),u("div",Xe,[l("div",et,[l("h5",null,h(e.$t("sessions.reallyDelete")),1)]),l("div",tt,[l("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal",onClick:t[2]||(t[2]=(...d)=>o.openSessionDetailsModal&&o.openSessionDetailsModal(...d))},h(e.$t("session.cancel")),1),l("button",{type:"button",class:"btn btn-danger","data-bs-dismiss":"modal",onClick:t[3]||(t[3]=(...d)=>o.removeSession&&o.removeSession(...d))},h(e.$t("session.delete")),1)])])):D("",!0)])])]))],64)}const ot=k(Me,[["render",st],["__scopeId","data-v-4a598d85"]]),nt={data(){return{breakpoint:"md"}},methods:{updateBreakpoint(){const e=window.innerWidth;e<=575?this.breakpoint="xs":e<=767?this.breakpoint="sm":e<=991?this.breakpoint="md":e<=1199?this.breakpoint="lg":e<=1399?this.breakpoint="xl":this.breakpoint="xxl"}},mounted(){this.updateBreakpoint(),window.addEventListener("resize",this.updateBreakpoint)},beforeDestroy(){window.removeEventListener("resize",this.updateBreakpoint)}},rt={xs:1,sm:2,md:3,lg:4,xl:5,xxl:6},at={name:"SessionTable",components:{CustomSelect:j},mixins:[M,nt],props:{sessions:{type:Array,default:()=>[]},loadpointFilter:{type:String,default:""},vehicleFilter:{type:String,default:""},currency:{type:String}},emits:["show-session"],data(){return{selectedColumns:K.sessionColumns}},computed:{filteredSessions(){return this.sessions.filter(this.filterByLoadpoint).filter(this.filterByVehicle).sort((e,t)=>new Date(t.created)-new Date(e.created))},maxColumns(){return rt[this.breakpoint]||1},columns(){return[{name:"energy",unit:"kWh",total:this.chargedEnergy,value:t=>t.chargedEnergy,format:t=>this.fmtWh(t*1e3,L.KW,!1)},{name:"solar",unit:"%",total:this.solarPercentage,value:t=>t.solarPercentage,format:t=>this.fmtNumber(t,1)},{name:"price",unit:this.fmtCurrencySymbol(this.currency),total:this.price,value:t=>t.price,format:t=>this.fmtMoney(t,this.currency)},{name:"avgPrice",unit:this.pricePerKWhUnit(this.currency),total:this.pricePerKWh,value:t=>t.pricePerKWh,format:t=>this.fmtPricePerKWh(t,this.currency,!1,!1)},{name:"co2",unit:"g/kWh",total:this.co2PerKWh,value:t=>t.co2PerKWh,format:t=>this.fmtNumber(t,0)},{name:"chargeDuration",unit:"h:mm",total:this.chargeDuration,value:t=>t.chargeDuration,format:t=>this.fmtDurationNs(t,!1,"h")},{name:"avgPower",unit:"kW",total:this.avgPower,value:t=>t.chargedEnergy&&t.chargeDuration?t.chargedEnergy/this.nsToHours(t.chargeDuration):null,format:t=>t?this.fmtW(t*1e3,L.KW,!1,1):void 0}].filter(t=>t.name==="energy"?!0:this.sessions.some(s=>t.value(s)))},tooMuchColumns(){return this.columns.length>this.maxColumns},sortedColumns(){const e=[...this.columns],t=[];for(const s of this.selectedColumns)if(!s&&e.length)t.push(e.shift());else if(e.some(r=>r.name===s)){const r=e.find(o=>o.name===s);t.push(r);const i=e.indexOf(r);e.splice(i,1)}return t.concat(e)},columnsPerBreakpoint(){return this.sortedColumns.slice(0,this.maxColumns)},columnOptions(){return this.columns.map(e=>({name:this.$t("sessions.".concat(e.name)),value:e.name,disabled:this.columnsPerBreakpoint.find(t=>t.name===e.name)}))},vehicleFilterOptions(){const e=[{name:this.$t("sessions.filter.allVehicles"),value:"",count:this.filterCountForVehicle()}];return this.vehicles.forEach(t=>{const s=this.filterCountForVehicle(t);e.push({name:t,value:t,count:s})}),e},loadpointFilterOptions(){const e=[{name:this.$t("sessions.filter.allLoadpoints"),value:"",count:this.filterCountForLoadpoint()}];return this.loadpoints.forEach(t=>{const s=this.filterCountForLoadpoint(t);e.push({name:t,value:t,count:s})}),e},chargedEnergy(){return this.filteredSessions.reduce((e,t)=>e+t.chargedEnergy,0)},chargeDuration(){return this.filteredSessions.reduce((e,t)=>e+t.chargeDuration,0)},price(){return this.filteredSessions.reduce((e,t)=>e+t.price,0)},avgPower(){const{energy:e,hours:t}=this.filteredSessions.filter(s=>s.chargedEnergy&&s.chargeDuration).reduce((s,r)=>(s.energy+=r.chargedEnergy,s.hours+=this.nsToHours(r.chargeDuration),s),{energy:0,hours:0});return e&&t?e/t:null},pricePerKWh(){const e=this.filteredSessions.filter(t=>t.price!==null).reduce((t,s)=>({price:t.price+s.price,chargedEnergy:t.chargedEnergy+s.chargedEnergy}),{price:0,chargedEnergy:0});return e.price/e.chargedEnergy},co2PerKWh(){const e=this.filteredSessions.filter(t=>t.co2PerKWh!==null).reduce((t,s)=>({emittedCo2:t.emittedCo2+s.chargedEnergy*s.co2PerKWh,chargedEnergy:t.chargedEnergy+s.chargedEnergy}),{emittedCo2:0,chargedEnergy:0});return e.chargedEnergy&&e.emittedCo2?e.emittedCo2/e.chargedEnergy:null},solarPercentage(){const e=this.filteredSessions.filter(t=>t.solarPercentage!==null).reduce((t,s)=>({chargedSolarEnergy:t.chargedSolarEnergy+s.chargedEnergy*(s.solarPercentage/100),chargedEnergy:t.chargedEnergy+s.chargedEnergy}),{chargedSolarEnergy:0,chargedEnergy:0});return 100/e.chargedEnergy*e.chargedSolarEnergy},loadpoints(){return[...new Set(this.sessions.map(e=>e.loadpoint))]},vehicles(){return[...new Set(this.sessions.map(e=>e.vehicle))]}},methods:{nsToHours(e){return e/1e9/3600},filterByLoadpoint(e){return!this.loadpointFilter||e.loadpoint===this.loadpointFilter},filterByVehicle(e){return!this.vehicleFilter||e.vehicle===this.vehicleFilter},filterCountForVehicle(e){return this.sessions.filter(this.filterByLoadpoint).filter(t=>!e||t.vehicle===e).length},filterCountForLoadpoint(e){return this.sessions.filter(this.filterByVehicle).filter(t=>!e||t.loadpoint===e).length},selectColumnPosition(e,t){this.selectedColumns[e]=t,K.sessionColumns=[...this.selectedColumns]},changeLoadpointFilter(e){const t=e.target.value||void 0;this.$router.push({query:{...this.$route.query,loadpoint:t}})},changeVehicleFilter(e){const t=e.target.value||void 0;this.$router.push({query:{...this.$route.query,vehicle:t}})},showDetails(e){this.$emit("show-session",e)}}},it={class:"fw-normal mb-4"},lt={key:0,"data-testid":"sessions-nodata",class:"mb-5"},ct={key:1,class:"mb-5 table-outer"},dt={class:"table text-nowrap"},ht={class:"sticky-top"},ut={"data-testid":"sessions-head"},gt={scope:"col",class:"align-top ps-0"},pt={scope:"col",class:"align-top d-none d-md-table-cell","data-testid":"loadpoint"},mt={class:"fw-normal text-decoration-underline text-nowrap text-gray pe-none"},yt={scope:"col",class:"align-top d-none d-md-table-cell","data-testid":"vehicle"},ft={class:"fw-normal text-decoration-underline text-nowrap text-gray pe-none"},bt={scope:"col",class:"align-top d-md-none text-truncate"},vt={class:"d-flex flex-wrap text-truncate"},_t={class:"me-2 text-truncate"},Ct={class:"fw-normal text-decoration-underline text-nowrap text-gray pe-none text-truncate"},Dt={class:"text-truncate d-flex flex-wrap"},Et={class:"me-2 text-truncate"},wt={class:"fw-normal text-decoration-underline text-nowrap text-gray pe-none text-truncate"},Pt=["data-testid"],Tt={class:"text-decoration-underline"},kt={key:1},St={class:"text-gray fw-normal"},xt={class:"sticky-bottom"},Mt={"data-testid":"sessions-foot"},Ot={scope:"col",class:"align-top ps-0"},Lt=["data-testid"],Nt=["onClick"],At={class:"ps-0"},Wt={class:"d-none d-md-table-cell"},Rt={class:"d-none d-md-table-cell"},It={class:"d-md-none text-truncate"},Ft={key:0,class:"text-gray"},Bt={key:1};function Yt(e,t,s,r,i,o){const n=f("CustomSelect");return c(),u(T,null,[l("h3",it,h(e.$t("sessions.overview")),1),s.sessions.length===0?(c(),u("div",lt,[l("p",null,h(e.$t("sessions.noData")),1)])):(c(),u("div",ct,[l("table",dt,[l("thead",ht,[l("tr",ut,[l("th",gt,h(e.$t("sessions.date")),1),l("th",pt,[W(h(e.$t("sessions.loadpoint"))+" ",1),y(n,{selected:s.loadpointFilter,options:o.loadpointFilterOptions,"data-testid":"filter-loadpoint",onChange:o.changeLoadpointFilter},{default:x(()=>[l("span",mt,h(s.loadpointFilter||e.$t("sessions.filter.filter")),1)]),_:1},8,["selected","options","onChange"])]),l("th",yt,[W(h(e.$t("sessions.vehicle"))+" ",1),y(n,{selected:s.vehicleFilter,options:o.vehicleFilterOptions,"data-testid":"filter-vehicle",onChange:o.changeVehicleFilter},{default:x(()=>[l("span",ft,h(s.vehicleFilter||e.$t("sessions.filter.filter")),1)]),_:1},8,["selected","options","onChange"])]),l("th",bt,[l("div",vt,[l("div",_t,h(e.$t("sessions.loadpoint")),1),y(n,{selected:s.loadpointFilter,options:o.loadpointFilterOptions,"data-testid":"filter-loadpoint",onChange:o.changeLoadpointFilter},{default:x(()=>[l("span",Ct,h(s.loadpointFilter||e.$t("sessions.filter.filter")),1)]),_:1},8,["selected","options","onChange"])]),l("div",Dt,[l("div",Et,h(e.$t("sessions.vehicle")),1),y(n,{selected:s.vehicleFilter,options:o.vehicleFilterOptions,"data-testid":"filter-vehicle",onChange:o.changeVehicleFilter},{default:x(()=>[l("span",wt,h(s.vehicleFilter||e.$t("sessions.filter.filter")),1)]),_:1},8,["selected","options","onChange"])])]),(c(!0),u(T,null,N(o.columnsPerBreakpoint,(a,d)=>(c(),u("th",{key:a.name,scope:"col","data-testid":"sessions-head-".concat(a.name),class:"align-top text-end"},[o.tooMuchColumns?(c(),P(n,{key:0,selected:a.name,options:o.columnOptions,"data-testid":"column",onChange:p=>o.selectColumnPosition(d,p.target.value)},{default:x(()=>[l("span",Tt,h(e.$t("sessions.".concat(a.name))),1)]),_:2},1032,["selected","options","onChange"])):(c(),u("span",kt,h(e.$t("sessions.".concat(a.name))),1)),l("div",St,h(a.unit),1)],8,Pt))),128))])]),l("tfoot",xt,[l("tr",Mt,[l("th",Ot,h(e.$t("sessions.total")),1),t[0]||(t[0]=l("th",{scope:"col",class:"d-none d-md-table-cell"},null,-1)),t[1]||(t[1]=l("th",{scope:"col",class:"d-none d-md-table-cell"},null,-1)),t[2]||(t[2]=l("th",{scope:"col",class:"d-md-none"},null,-1)),(c(!0),u(T,null,N(o.columnsPerBreakpoint,a=>(c(),u("th",{key:a.name,"data-testid":"sessions-foot-".concat(a.name),scope:"col",class:"align-top text-end"},h(a.format(a.total)),9,Lt))),128))])]),l("tbody",null,[(c(!0),u(T,null,N(o.filteredSessions,(a,d)=>(c(),u("tr",{key:d,role:"button","data-testid":"sessions-entry",onClick:p=>o.showDetails(a.id)},[l("td",At,h(e.fmtFullDateTime(new Date(a.created),!0)),1),l("td",Wt,h(a.loadpoint),1),l("td",Rt,h(a.vehicle),1),l("td",It,[l("div",null,h(a.loadpoint),1),l("div",null,h(a.vehicle),1)]),(c(!0),u(T,null,N(o.columnsPerBreakpoint,p=>(c(),u("td",{key:p.name,class:"text-end"},[p.value(a)===null?(c(),u("span",Ft," - ")):(c(),u("span",Bt,h(p.format(p.value(a))),1))]))),128))],8,Nt))),128))])])]))],64)}const Gt=k(at,[["render",Yt],["__scopeId","data-v-b9d6ac7e"]]),$t={name:"LegendList",props:{legends:Array,grid:Boolean,smallEqualWidths:Boolean},methods:{valueList(e){return e?Array.isArray(e)?e:[e]:[]}}},Kt={class:"legend-label text-nowrap"};function Vt(e,t,s,r,i,o){return c(),u("ul",{class:V(["root p-0 d-flex flex-wrap column-gap-4 row-gap-2 overflow-hidden",{"root--small-equal-widths":s.smallEqualWidths,"root--grid":s.grid}])},[(c(!0),u(T,null,N(s.legends,n=>(c(),u("li",{key:n.label,class:"legend-item d-flex align-items-baseline gap-2 no-wrap overflow-hidden"},[n.color?(c(),u("div",{key:0,class:"legend-color align-self-center me-1",style:oe({backgroundColor:n.color})},null,4)):D("",!0),l("div",Kt,h(n.label),1),(c(!0),u(T,null,N(o.valueList(n.value),a=>(c(),u("div",{key:a,class:"text-muted text-nowrap legend-value text-end"},h(a),1))),128))]))),128))],2)}const Y=k($t,[["render",Vt],["__scopeId","data-v-414c203c"]]),g={SOLAR:"solar",PRICE:"price",CO2:"co2"},C={NONE:"none",LOADPOINT:"loadpoint",VEHICLE:"vehicle"},v={MONTH:"month",YEAR:"year",TOTAL:"total"};F([re,ae,ie,U,H,B]);const Ht={name:"EnergyHistoryChart",components:{Bar:ne,LegendList:Y},mixins:[M],props:{sessions:{type:Array,default:()=>[]},groupBy:{type:String,default:C.NONE},period:{type:String,default:v.TOTAL},colorMappings:{type:Object,default:()=>({loadpoint:{},vehicle:{}})}},computed:{firstDay(){return this.sessions.length===0?null:new Date(this.sessions[0].created)},month(){var e;return((e=this.firstDay)==null?void 0:e.getMonth())+1},year(){var e;return(e=this.firstDay)==null?void 0:e.getFullYear()},lastDay(){return this.sessions.length===0?null:new Date(this.sessions[this.sessions.length-1].created)},chartData(){console.log("update energy history data");const e={},t=new Set;if(this.sessions.length>0){let r,i;this.period===v.TOTAL?(r=this.firstDay.getFullYear(),i=this.lastDay.getFullYear()):this.period===v.YEAR?(r=1,i=12):(r=1,i=new Date(this.lastDay.getFullYear(),this.lastDay.getMonth()+1,0).getDate());for(let o=r;o<=i;o++)e[o]={};this.sessions.forEach(o=>{let n;const a=new Date(o.created);if(this.period===v.MONTH?n=a.getDate():this.period===v.YEAR?n=a.getMonth()+1:n=a.getFullYear(),this.groupBy===C.NONE){t.add("grid"),t.add("self");const d=o.chargedEnergy,p=d/100*o.solarPercentage,b=d-p;e[n].self=(e[n].self||0)+p,e[n].grid=(e[n].grid||0)+b}else{const d=o[this.groupBy];t.add(d),e[n][d]=(e[n][d]||0)+o.chargedEnergy}})}const s=Array.from(t).map(r=>{const i=this.groupBy===C.NONE?"solar":this.groupBy,o=this.colorMappings[i][r],n=this.groupBy===C.NONE?this.$t("sessions.group.".concat(r)):r;return{backgroundColor:o,label:n,data:Object.values(e).map(a=>a[r]||0),borderRadius:a=>{const{dataIndex:p,datasetIndex:b}=a,_=a.dataset.data[p],w=a.chart.data.datasets.slice(b+1).some(R=>((R==null?void 0:R.data[p])||0)>.04);return _>.04&&!w?{topLeft:10,topRight:10}:{topLeft:0,topRight:0}}}});return{labels:Object.keys(e),datasets:s}},legends(){return this.chartData.datasets.map(e=>({label:e.label,color:e.backgroundColor,value:this.fmtWh(e.data.reduce((t,s)=>t+s,0)*1e3,L.AUTO)}))},options(){var t;const e=this;return{...E,locale:(t=this.$i18n)==null?void 0:t.locale,color:m.text,borderSkipped:!1,maxBarThickness:40,animation:!1,plugins:{...E.plugins,tooltip:{...E.plugins.tooltip,axis:"x",positioner:s=>{const{chart:r,tooltipPosition:i}=s,{tooltip:o}=r,{width:n,height:a}=o,{x:d,y:p}=i(),{innerWidth:b,innerHeight:_}=window;return{x:Math.min(d,b-n),y:Math.min(p,_-a)}},callbacks:{title:s=>{const{label:r}=s[0];if(this.period===v.TOTAL)return r;if(this.period===v.YEAR){const i=new Date(this.year,r-1,1);return this.fmtMonth(i)}else{const i=new Date(this.year,this.month-1,r);return this.fmtDayMonth(i)}},label:s=>{const r=s.dataset.label||"",i=s.raw||0;return i?"".concat(r,": ").concat(this.fmtWh(i*1e3,L.AUTO)):null},labelColor:I(!1),labelPointStyle:function(){return{pointStyle:"circle"}}},itemSort:function(s,r){return r.datasetIndex-s.datasetIndex}}},scales:{x:{stacked:!0,border:{display:!1},grid:{display:!1},ticks:{color:m.muted,callback:function(s){return e.period===v.YEAR?e.fmtMonth(new Date(e.year,s,1),!0):this.getLabelForValue(s)}}},y:{stacked:!0,border:{display:!1},grid:{color:m.border},title:{text:"kWh",display:!0,color:m.muted},ticks:{callback:s=>this.fmtWh(s*1e3,L.KW,!1,0),color:m.muted,maxTicksLimit:6},position:"right",min:0}}}}}},jt={style:{position:"relative",height:"300px"},class:"my-3"};function Ut(e,t,s,r,i,o){const n=f("Bar"),a=f("LegendList");return c(),u("div",null,[l("div",jt,[y(n,{data:o.chartData,options:o.options},null,8,["data","options"])]),y(a,{legends:o.legends},null,8,["legends"])])}const qt=k(Ht,[["render",Ut]]);F([ce,q,U,H,B]);const zt={name:"EnergyGroupedChart",components:{Doughnut:le,LegendList:Y},mixins:[M],props:{sessions:{type:Array,default:()=>[]},groupBy:{type:String,default:C.NONE},colorMappings:{type:Object,default:()=>({loadpoint:{},vehicle:{},solar:{}})}},computed:{chartData(){console.log("update energy aggregate data");const e={};if(this.groupBy===C.NONE){const n=this.sessions.reduce((d,p)=>d+p.chargedEnergy,0),a=this.sessions.reduce((d,p)=>d+p.chargedEnergy/100*p.solarPercentage,0);e.self=a,e.grid=n-a}else this.sessions.forEach(n=>{const a=n[this.groupBy];e[a]||(e[a]=0),e[a]+=n.chargedEnergy});const t=Object.entries(e),s=t.map(([n])=>this.groupBy===C.NONE?this.$t("sessions.group.".concat(n)):n),r=t.map(([,n])=>n),i=this.groupBy===C.NONE?"solar":this.groupBy,o=t.map(([n])=>this.colorMappings[i][n]);return{labels:s,datasets:[{data:r,backgroundColor:o}]}},legends(){const e=this.chartData.datasets[0].data.reduce((o,n)=>o+n,0),t=Math.max(...this.chartData.datasets[0].data),s=t<1?L.W:t>1e4?L.MW:L.KW,r=o=>this.fmtPercentage(100/e*o,1),i=o=>this.fmtWh(o*1e3,s);return this.chartData.labels.map((o,n)=>({label:o,color:this.chartData.datasets[0].backgroundColor[n],value:[i(this.chartData.datasets[0].data[n]),r(this.chartData.datasets[0].data[n])]}))},options(){var e;return{...E,locale:(e=this.$i18n)==null?void 0:e.locale,aspectRatio:1,borderRadius:10,color:m.text,borderWidth:3,borderColor:m.background,cutout:"70%",radius:"95%",animation:{duration:250},plugins:{...E.plugins,tooltip:{...E.plugins.tooltip,axis:"r",position:"center",callbacks:{label:t=>this.formatValue(t.raw||0),labelColor:I(!1)}}}}}},methods:{formatValue(e){return this.fmtWh(e*1e3,L.AUTO)}}},Zt={key:0,class:"row"},Jt={class:"col-12 col-md-6 mb-3"},Qt={class:"col-12 col-md-6 d-flex align-items-center"};function Xt(e,t,s,r,i,o){const n=f("Doughnut"),a=f("LegendList");return o.chartData.labels.length>1?(c(),u("div",Zt,[l("div",Jt,[y(n,{data:o.chartData,options:o.options},null,8,["data","options"])]),l("div",Qt,[y(a,{legends:o.legends,grid:""},null,8,["legends"])])])):D("",!0)}const es=k(zt,[["render",Xt]]);F([ee,q,H,B]);const ts={name:"SolarGroupedChart",components:{PolarArea:de,LegendList:Y},mixins:[M],props:{sessions:{type:Array,default:()=>[]},groupBy:{type:String,default:C.LOADPOINT},colorMappings:{type:Object,default:()=>({loadpoint:{},vehicle:{}})}},computed:{chartData(){console.log("update solar grouped data");const e={};this.sessions.forEach(a=>{const d=a[this.groupBy];e[d]||(e[d]={grid:0,self:0});const p=a.chargedEnergy,b=p/100*a.solarPercentage,_=p-b;e[d].self+=b,e[d].grid+=_});const t=Object.entries(e).sort((a,d)=>d[1].grid+d[1].self-(a[1].grid+a[1].self)),s=t.map(([a])=>a),r=t.map(([,a])=>{const d=a.grid+a.self;return a.self/d*100}),i=this.groupBy===C.NONE?"solar":this.groupBy,o=s.map(a=>this.colorMappings[i][a]),n=o.map(a=>X(a));return{labels:s,datasets:[{data:r,borderColor:o,backgroundColor:n}]}},legends(){return this.chartData.labels.map((e,t)=>({label:e,color:this.chartData.datasets[0].borderColor[t],value:this.fmtPercentage(this.chartData.datasets[0].data[t],1)}))},options(){var e;return{...E,locale:(e=this.$i18n)==null?void 0:e.locale,aspectRatio:1,borderRadius:8,borderWidth:3,color:m.text,spacing:0,radius:"100%",plugins:{...E.plugins,tooltip:{...E.plugins.tooltip,axis:"r",position:"topBottomCenter",callbacks:{title:()=>null,label:t=>{const{label:s,raw:r=0}=t;return s+": "+this.fmtPercentage(r,1)},labelColor:I(!0)}}},scales:{r:{min:0,max:100,ticks:{stepSize:25,color:m.muted,backdropColor:m.background},grid:{color:m.border}}}}}}},ss={key:0,class:"row"},os={class:"col-12 col-md-6 mb-3"},ns={class:"col-12 col-md-6 d-flex align-items-center py-0 py-md-3"};function rs(e,t,s,r,i,o){const n=f("PolarArea"),a=f("LegendList");return o.chartData.labels.length>1?(c(),u("div",ss,[l("div",os,[y(n,{data:o.chartData,options:o.options},null,8,["data","options"])]),l("div",ns,[y(a,{legends:o.legends,grid:""},null,8,["legends"])])])):D("",!0)}const as=k(ts,[["render",rs]]);F([ee,De,he,Ee,B]);const is={name:"SolarYearChart",components:{Radar:Ce,LegendList:Y},mixins:[M],props:{sessions:{type:Array,default:()=>[]},period:{type:String,default:"total"}},computed:{firstDay(){return this.sessions.length===0?null:new Date(this.sessions[0].created)},lastDay(){return this.sessions.length===0?null:new Date(this.sessions[this.sessions.length-1].created)},chartData(){if(console.log("update solar month data"),!this.sessions.length>0)return{labels:[],datasets:[]};const e=this.firstDay.getFullYear(),t=this.lastDay.getFullYear(),s={},r=[];for(let n=t;n>=e;n--){const a="".concat(n);r.push(a),s[a]={},console.log("year",a);for(let d=1;d<=12;d++)s[a][d]={}}this.sessions.forEach(n=>{const a=new Date(n.created),d="".concat(a.getFullYear()),p="".concat(a.getMonth()+1),b=n.chargedEnergy,_=b/100*n.solarPercentage,w=b-_;s[d][p].self=(s[d][p].self||0)+_,s[d][p].grid=(s[d][p].grid||0)+w});const i=r.map(n=>{const a=m.selfPalette[r.indexOf(n)];return{backgroundColor:r.length===1?X(a):"transparent",borderColor:a,label:n,data:Object.values(s[n]).map(({self:p=0,grid:b=0})=>{const _=p+b;return _===0?null:p/_*100}),yearData:Object.values(s[n]).reduce((p,{self:b=0,grid:_=0})=>({self:p.self+b,grid:p.grid+_}),{self:0,grid:0})}});return{labels:Object.keys(s[e]).map(n=>this.fmtMonth(new Date(e,n-1,1),!0)),datasets:i}},legends(){return this.period==="total"?this.chartData.datasets.map(e=>{const t=e.label,{self:s,grid:r}=e.yearData,i=s+r,o=i===0?"- %":this.fmtPercentage(s/i*100,1);return{label:t,color:e.borderColor,value:o}}):this.chartData.labels.map((e,t)=>{const s=this.chartData.datasets[0].data[t];return{label:e,value:s===null?"- %":this.fmtPercentage(this.chartData.datasets[0].data[t],1)}})},options(){var e;return{...E,locale:(e=this.$i18n)==null?void 0:e.locale,aspectRatio:1,borderWidth:4,color:m.text,spacing:0,radius:"100%",elements:{line:{tension:.05}},plugins:{...E.plugins,tooltip:{...E.plugins.tooltip,axis:"xy",position:"topBottomCenter",callbacks:{label:t=>{const s=t.raw||0;return(t.dataset.label||"")+": "+this.fmtPercentage(s,1)},labelColor:I(!0)}}},scales:{r:{min:0,max:100,beginAtZero:!1,ticks:{stepSize:20,color:m.muted,backdropColor:m.background,font:{size:10},callback:t=>this.fmtPercentage(t,0)},angleLines:{display:!1},grid:{color:m.border}}}}}}},ls={key:0,class:"row"},cs={class:"col-12 col-md-6 mb-3"},ds={class:"col-12 col-md-6 d-flex align-items-center py-0 py-md-3"};function hs(e,t,s,r,i,o){const n=f("Radar"),a=f("LegendList");return o.chartData.labels.length>1?(c(),u("div",ls,[l("div",cs,[y(n,{data:o.chartData,options:o.options},null,8,["data","options"])]),l("div",ds,[y(a,{legends:o.legends,"small-equal-widths":""},null,8,["legends"])])])):D("",!0)}const us=k(is,[["render",hs]]);F([re,ae,ie,H,U,we,he,B]);const gs={name:"CostHistoryChart",components:{Bar:ne,LegendList:Y},mixins:[M],props:{sessions:{type:Array,default:()=>[]},groupBy:{type:String,default:C.NONE},costType:{type:String,default:g.PRICE},period:{type:String,default:v.TOTAL},currency:{type:String,default:"EUR"},colorMappings:{type:Object,default:()=>({loadpoint:{},vehicle:{}})},suggestedMaxAvgCost:{type:Number,default:0},suggestedMaxCost:{type:Number,default:0}},computed:{firstDay(){return this.sessions.length===0?null:new Date(this.sessions[0].created)},month(){var e;return((e=this.firstDay)==null?void 0:e.getMonth())+1},year(){var e;return(e=this.firstDay)==null?void 0:e.getFullYear()},lastDay(){return this.sessions.length===0?null:new Date(this.sessions[this.sessions.length-1].created)},chartData(){console.log("update cost history data");const e={},t=new Set;if(this.sessions.length>0){let i,o;this.period===v.TOTAL?(i=this.firstDay.getFullYear(),o=this.lastDay.getFullYear()):this.period===v.YEAR?(i=1,o=12):(i=1,o=new Date(this.lastDay.getFullYear(),this.lastDay.getMonth()+1,0).getDate());for(let n=i;n<=o;n++)e[n]={};this.sessions.forEach(n=>{let a;const d=new Date(n.created);this.period===v.MONTH?a=d.getDate():this.period===v.YEAR?a=d.getMonth()+1:a=d.getFullYear();const p=this.groupBy===C.NONE?this.costType:n[this.groupBy];t.add(p);const b=this.costType===g.PRICE?n.price:n.co2PerKWh*n.chargedEnergy;e[a][p]=(e[a][p]||0)+b,e[a].totalCost=(e[a].totalCost||0)+b,e[a].totalKWh=(e[a].totalKWh||0)+n.chargedEnergy,e[a].avgCost=e[a].totalCost/e[a].totalKWh})}const s=Array.from(t).map(i=>{const o=this.groupBy===C.NONE?"cost":this.groupBy,n=this.colorMappings[o][i],a=this.groupBy===C.NONE?this.$t("sessions.group.".concat(i)):i;return{type:"bar",backgroundColor:n,label:a,data:Object.values(e).map(d=>d[i]||0),borderRadius:d=>{const{dataIndex:b,datasetIndex:_}=d,w=d.dataset.data[b],R=d.chart.data.datasets.filter(S=>S.type==="bar").slice(_+1).some(S=>((S==null?void 0:S.data[b])||0)>.04);return w>.04&&!R?{topLeft:10,topRight:10}:{topLeft:0,topRight:0}}}}),r=this.costType===g.PRICE?m.pricePerKWh:m.co2PerKWh;return s.push({type:"line",label:this.costType===g.PRICE?this.$t("sessions.avgPrice"):this.$t("sessions.co2"),data:Object.values(e).map(i=>i.avgCost||null),yAxisID:"y1",tension:.25,pointRadius:0,pointHoverRadius:6,borderColor:r,backgroundColor:r,borderWidth:2,spanGaps:!0}),{labels:Object.keys(e),datasets:s}},legends(){return this.chartData.datasets.map(e=>{let t=null;if(e.type==="line"){const s=e.data.filter(n=>n!==null),r=Math.min(...s),i=Math.max(...s),o=(n,a)=>this.costType===g.PRICE?this.fmtPricePerKWh(n,this.currency,!1,a):a?this.fmtCo2Medium(n):this.fmtGrams(n,!1);t="".concat(o(r,!1)," – ").concat(o(i,!0))}else{const s=e.data.reduce((r,i)=>r+i,0);t=this.costType===g.PRICE?this.fmtMoney(s,this.currency,!0,!0):this.fmtGrams(s)}return{label:e.label,color:e.backgroundColor,value:t}})},options(){var t;const e=this;return{...E,locale:(t=this.$i18n)==null?void 0:t.locale,color:m.text,borderSkipped:!1,maxBarThickness:40,animation:!1,plugins:{...E.plugins,tooltip:{...E.plugins.tooltip,axis:"x",positioner:s=>{const{chart:r,tooltipPosition:i}=s,{tooltip:o}=r,{width:n,height:a}=o,{x:d,y:p}=i(),{innerWidth:b,innerHeight:_}=window;return{x:Math.min(d,b-n),y:Math.min(p,_-a)}},callbacks:{title:s=>{const{label:r}=s[0];if(this.period===v.TOTAL)return r;if(this.period===v.YEAR){const i=new Date(this.year,r-1,1);return this.fmtMonth(i)}else{const i=new Date(this.year,this.month-1,r);return this.fmtDayMonth(i)}},label:s=>{const r=s.dataset.label||"",i=s.raw;if(s.dataset.type==="line"){if(i===null)return null;const o=this.costType===g.PRICE?this.fmtPricePerKWh(i,this.currency,!1):this.fmtCo2Medium(i);return"".concat(r,": ").concat(o)}return i?"".concat(r,": ").concat(this.costType===g.PRICE?this.fmtMoney(i,this.currency,!0,!0):this.fmtGrams(i)):null},labelColor:I(!1)},itemSort:function(s,r){return r.datasetIndex-s.datasetIndex}}},scales:{x:{stacked:!0,border:{display:!1},grid:{display:!1},ticks:{color:m.muted,callback:function(s){return e.period===v.YEAR?e.fmtMonth(new Date(e.year,s,1),!0):this.getLabelForValue(s)}}},y:{stacked:!0,position:"right",border:{display:!1},grid:{color:m.border},title:{text:"kgCO₂e",display:this.costType===g.CO2,color:m.muted},ticks:{callback:s=>this.costType===g.PRICE?this.fmtMoney(s,this.currency,!1,!0):this.fmtNumber(s/1e3,0),color:m.muted,maxTicksLimit:6},suggestedMax:this.suggestedMaxCost,min:0},y1:{position:"left",border:{display:!1},suggestedMax:this.suggestedMaxAvgCost,grid:{drawOnChartArea:!1},title:{text:this.costType===g.CO2?"gCO₂e/kWh":this.pricePerKWhUnit(this.currency,!1),display:!0,color:m.muted},ticks:{callback:s=>this.costType===g.PRICE?this.fmtPricePerKWh(s,this.currency,!1,!1):this.fmtNumber(s,0),color:m.muted,maxTicksLimit:6}}}}}}},ps={style:{position:"relative",height:"300px"},class:"my-3"};function ms(e,t,s,r,i,o){const n=f("Bar"),a=f("LegendList");return c(),u("div",null,[l("div",ps,[y(n,{data:o.chartData,options:o.options},null,8,["data","options"])]),y(a,{legends:o.legends},null,8,["legends"])])}const ys=k(gs,[["render",ms]]);F([ce,q,U,H,B]);const fs={name:"CostGroupedChart",components:{Doughnut:le,LegendList:Y},mixins:[M],props:{sessions:{type:Array,default:()=>[]},groupBy:{type:String,default:C.LOADPOINT},colorMappings:{type:Object,default:()=>({loadpoint:{},vehicle:{}})},currency:{type:String,default:"EUR"},costType:{type:String,default:g.PRICE}},computed:{chartData(){console.log("update ".concat(this.costType," grouped data"));const e={};this.sessions.forEach(o=>{const n=o[this.groupBy];e[n]||(e[n]=0),this.costType===g.PRICE?e[n]+=o.price:this.costType===g.CO2&&(e[n]+=o.co2PerKWh*o.chargedEnergy)});const t=Object.entries(e).sort((o,n)=>n[1]-o[1]),s=t.map(([o])=>o),r=t.map(([,o])=>o),i=s.map(o=>this.colorMappings[this.groupBy][o]);return{labels:s,datasets:[{data:r,backgroundColor:i}]}},legends(){const e=this.chartData.datasets[0].data.reduce((s,r)=>s+r,0),t=s=>this.fmtPercentage(100/e*s,1);return this.chartData.labels.map((s,r)=>({label:s,color:this.chartData.datasets[0].backgroundColor[r],value:[this.formatValue(this.chartData.datasets[0].data[r]),t(this.chartData.datasets[0].data[r])]}))},options(){var e;return{...E,locale:(e=this.$i18n)==null?void 0:e.locale,aspectRatio:1,borderRadius:10,color:m.text,borderWidth:3,borderColor:m.background,cutout:"70%",radius:"95%",animation:{duration:250},plugins:{...E.plugins,tooltip:{...E.plugins.tooltip,axis:"r",position:"center",callbacks:{label:t=>this.formatValue(t.raw||0),labelColor:I(!1)}}}}}},methods:{formatValue(e){return this.costType===g.PRICE?this.fmtMoney(e,this.currency,!0,!0):this.fmtGrams(e)}}},bs={key:0,class:"row"},vs={class:"col-12 col-md-6 mb-3"},_s={class:"col-12 col-md-6 d-flex align-items-center"};function Cs(e,t,s,r,i,o){const n=f("Doughnut"),a=f("LegendList");return o.chartData.labels.length>1?(c(),u("div",bs,[l("div",vs,[y(n,{data:o.chartData,options:o.options},null,8,["data","options"])]),l("div",_s,[y(a,{legends:o.legends,grid:""},null,8,["legends"])])])):D("",!0)}const Ds=k(fs,[["render",Cs]]);F([ee,q,H,B]);const Es={name:"AvgCostGroupedChart",components:{PolarArea:de,LegendList:Y},mixins:[M],props:{sessions:{type:Array,default:()=>[]},currency:{type:String,default:"EUR"},groupBy:{type:String,default:C.LOADPOINT},colorMappings:{type:Object,default:()=>({loadpoint:{},vehicle:{}})},suggestedMax:{type:Number,default:0},costType:{type:String,default:g.PRICE}},computed:{chartData(){console.log("update ".concat(this.costType," grouped data"));const e={};this.sessions.forEach(n=>{const a=n[this.groupBy];e[a]||(e[a]={energy:0,cost:0});const d=n.chargedEnergy;this.costType===g.CO2?(e[a].energy+=d,e[a].cost+=n.co2PerKWh*d):this.costType===g.PRICE&&(e[a].energy+=d,e[a].cost+=n.price)});const t=Object.entries(e).sort((n,a)=>a[1].cost-n[1].cost),s=t.map(([n])=>n),r=t.map(([,n])=>n.cost/n.energy),i=s.map(n=>this.colorMappings[this.groupBy][n]),o=i.map(n=>X(n));return{labels:s,datasets:[{data:r,borderColor:i,backgroundColor:o}]}},legends(){return this.chartData.labels.map((e,t)=>({label:e,color:this.chartData.datasets[0].borderColor[t],value:this.formatValue(this.chartData.datasets[0].data[t])}))},options(){var e;return{...E,locale:(e=this.$i18n)==null?void 0:e.locale,aspectRatio:1,borderRadius:8,borderWidth:3,color:m.text,spacing:0,radius:"100%",plugins:{...E.plugins,tooltip:{...E.plugins.tooltip,axis:"r",position:"topBottomCenter",callbacks:{title:()=>null,label:t=>{const{label:s,raw:r=0}=t;return s+": "+(this.costType===g.CO2?this.fmtCo2Long(r):this.fmtPricePerKWh(r,this.currency))},labelColor:I(!0)}}},scales:{r:{suggestedMin:0,suggestedMax:this.suggestedMax,beginAtZero:!1,ticks:{color:m.muted,backdropColor:m.background,font:{size:10},callback:this.formatValue,maxTicksLimit:6},angleLines:{display:!1},grid:{color:m.border}}}}}},methods:{formatValue(e){return this.costType===g.CO2?this.fmtCo2Medium(e):this.fmtPricePerKWh(e,this.currency)}}},ws={key:0,class:"row"},Ps={class:"col-12 col-md-6 mb-3"},Ts={class:"col-12 col-md-6 d-flex align-items-center py-0 py-md-3"};function ks(e,t,s,r,i,o){const n=f("PolarArea"),a=f("LegendList");return o.chartData.labels.length>1?(c(),u("div",ws,[l("div",Ps,[y(n,{data:o.chartData,options:o.options},null,8,["data","options"])]),l("div",Ts,[y(a,{legends:o.legends,grid:""},null,8,["legends"])])])):D("",!0)}const Ss=k(Es,[["render",ks]]),xs={name:"PeriodSelector",components:{SelectGroup:ue},props:{period:{type:String,required:!0},periodOptions:{type:Array,required:!0}},emits:["update:period"],methods:{changePeriod(e){this.$emit("update:period",e)}}};function Ms(e,t,s,r,i,o){const n=f("SelectGroup");return c(),u(T,null,[y(n,{id:"sessionsPeriodSmall",class:"w-100 d-flex d-lg-none",options:s.periodOptions,modelValue:s.period,"onUpdate:modelValue":o.changePeriod},null,8,["options","modelValue","onUpdate:modelValue"]),y(n,{id:"sessionsPeriod",class:"w-100 d-none d-lg-flex",options:s.periodOptions,large:"",modelValue:s.period,"onUpdate:modelValue":o.changePeriod},null,8,["options","modelValue","onUpdate:modelValue"])],64)}const Os=k(xs,[["render",Ms]]);var Ls='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path d="M0 0h48v48H0z" fill="none"/><path d="M34.586 12.586L23.171 24l11.415 11.414 2.828-2.828L28.829 24l8.585-8.586-2.828-2.828z"/><path d="M25.414 15.414l-2.828-2.828L11.171 24l11.415 11.413 2.828-2.828L16.829 24l8.585-8.586z"/></svg>';class Ns extends HTMLElement{connectedCallback(){this.setAttribute("data-shopicon",!0),this.innerHTML=Ls}}window.customElements.define("shopicon-regular-angledoubleleftsmall",Ns);const As={name:"DateNavigatorButton",props:{disabled:Boolean,prev:Boolean,next:Boolean,onClick:Function},computed:{icon(){return this.prev?"shopicon-regular-angledoubleleftsmall":this.next?"shopicon-regular-angledoublerightsmall":null},iconClass(){return this.prev?"me-1":this.next?"ms-1":""}}},Ws=["disabled"];function Rs(e,t,s,r,i,o){return c(),u("button",{class:"btn btn-sm border-0",disabled:s.disabled,onClick:t[0]||(t[0]=(...n)=>s.onClick&&s.onClick(...n))},[(c(),P(Q(o.icon),{size:"s",class:V(o.iconClass)},null,8,["class"]))],8,Ws)}const Is=k(As,[["render",Rs],["__scopeId","data-v-f688862b"]]),Fs={name:"DateNavigator",components:{CustomSelect:j,DateNavigatorButton:Is},mixins:[M],props:{month:Number,year:Number,startDate:Date,showMonth:Boolean,showYear:Boolean},emits:["update-date"],computed:{hasPrevMonth(){return this.year>this.startDate.getFullYear()||this.month>this.startDate.getMonth()+1},hasNextMonth(){const e=new Date;return this.year<e.getFullYear()||this.month<e.getMonth()+1},hasPrevYear(){return this.year>this.startDate.getFullYear()},hasNextYear(){return this.year<new Date().getFullYear()},monthOptions(){return Array.from({length:12},(e,t)=>t+1).map(e=>({name:this.fmtMonth(new Date(this.year,e-1,1)),value:e}))},monthYearOptions(){const e=this.startDate,t=new Date,s=[];for(let r=e.getFullYear();r<=t.getFullYear();r++){const i=r===e.getFullYear()?e.getMonth()+1:1,o=r===t.getFullYear()?t.getMonth()+1:12;for(let n=i;n<=o;n++)s.push({name:this.fmtMonthYear(new Date(r,n-1,1)),value:"".concat(r,"-").concat(n)})}return s},yearOptions(){const e=this.startDate,t=new Date,s=[];for(let r=e.getFullYear();r<=t.getFullYear();r++)s.push({name:r,value:r});return s},monthName(){const e=new Date;return e.setMonth(this.month-1,1),this.fmtMonth(e)},monthYearName(){const e=new Date;return e.setMonth(this.month-1,1),e.setFullYear(this.year),this.fmtMonthYear(e)}},methods:{emitPrevMonth(){const e=new Date(this.year,this.month-2,1);this.$emit("update-date",{year:e.getFullYear(),month:e.getMonth()+1})},emitNextMonth(){const e=new Date(this.year,this.month,1);this.$emit("update-date",{year:e.getFullYear(),month:e.getMonth()+1})},emitPrevYear(){this.$emit("update-date",{year:this.year-1,month:void 0})},emitNextYear(){this.$emit("update-date",{year:this.year+1,month:void 0})},emitMonth(e){this.$emit("update-date",{year:this.year,month:e})},emitMonthYear(e){const[t,s]=e.split("-");this.$emit("update-date",{year:parseInt(t),month:parseInt(s)})},emitYear(e){this.$emit("update-date",{year:e,month:void 0})}}},Bs={key:0,class:"d-none d-sm-flex justify-content-between"},Ys={class:"btn btn-sm border-0 text-truncate h-100",style:{width:"8em"},"data-testid":"navigate-month"},Gs={key:1,class:"d-flex d-sm-none justify-content-between"},$s={class:"btn btn-sm border-0 h-100 text-truncate","data-testid":"navigate-month-year"},Ks={class:"btn btn-sm border-0 h-100",style:{width:"4em"},"data-testid":"navigate-year"};function Vs(e,t,s,r,i,o){const n=f("DateNavigatorButton"),a=f("CustomSelect");return c(),u("div",{class:V(["d-sm-flex justify-content-lg-end gap-lg-4",s.showMonth?"justify-content-between":"justify-content-end"])},[s.showMonth?(c(),u("div",Bs,[y(n,{prev:"",disabled:!o.hasPrevMonth,onClick:o.emitPrevMonth,"data-testid":"navigate-prev-month"},null,8,["disabled","onClick"]),y(a,{id:"sessionsMonth",options:o.monthOptions,selected:s.month,onChange:t[0]||(t[0]=d=>o.emitMonth(d.target.value))},{default:x(()=>[l("button",Ys,h(o.monthName),1)]),_:1},8,["options","selected"]),y(n,{next:"",disabled:!o.hasNextMonth,onClick:o.emitNextMonth,"data-testid":"navigate-next-month"},null,8,["disabled","onClick"])])):D("",!0),s.showMonth?(c(),u("div",Gs,[y(n,{prev:"",disabled:!o.hasPrevMonth,onClick:o.emitPrevMonth,"data-testid":"navigate-prev-year-month"},null,8,["disabled","onClick"]),y(a,{id:"sessionsMonthYear",options:o.monthYearOptions,selected:s.month,onChange:t[1]||(t[1]=d=>o.emitMonthYear(d.target.value))},{default:x(()=>[l("button",$s,h(o.monthYearName),1)]),_:1},8,["options","selected"]),y(n,{next:"",disabled:!o.hasNextMonth,onClick:o.emitNextMonth,"data-testid":"navigate-next-year-month"},null,8,["disabled","onClick"])])):D("",!0),s.showYear?(c(),u("div",{key:2,class:V(["justify-content-between",s.showMonth?"d-none d-sm-flex":"d-flex"])},[y(n,{prev:"",disabled:!o.hasPrevYear,onClick:o.emitPrevYear,"data-testid":"navigate-prev-year"},null,8,["disabled","onClick"]),y(a,{id:"sessionsYear",options:o.yearOptions,selected:s.year,onChange:t[2]||(t[2]=d=>o.emitYear(d.target.value))},{default:x(()=>[l("button",Ks,h(s.year),1)]),_:1},8,["options","selected"]),y(n,{next:"",disabled:!o.hasNextYear,onClick:o.emitNextYear,"data-testid":"navigate-next-year"},null,8,["disabled","onClick"])],2)):D("",!0)],2)}const Hs=k(Fs,[["render",Vs],["__scopeId","data-v-1a6ebd38"]]),js={name:"Total",mixins:[Pe]};function Us(e,t,s,r,i,o){return c(),u("svg",{style:oe(e.svgStyle),viewBox:"0 0 24 24"},t[0]||(t[0]=[l("path",{fill:"currentColor",d:"M4.83 4.61A1 1 0 0 1 5.75 4h12.5a1 1 0 1 1 0 2H8.11l4.95 5.115a1 1 0 0 1 .04 1.346L7.924 18.5H18.25a1 1 0 1 1 0 2H5.75a1 1 0 0 1-.76-1.65l5.999-6.999L5.03 5.695a1 1 0 0 1-.2-1.085"},null,-1)]),4)}const qs=k(js,[["render",Us]]),zs={name:"Sessions",components:{SessionDetailsModal:ot,SessionTable:Gt,TopHeader:xe,EnergyHistoryChart:qt,EnergyGroupedChart:es,IconSelectGroup:ke,IconSelectItem:Te,SelectGroup:ue,CustomSelect:j,SolarGroupedChart:as,SolarYearChart:us,PeriodSelector:Os,DateNavigator:Hs,DynamicPriceIcon:z,CostHistoryChart:ys,CostGroupedChart:Ds,AvgCostGroupedChart:Ss},mixins:[M],props:{notifications:Array,month:{type:Number,default:()=>new Date().getMonth()+1},year:{type:Number,default:()=>new Date().getFullYear()},period:{type:String,default:v.MONTH},loadpointFilter:{type:String,default:""},vehicleFilter:{type:String,default:""},offline:Boolean},data(){return{sessions:[],selectedType:K.sessionsType||g.SOLAR,selectedGroup:K.sessionsGroup||C.NONE,selectedSessionId:void 0,periods:v,types:g,groups:C}},head(){return{title:"".concat(this.$t("sessions.title")," | evcc")}},computed:{currency(){return $.state.currency||"EUR"},energyTitle(){return this.$t("sessions.chartTitle.energy")},historyTitle(){return this.activeType===g.SOLAR?this.energyTitle:this.costTitle},historySubTitle(){return this.activeType===g.SOLAR?this.energySubTitle:this.costSubTitle},firstExtraTitle(){return this.activeType===g.SOLAR?this.solarTitle:this.avgCostTitle},secondExtraTitle(){return this.activeType===g.SOLAR?this.energyGroupedTitle:this.costGroupedTitle},solarPercentageFmt(){return this.fmtPercentage(this.totalEnergy>0?100/this.totalEnergy*this.selfEnergy:0)},energySumFmt(){return this.fmtWh(this.totalEnergy*1e3,L.AUTO)},energySubTitle(){const e=this.$t("sessions.chartTitle.energySubTotal",{value:this.energySumFmt}),t=this.$t("sessions.chartTitle.energySubSolar",{value:this.solarPercentageFmt});return"".concat(e," ・ ").concat(t)},solarTitle(){return this.selectedGroup===C.NONE?this.$t("sessions.chartTitle.solar"):this.$t("sessions.chartTitle.solarByGroup",{byGroup:this.byGroupTitle})},byGroupTitle(){return this.selectedGroup===C.LOADPOINT?this.$t("sessions.chartTitle.byGroupLoadpoint"):this.selectedGroup===C.VEHICLE?this.$t("sessions.chartTitle.byGroupVehicle"):""},energyGroupedTitle(){return this.selectedGroup===C.NONE?this.$t("sessions.chartTitle.energyGrouped"):this.$t("sessions.chartTitle.energyGroupedByGroup",{byGroup:this.byGroupTitle})},avgCostTitle(){const e=this.activeType===g.PRICE?"Price":"Co2";return this.$t("sessions.chartTitle.avg".concat(e,"ByGroup"),{byGroup:this.byGroupTitle})},costGroupedTitle(){const e=this.activeType===g.PRICE?"Price":"Co2";return this.$t("sessions.chartTitle.grouped".concat(e,"ByGroup"),{byGroup:this.byGroupTitle})},periodOptions(){return Object.entries(v).map(([e,t])=>({name:this.$t("sessions.period.".concat(e.toLowerCase())),value:t}))},typeOptions(){return Object.values(g).map(t=>{const s=t===g.PRICE&&!this.typePriceAvailable||t===g.CO2&&!this.typeCo2Available,r=this.activeType===t;return{label:this.$t("sessions.type.".concat(t)),value:t,disabled:s,active:r}})},totalEnergy(){return this.currentSessions.reduce((e,t)=>e+t.chargedEnergy,0)},selfEnergy(){return this.currentSessions.reduce((e,t)=>e+t.chargedEnergy/100*t.solarPercentage,0)},currentSessionsWithPrice(){return this.currentSessions.filter(e=>e.price!==null)},currentTypeSessions(){return this.activeType===g.PRICE?this.currentSessionsWithPrice:this.activeType===g.CO2?this.currentSessionsWithCo2:this.currentSessions},totalPrice(){return this.currentSessionsWithPrice.reduce((e,t)=>e+t.price,0)},pricePerKWh(){const t=this.currentSessionsWithPrice.reduce((s,r)=>s+r.chargedEnergy,0);return t?this.totalPrice/t:null},currentSessionsWithCo2(){return this.currentSessions.filter(e=>e.co2PerKWh!==null)},totalCo2(){return this.currentSessionsWithCo2.reduce((t,s)=>t+s.co2PerKWh*s.chargedEnergy,0)},co2PerKWh(){const t=this.currentSessionsWithCo2.reduce((s,r)=>s+r.chargedEnergy,0);return t?this.totalCo2/t:null},costTitle(){const e=this.activeType===g.PRICE?"Price":"Co2";return this.$t("sessions.chartTitle.history".concat(e))},avgCostFmt(){return this.activeType===g.PRICE?this.fmtPricePerKWh(this.pricePerKWh,this.currency):this.fmtCo2Medium(this.co2PerKWh)},costSubTitle(){const e=this.activeType===g.PRICE?"Price":"Co2",t=this.activeType===g.PRICE?this.fmtMoney(this.totalPrice,this.currency,!0,!0):this.fmtGrams(this.totalCo2),s=this.$t("sessions.chartTitle.history".concat(e,"Sub"),{value:t});return"".concat(s," ・ ⌀ ").concat(this.avgCostFmt)},activeType(){return this.selectedType===g.PRICE&&this.typePriceAvailable?g.PRICE:this.selectedType===g.CO2&&this.typeCo2Available?g.CO2:g.SOLAR},showCostCharts(){return this.typePriceAvailable||this.typeCo2Available},typePriceAvailable(){return this.currentSessionsWithPrice.length>0},typeCo2Available(){return this.currentSessionsWithCo2.length>0},startDate(){var e;return new Date(((e=this.sessions[0])==null?void 0:e.created)||Date.now())},topNavigation:function(){return{vehicleLogins:$.state.auth?$.state.auth.vehicles:{},...this.collectProps(TopNavigation,$.state)}},sessionsWithDefaults(){return this.sessions.map(e=>{const t=e.loadpoint||this.$t("main.loadpoint.fallbackName"),s=e.vehicle||this.$t("main.vehicle.unknown");return{...e,loadpoint:t,vehicle:s}})},currentSessions(){return this.sessionsWithDefaults.filter(e=>{const t=new Date(e.created);switch(this.period){case v.MONTH:return t.getFullYear()===this.year&&t.getMonth()+1===this.month;case v.YEAR:return t.getFullYear()===this.year;case v.TOTAL:return!0;default:return!1}})},vehicleList(){const e=$.state.vehicles||{};return Object.entries(e).map(([t,s])=>({name:t,...s}))},loadpointList(){return($.state.loadpoints||[]).map(({title:t})=>t)},selectedSession(){return this.sessions.find(e=>e.id==this.selectedSessionId)},monthName(){const e=new Date;return e.setMonth(this.month-1,1),this.fmtMonth(e)},headline(){const e=new Date;return e.setMonth(this.month-1,1),e.setFullYear(this.year),this.fmtMonthYear(e)},csvLink(){return this.csvHrefLink(this.year,this.month)},csvTotalLink(){return this.csvHrefLink()},colorMappings(){const e=new Date;e.setMonth(e.getMonth()-3);const t=p=>this.sessionsWithDefaults.reduce((b,_)=>{if(new Date(_.created)>=e){const w=_[p];b[w]=(b[w]||0)+_.chargedEnergy}return b},{}),s=(p,b)=>{const _={};let w=0;return Object.entries(p).sort((S,G)=>G[1]-S[1]).forEach(([S])=>{_[S]||(_[S]=m.palette[w%m.palette.length],w++)}),this.sessionsWithDefaults.forEach(S=>{const G=S[b];_[G]||(_[G]=m.palette[w%m.palette.length],w++)}),_},r=t("loadpoint"),i=s(r,"loadpoint"),o=t("vehicle"),n=s(o,"vehicle"),a={self:m.self,grid:m.grid},d={price:m.price,co2:m.co2};return{loadpoint:i,vehicle:n,solar:a,cost:d}},groupIcons(){return{[C.NONE]:qs,[C.LOADPOINT]:"shopicon-regular-cablecharge",[C.VEHICLE]:"shopicon-regular-car3"}},typeIcons(){return{[g.SOLAR]:"shopicon-regular-sun",[g.PRICE]:z,[g.CO2]:"shopicon-regular-eco1"}},costTypeIcons(){return{[g.PRICE]:z,[g.CO2]:"shopicon-regular-eco1"}},showTable(){return this.period===v.MONTH},showMonthNavigation(){return this.period===v.MONTH},showYearNavigation(){return[v.MONTH,v.YEAR].includes(this.period)},showDateNavigator(){return this.showMonthNavigation||this.showYearNavigation},groupEntriesAvailable(){return this.selectedGroup===C.NONE||!this.currentSessions.length?!1:new Set(this.currentSessions.map(e=>e[this.selectedGroup])).size>1},showSolarYearChart(){return this.period!==v.MONTH&&this.selectedGroup===C.NONE},showExtraCharts(){const e=new Set(this.currentTypeSessions.map(i=>i[this.selectedGroup])).size>1,t=[C.LOADPOINT,C.VEHICLE].includes(this.selectedGroup),s=this.activeType===g.SOLAR,r=this.period!==v.MONTH;return t&&e||s&&r&&!t},suggestedMaxAvgPrice(){const t=this.sessions.filter(s=>s.pricePerKWh!==null).map(s=>s.pricePerKWh);return this.percentile(t,98)},suggestedMaxAvgCo2(){const t=this.sessions.filter(s=>s.co2PerKWh!==null).map(s=>s.co2PerKWh);return this.percentile(t,98)},suggestedMaxAvgCost(){return this.activeType===g.PRICE?this.suggestedMaxAvgPrice:this.suggestedMaxAvgCo2},suggestedMaxCo2(){const t=this.sessions.filter(s=>s.co2PerKWh!==null).reduce((s,r)=>{const i=this.dateToPeriodKey(new Date(r.created));return s[i]=(s[i]||0)+r.co2PerKWh*r.chargedEnergy,s},{});return Math.max(this.percentile(Object.values(t),98),5)},suggestedMaxPrice(){const t=this.sessions.filter(s=>s.price!==null).reduce((s,r)=>{const i=this.dateToPeriodKey(new Date(r.created));return s[i]=(s[i]||0)+r.price,s},{});return Math.max(this.percentile(Object.values(t),98),1)},suggestedMaxCost(){return this.activeType===g.PRICE?this.suggestedMaxPrice:this.suggestedMaxCo2}},watch:{offline:function(){this.loadSessions()}},mounted(){this.loadSessions()},methods:{changePeriod(e){let t=this.month,s=this.year,r=e;switch(r){case v.TOTAL:t=void 0,s=void 0;break;case v.YEAR:t=void 0;break;default:r=void 0}this.$router.push({query:{...this.$route.query,period:r,month:t,year:s}})},dateToPeriodKey(e){const t={year:"numeric",month:"numeric",day:"numeric"};return this.period===v.YEAR&&(t.day=void 0),this.period===v.TOTAL&&(t.month=void 0),e.toLocaleDateString(void 0,t)},async loadSessions(){var s;const t=(s=(await Z.get("sessions")).data)==null?void 0:s.result.sort((r,i)=>new Date(r.created)-new Date(i.created));this.sessions=t},showDetails(e){this.selectedSessionId=e,J.getOrCreateInstance(document.getElementById("sessionDetailsModal")).show()},csvHrefLink(e,t){var r;const s=new URLSearchParams({format:"csv",lang:(r=this.$i18n)==null?void 0:r.locale});return e&&t&&(s.append("year",e),s.append("month",t)),"./api/sessions?".concat(s.toString())},updateType(e){this.selectedType=e,K.sessionsType=e},updateGroup(e){this.selectedGroup=e,K.sessionsGroup=e},updateDate({year:e,month:t}){this.$router.push({query:{...this.$route.query,year:e,month:t}})},percentile(e,t){if(e.length===0)return null;const s=e.sort((i,o)=>i-o),r=t/100*(s.length-1);return s[Math.floor(r)]}}},Zs={class:"container px-4 safe-area-inset"},Js={class:"row"},Qs={class:"col-12"},Xs={class:"header-outer sticky-top"},eo={class:"container px-4"},to={class:"row py-3 py-sm-3 d-flex flex-column flex-sm-row gap-3 gap-lg-0 mb-lg-2"},so={class:"col-lg-5 d-flex mb-lg-0"},oo={key:0,class:"col-lg-6 offset-lg-1"},no={class:"d-flex gap-3 mb-5 justify-content-between flex-wrap pt-1"},ro={class:"fw-normal my-0 d-flex gap-3 flex-wrap d-flex align-items-baseline overflow-hidden"},ao={key:0,class:"d-block no-wrap text-truncate"},io={class:"d-block no-wrap text-truncate"},lo={key:2,class:"row align-items-start"},co={class:"col-12 col-lg-6 mb-5"},ho={class:"fw-normal my-4"},uo={key:0},go={class:"col-12 col-lg-6 mb-5"},po={class:"fw-normal my-4"},mo={key:3},yo={class:"d-grid gap-2 d-md-block mt-3 mb-5"},fo=["href"],bo=["href"];function vo(e,t,s,r,i,o){const n=f("TopHeader"),a=f("PeriodSelector"),d=f("DateNavigator"),p=f("IconSelectItem"),b=f("IconSelectGroup"),_=f("EnergyHistoryChart"),w=f("CostHistoryChart"),R=f("SolarYearChart"),S=f("SolarGroupedChart"),G=f("AvgCostGroupedChart"),ge=f("EnergyGroupedChart"),pe=f("CostGroupedChart"),me=f("SessionTable"),ye=f("SessionDetailsModal");return c(),u("div",Zs,[y(n,{title:e.$t("sessions.title")},null,8,["title"]),l("div",Js,[l("main",Qs,[l("div",Xs,[l("div",eo,[l("div",to,[l("div",so,[y(a,{period:s.period,periodOptions:o.periodOptions,"onUpdate:period":o.changePeriod},null,8,["period","periodOptions","onUpdate:period"])]),o.showDateNavigator?(c(),u("div",oo,[y(d,{month:s.month,year:s.year,startDate:o.startDate,showMonth:o.showMonthNavigation,showYear:o.showYearNavigation,onUpdateDate:o.updateDate},null,8,["month","year","startDate","showMonth","showYear","onUpdateDate"])])):D("",!0)])])]),l("div",no,[y(b,null,{default:x(()=>[(c(),u(T,null,N([!0,!1],O=>(c(),u(T,null,[(c(!0),u(T,null,N(o.typeOptions,({value:A,label:te,disabled:fe,active:be})=>(c(),P(p,{key:A+O,label:O?te:void 0,class:V({"d-none d-lg-block":O,"d-block d-lg-none":!O}),disabled:fe,active:be,onClick:_o=>o.updateType(A)},{default:x(()=>[(c(),P(Q(o.typeIcons[A])))]),_:2},1032,["label","class","disabled","active","onClick"]))),128))],64))),64))]),_:1}),y(b,null,{default:x(()=>[(c(),u(T,null,N([!0,!1],O=>(c(),u(T,null,[(c(!0),u(T,null,N(Object.values(i.groups),A=>(c(),P(p,{key:A+O,active:i.selectedGroup===A,label:O?e.$t("sessions.groupBy.".concat(A.toLowerCase())):void 0,class:V({"d-none d-lg-block":O,"d-block d-lg-none":!O}),onClick:te=>o.updateGroup(A)},{default:x(()=>[(c(),P(Q(o.groupIcons[A])))]),_:2},1032,["active","label","class","onClick"]))),128))],64))),64))]),_:1})]),l("h3",ro,[o.historyTitle?(c(),u("span",ao,h(o.historyTitle),1)):D("",!0),l("small",io,h(o.historySubTitle),1)]),o.activeType===i.types.SOLAR?(c(),P(_,{key:0,class:"mb-5",sessions:o.currentSessions,"color-mappings":o.colorMappings,"group-by":i.selectedGroup,period:s.period},null,8,["sessions","color-mappings","group-by","period"])):(c(),P(w,{key:1,class:"mb-5",sessions:o.currentTypeSessions,"color-mappings":o.colorMappings,"group-by":i.selectedGroup,"cost-type":o.activeType,currency:o.currency,period:s.period,"suggested-max-avg-cost":o.suggestedMaxAvgCost,"suggested-max-cost":o.suggestedMaxCost},null,8,["sessions","color-mappings","group-by","cost-type","currency","period","suggested-max-avg-cost","suggested-max-cost"])),o.showExtraCharts?(c(),u("div",lo,[l("div",co,[l("h3",ho,h(o.firstExtraTitle),1),o.activeType===i.types.SOLAR?(c(),u("div",uo,[o.showSolarYearChart?(c(),P(R,{key:0,period:s.period,sessions:o.currentSessions},null,8,["period","sessions"])):(c(),P(S,{key:1,sessions:o.currentSessions,"color-mappings":o.colorMappings,"group-by":i.selectedGroup},null,8,["sessions","color-mappings","group-by"]))])):(c(),P(G,{key:1,sessions:o.currentTypeSessions,"color-mappings":o.colorMappings,"suggested-max-price":o.suggestedMaxAvgCost,"group-by":i.selectedGroup,"cost-type":o.activeType,currency:o.currency},null,8,["sessions","color-mappings","suggested-max-price","group-by","cost-type","currency"]))]),l("div",go,[l("h3",po,h(o.secondExtraTitle),1),o.activeType===i.types.SOLAR?(c(),P(ge,{key:0,sessions:o.currentSessions,"color-mappings":o.colorMappings,"group-by":i.selectedGroup},null,8,["sessions","color-mappings","group-by"])):(c(),P(pe,{key:1,sessions:o.currentTypeSessions,"color-mappings":o.colorMappings,"group-by":i.selectedGroup,"cost-type":o.activeType,currency:o.currency},null,8,["sessions","color-mappings","group-by","cost-type","currency"]))])])):D("",!0),o.showTable?(c(),u("div",mo,[y(me,{sessions:o.currentSessions,vehicleFilter:s.vehicleFilter,loadpointFilter:s.loadpointFilter,currency:o.currency,onShowSession:o.showDetails},null,8,["sessions","vehicleFilter","loadpointFilter","currency","onShowSession"]),l("div",yo,[o.currentSessions.length?(c(),u("a",{key:0,class:"btn btn-sm btn-outline-secondary text-nowrap me-md-2",href:o.csvLink,download:""},h(e.$t("sessions.csvMonth",{month:o.headline})),9,fo)):D("",!0),i.sessions.length?(c(),u("a",{key:1,class:"btn btn-sm btn-outline-secondary text-nowrap",href:o.csvTotalLink,download:""},h(e.$t("sessions.csvTotal")),9,bo)):D("",!0)])])):(c(),u("button",{key:4,class:"btn btn-link text-muted mb-5",onClick:t[0]||(t[0]=O=>o.changePeriod(i.periods.MONTH))},h(e.$t("sessions.showIndividualEntries")),1))]),y(ye,{session:o.selectedSession,vehicles:o.vehicleList,loadpoints:o.loadpointList,currency:o.currency,onSessionChanged:o.loadSessions},null,8,["session","vehicles","loadpoints","currency","onSessionChanged"])])])}const Po=k(zs,[["render",vo],["__scopeId","data-v-eeade8ae"]]);export{Po as default};
