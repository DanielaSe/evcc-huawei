System.register(["./index-legacy-C3BDSfGU.js","./TopNavigation-legacy-DyfmuRER.js","./batterythreequarters-legacy-CnUIOvQq.js","./checkmark-legacy-BuOTd23Y.js","./MultiSelect-legacy-B0Z-dmKX.js","./deepEqual-legacy-nmvg_8Jh.js"],(function(e,t){"use strict";var i,a,n,o,r,s,l,c,d,h,u,m,p,g,f,v,b,y,w,S,P,x,C,T,k,I,$,L,A,N,B,V,M,E,D,R,U,q,O,F,W,_,z,j,H,G,K,Z,Y,Q,J,X,ee,te,ie,ae,ne,oe,re,se,le,ce;return{setters:[e=>{i=e._,a=e.f,n=e.c,o=e.w,r=e.a,s=e.v,l=e.n,c=e.t,d=e.F,h=e.r,u=e.b,m=e.d,p=e.e,g=e.o,f=e.h,v=e.i,b=e.j,y=e.k,w=e.l,S=e.P,P=e.m,x=e.p,C=e.q,T=e.s,k=e.u,I=e.x,$=e.M,L=e.y,A=e.z,N=e.C,B=e.A,V=e.B,M=e.D,E=e.S,D=e.E,R=e.G,U=e.H,q=e.T,O=e.I,F=e.J,W=e.K,_=e.L,z=e.N,j=e.O,H=e.Q,G=e.R,K=e.U,Z=e.V,Y=e.W,Q=e.X,J=e.Y,X=e.Z,ee=e.$,te=e.a0,ie=e.a1},e=>{ae=e.T},e=>{ne=e.V,oe=e.T,re=e.S},e=>{se=e.V},e=>{le=e.M},e=>{ce=e.d}],execute:function(){var t=document.createElement("style");t.textContent='.label-bar[data-v-07ec7375]{width:0;margin:0;padding:10px 0;opacity:1;overflow:hidden}.label-bar-scale--hidden[data-v-07ec7375]{opacity:0}.label-bar-scale[data-v-07ec7375]{border:1px solid var(--evcc-gray);height:14px;background:none;display:flex;justify-content:center;align-items:center;white-space:nowrap;border-radius:0;transition:border-radius var(--evcc-transition-medium) linear}.label-bar--top .label-bar-scale[data-v-07ec7375]{border-top-left-radius:10px;border-top-right-radius:10px;border-bottom:none}.label-bar--bottom .label-bar-scale[data-v-07ec7375]{border-bottom-left-radius:10px;border-bottom-right-radius:10px;border-top:none}.label-bar-icon[data-v-07ec7375]{background-color:var(--evcc-background);transform:scale(1);color:var(--evcc-default-text);border-radius:0;border:.25rem solid var(--evcc-background);transition-property:background-color,transform,border-radius,border;transition-duration:0s;transition-delay:0s;transition-timing-function:linear}.label-bar--top .label-bar-icon[data-v-07ec7375]{margin-top:-12px}.label-bar--bottom .label-bar-icon[data-v-07ec7375]{margin-top:12px}.label-bar--hide-icon .label-bar-icon[data-v-07ec7375]{background-color:var(--evcc-default-text);transform:scale(.1666666);border-radius:100%;border-width:1.5rem;transition-delay:.4s,0s}.label-bar--hidden[data-v-07ec7375]{opacity:0}.site-progress[data-v-809fd36d]{--height: 2.5rem;height:var(--height);border-radius:10px;display:flex;overflow:hidden;margin-right:1.2rem}.label-scale-name[data-v-809fd36d]{color:var(--evcc-gray);flex-basis:1.2rem;flex-grow:0;flex-shrink:0;writing-mode:tb-rl;line-height:1;text-align:center}.site-progress-bar[data-v-809fd36d]{display:flex;justify-content:center;align-items:center;overflow:hidden;position:relative;width:0}.visualization--ready .site-progress-bar[data-v-809fd36d]{transition-property:width;transition-duration:var(--evcc-transition-medium);transition-timing-function:linear}.grid-import[data-v-809fd36d]{background-color:var(--evcc-grid);color:var(--bs-white)}html.dark .grid-import[data-v-809fd36d]{color:var(--bs-dark)}.self-pv[data-v-809fd36d]{background-color:var(--evcc-pv);color:var(--bs-dark)}.self-battery[data-v-809fd36d]{background-color:var(--evcc-battery);color:var(--bs-dark)}.pv-export[data-v-809fd36d]{background-color:var(--evcc-export);color:var(--bs-dark)}.unknown-power[data-v-809fd36d]{background-color:var(--evcc-gray);color:var(--bs-dark)}.power[data-v-809fd36d]{display:block;margin:0 .2rem;white-space:nowrap;overflow:hidden}.visualization--ready[data-v-809fd36d] .label-bar{transition-property:flex-basis,opacity;transition-duration:var(--evcc-transition-medium),var(--evcc-transition-fast);transition-timing-function:linear,ease}.visualization--ready[data-v-809fd36d] .label-bar-icon{transition-duration:var(--evcc-transition-very-fast),.5s}.battery-hold[data-v-809fd36d]{position:absolute;top:2.5rem;right:-.25rem;color:var(--evcc-gray);opacity:0;transition-property:opacity;transition-duration:var(--evcc-transition-medium);transition-timing-function:linear}.battery-hold--active[data-v-809fd36d]{opacity:1}.entry[data-v-71b7e520]{transition:color var(--evcc-transition-medium) linear}.power[data-v-71b7e520]{min-width:75px}.details[data-v-6d0fa24b]{height:0;opacity:0;transform:scale(.98);overflow:visible;transition-property:height,opacity,transform;transition-duration:0;transition-timing-function:cubic-bezier(.5,.5,.5,1.15)}.details--ready[data-v-6d0fa24b]{transition-duration:var(--evcc-transition-medium)}.energyflow--open .details[data-v-6d0fa24b]{opacity:1;transform:scale(1)}.color-grid[data-v-6d0fa24b]{color:var(--evcc-grid)}.color-export[data-v-6d0fa24b]{color:var(--evcc-export)}.legend-grid[data-v-6d0fa24b]{color:var(--evcc-grid)}.legend-export[data-v-6d0fa24b]{color:var(--evcc-export)}.legend-pv[data-v-6d0fa24b]{color:var(--evcc-pv)}.legend-self[data-v-6d0fa24b]{position:relative}.legend-battery[data-v-6d0fa24b]{position:absolute;top:0;left:0;color:var(--evcc-battery)}.legend-battery--mixed[data-v-6d0fa24b]{clip-path:polygon(100% 0,100% 100%,0 100%)}.mode-group[data-v-ef5515c5]{border:2px solid var(--evcc-default-text);border-radius:20px;padding:4px;min-width:255px}.btn[data-v-ef5515c5]{flex-basis:0;white-space:nowrap;border-radius:18px;padding:.1em .8em;color:var(--evcc-default-text);border:none}.btn[data-v-ef5515c5]:hover{color:var(--evcc-gray)}.btn[data-v-ef5515c5]:focus{outline:var(--bs-focus-ring-width) solid var(--bs-focus-ring-color);outline-width:var(--bs-focus-ring-width)}.btn.active[data-v-ef5515c5]{color:var(--evcc-background);background:var(--evcc-default-text)}.btn-group[data-v-ef5515c5]{border-radius:16px}.root[data-v-668231f2]{margin-bottom:1rem}.label[data-v-668231f2]{text-transform:uppercase;color:var(--evcc-gray);font-size:14px}.value[data-v-668231f2]{font-size:18px}.extraValue[data-v-668231f2]{color:var(--evcc-gray);font-size:14px}.vehicle-name[data-v-c114fed5]{text-decoration-color:var(--evcc-gray)}.options .vehicle-name[data-v-c114fed5]{text-decoration:underline}.spin[data-v-c114fed5]{animation:rotation-c114fed5 1s infinite cubic-bezier(.37,0,.63,1)}@keyframes rotation-c114fed5{0%{transform:rotate(0)}to{transform:rotate(-360deg)}}.vehicle-soc[data-v-00c44b1b]{--height: 32px;--thumb-overlap: 6px;--thumb-width: 12px;--label-height: 26px;position:relative;height:var(--height)}.progress[data-v-00c44b1b]{height:100%;font-size:1rem;background:var(--evcc-background)}.progress-bar.bg-muted[data-v-00c44b1b]{opacity:.5}.bg-light[data-v-00c44b1b]{color:var(--bs-gray-dark)}.slider[data-v-00c44b1b]{-webkit-appearance:none;position:absolute;top:calc(var(--thumb-overlap) * -1);height:calc(100% + 2 * var(--thumb-overlap));width:100%;background:transparent;pointer-events:none}.slider[data-v-00c44b1b]:focus{outline:none}.slider[data-v-00c44b1b]::-webkit-slider-runnable-track{position:relative;background:transparent;border:none;height:100%;cursor:auto;margin:0 -6px}.slider[data-v-00c44b1b]::-moz-range-track{background:transparent;border:none;height:100%;cursor:auto;margin:0 -6px}.slider[data-v-00c44b1b]::-webkit-slider-thumb{-webkit-appearance:none;position:relative;margin-left:var(--thumb-width) / 2;height:100%;width:var(--thumb-width);background-color:var(--evcc-gray);cursor:grab;border:none;opacity:1;border-radius:var(--thumb-overlap);box-shadow:0 0 6px var(--evcc-background);pointer-events:auto;transition:background-color var(--evcc-transition-fast) linear}.slider[data-v-00c44b1b]::-moz-range-thumb{position:relative;height:100%;width:var(--thumb-width);background-color:var(--evcc-gray);cursor:grab;border:none;opacity:1;border-radius:var(--thumb-overlap);box-shadow:0 0 6px var(--evcc-background);pointer-events:auto;transition:background-color var(--evcc-transition-fast) linear}.slider--active[data-v-00c44b1b]::-webkit-slider-thumb{background-color:var(--evcc-dark-green)}.slider--active[data-v-00c44b1b]::-moz-range-thumb{background-color:var(--evcc-dark-green)}.vehicle-limit-soc[data-v-00c44b1b]{position:absolute;top:0;bottom:0;width:20px;transform:translate(-8px);background-color:transparent;background-clip:padding-box;border-width:0 8px;border-style:solid;border-color:transparent;transition-property:background-color,left;transition-timing-function:linear;transition-duration:var(--evcc-transition-fast)}.vehicle-limit-soc--active[data-v-00c44b1b]{background-color:var(--evcc-box)}.plan-marker[data-v-00c44b1b]{position:absolute;top:0;transform:translate(-50%);color:var(--evcc-darker-green);transition-property:color,left,opacity;transition-timing-function:linear;cursor:pointer;transition-duration:var(--evcc-transition-fast)}.plan-marker[data-v-00c44b1b]:before{content:"";display:block;height:var(--height);border-width:0 10px;background-clip:padding-box;border-style:solid;border-color:transparent;background-color:var(--evcc-darker-green);transition:background-color var(--evcc-transition-fast) linear}.energy-limit-marker[data-v-00c44b1b]{position:absolute;top:-4px;bottom:-4px;transform:translate(-50%);width:4px;opacity:0;background-color:var(--evcc-gray);transition-property:opacity,left,background-color;transition-timing-function:linear;transition-duration:var(--evcc-transition-fast)}.energy-limit-marker--active[data-v-00c44b1b]{background-color:var(--evcc-dark-green)}.energy-limit-marker--visible[data-v-00c44b1b]{opacity:1}.charger-status[data-v-94e003cd]{padding-top:2px}.entry[data-v-94e003cd]{display:flex;align-items:center;flex-wrap:nowrap;text-wrap:nowrap;border:none;color:inherit;background:none;padding:0;gap:.5rem;transition:color var(--evcc-transition-medium) linear,opacity var(--evcc-transition-medium) linear}.phaseUp[data-v-94e003cd]{transform:rotate(90deg)}.phaseDown[data-v-94e003cd]{transform:rotate(-90deg)}.tabular[data-v-94e003cd]{font-variant-numeric:tabular-nums}.value[data-v-f1cf5626]{font-size:18px;font-weight:700}.extraValue[data-v-f1cf5626]{color:var(--evcc-gray);font-size:14px}.label[data-v-f1cf5626]{color:var(--evcc-gray);text-transform:uppercase}.plan-id[data-v-ad0df20e],.plan-id[data-v-34b92d47]{width:2.5rem;color:var(--evcc-gray)}.btn-outline-secondary[data-v-0d9f4be9]{margin-left:-.5rem}.root[data-v-0c41476e]:empty{display:none}h5[data-v-985c6fc7]{position:relative;display:flex;top:-25px;margin-bottom:-.5rem;padding:0 .5rem;justify-content:center}h5 .inner[data-v-985c6fc7]{padding:0 .5rem;background-color:var(--evcc-box);font-weight:400;color:var(--evcc-gray);text-transform:uppercase;text-align:center}.value[data-v-4fbfedfb]{line-height:1.2;border:none}.value-button[data-v-4fbfedfb]{font-size:18px;border:none;background:none}.root[data-v-4fbfedfb]{transition:opacity var(--evcc-transition-medium) linear}.value[data-v-4fbfedfb]:hover{color:var(--bs-color-white)}.extraValue[data-v-4fbfedfb]{color:var(--evcc-gray);font-size:14px;text-decoration:none}.targetTimeLabel[data-v-4fbfedfb]{text-decoration:underline}.value[data-v-182f339e]{font-size:18px}.extraValue[data-v-182f339e]{color:var(--evcc-gray);font-size:14px}.custom-select[data-v-182f339e]{left:0;top:0;bottom:0;right:0;cursor:pointer;position:absolute;opacity:0}.value[data-v-4632b117]{font-size:18px}.extraValue[data-v-4632b117]{color:var(--evcc-gray);font-size:14px}.custom-select[data-v-4632b117]{left:0;top:0;bottom:0;right:0;cursor:pointer;position:absolute;opacity:0}.details>div[data-v-ddceed21]{flex-grow:1;flex-basis:0}.phases[data-v-c08337bb]{width:73px}.phase[data-v-c08337bb]{background-color:var(--bs-gray-bright);height:4px;flex-grow:1;position:relative;border-radius:1px;overflow:hidden;flex-basis:100%;opacity:1;transition-property:flex-basis,margin,opacity;transition-duration:var(--evcc-transition-slow);transition-timing-function:ease-in}html.dark .phase[data-v-c08337bb]{background-color:var(--bs-gray-bright)}.phase-inactive[data-v-c08337bb]{flex-basis:0;margin-right:0!important;opacity:0}.target[data-v-c08337bb],.real[data-v-c08337bb]{position:absolute;left:0;top:0;bottom:0;transition-property:width,opacity;transition-duration:var(--evcc-transition-slow);transition-timing-function:ease-in;opacity:1}.target[data-v-c08337bb]{background-color:var(--evcc-green)}.real[data-v-c08337bb]{background-color:var(--evcc-dark-green)}.container[data-v-dccd6b68]{margin-left:calc(var(--bs-gutter-x) * -.5);margin-right:calc(var(--bs-gutter-x) * -.5)}.container h4[data-v-dccd6b68]:first-child{margin-top:0!important}.custom-select-inline[data-v-dccd6b68]{display:inline-block!important}.sessionInfo[data-v-4d673aeb] *{cursor:pointer;user-select:none;-webkit-user-select:none}.loadpoint[data-v-f4d67e94]{border-radius:2rem;color:var(--evcc-default-text);background:var(--evcc-box)}.details>div[data-v-f4d67e94]{flex-grow:1;flex-basis:0}.details>div[data-v-f4d67e94]:nth-child(2){text-align:center}.details>div[data-v-f4d67e94]:nth-child(3){text-align:right}.opacity-transiton[data-v-f4d67e94]{transition:opacity var(--evcc-transition-slow) ease-in}.divider[data-v-f4d67e94]{border:none;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:var(--evcc-gray);background:none;opacity:.5;margin:0 -1rem}@media (min-width: 576px){.divider[data-v-f4d67e94]{margin:0 -1.5rem}}.container--loadpoint[data-v-b91b635c]{min-height:300px}@media (max-width: 991.98px){.carousel[data-v-b91b635c]{scroll-snap-type:x mandatory;overflow-x:scroll;display:flex;flex-wrap:nowrap!important;scrollbar-width:none;-ms-overflow-style:none}.carousel[data-v-b91b635c]::-webkit-scrollbar{display:none}.carousel[data-v-b91b635c]>*{scroll-snap-align:center;min-width:100%}.indicator[data-v-b91b635c]{width:32px;height:32px;opacity:.3;transition:opacity var(--evcc-transition-fast) ease-in}.indicator--selected[data-v-b91b635c]{opacity:1}.indicator-icon[data-v-b91b635c]{width:18px}.loadpoint[data-v-b91b635c]{opacity:1;transform:scale(1);transition-property:opacity,transform;transition-duration:var(--evcc-transition-fast);transition-timing-function:ease-in}.loadpoint-unselected[data-v-b91b635c]{transform:scale(.95);opacity:.5}}@media (min-width: 576px) and (max-width: 991.98px){.container--loadpoint[data-v-b91b635c]{max-width:none}.carousel[data-v-b91b635c]>*:first-child{margin-left:calc((100vw - var(--slide-width)) / 2)}.carousel[data-v-b91b635c]>*:last-child{margin-right:calc((100vw - var(--slide-width)) / 2)}.carousel[data-v-b91b635c]:after{content:"";padding-right:.02px}.carousel[data-v-b91b635c]>*{min-width:var(--slide-width)}}@media (min-width: 576px) and (max-width: 767.98px){.carousel[data-v-b91b635c]{--slide-width: 540px}}@media (min-width: 768px) and (max-width: 991.98px){.carousel[data-v-b91b635c]{--slide-width: 720px}}@media (min-width: 992px){.carousel[data-v-b91b635c]{display:grid!important;grid-gap:2rem;grid-template-columns:repeat(auto-fit,minmax(450px,1fr))}}@media (min-width: 992px) and (min-height: 1450px){.carousel--2[data-v-b91b635c]{grid-gap:4rem;grid-template-columns:1fr}}@media (min-width: 992px) and (min-height: 1900px){.carousel--3[data-v-b91b635c]{grid-gap:4rem;grid-template-columns:1fr}}.letter[data-v-239c7b9a]{fill:#1c2445}html.dark .letter[data-v-239c7b9a]{fill:var(--bs-white)}.icon[data-v-8faa8aea]{color:var(--evcc-dark-green)}.logo[data-v-8faa8aea]{height:1.1rem;margin-bottom:.2rem}.tile-icon[data-v-60d56bd3]{width:40px;flex:0 0 auto}@media (min-width: 992px){.tile-icon[data-v-60d56bd3]{width:70px}}.unit[data-v-60d56bd3]{font-size:var(--bs-body-font-size)}.animated-icon[data-v-4d4f9d3a]{width:3.5rem!important;height:3.5rem!important}.fade-enter-active[data-v-4d4f9d3a],.fade-leave-active[data-v-4d4f9d3a]{transition:opacity .5s ease}.fade-enter-from[data-v-4d4f9d3a],.fade-leave-to[data-v-4d4f9d3a]{opacity:0}.site[data-v-e1fddd6b]{min-height:100vh;min-height:100dvh}.content-area[data-v-e1fddd6b]{flex-grow:1;z-index:1}.configure-button[data-v-e1fddd6b]:not(:active):not(:hover),.welcome-icons[data-v-e1fddd6b]{animation:colorTransition-e1fddd6b 10s infinite alternate;animation-timing-function:ease-in-out}@keyframes colorTransition-e1fddd6b{0%{color:var(--evcc-accent1);border-color:var(--evcc-accent1)}50%{color:var(--evcc-accent2);border-color:var(--evcc-accent2)}to{color:var(--evcc-accent3);border-color:var(--evcc-accent3)}}.welcome[data-v-e1fddd6b]{background-color:var(--evcc-box);padding:4rem;border-radius:2rem}\n/*$vite$:1*/',document.head.appendChild(t);class de extends HTMLElement{connectedCallback(){this.setAttribute("data-shopicon",!0),this.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path d="M0 0h48v48H0z" fill="none"/><path d="M6.586 30.586l2.828 2.828L24 18.828l14.586 14.586 2.828-2.828L24 13.172z"/></svg>'}}window.customElements.define("shopicon-regular-arrowup",de);class he extends HTMLElement{connectedCallback(){this.setAttribute("data-shopicon",!0),this.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path d="M0 0h48v48H0z" fill="none"/><path d="M44.229 36.968L25.772 5.001a2 2 0 00-3.464 0L3.852 36.968a2 2 0 001.732 3h36.912a1.999 1.999 0 001.733-3zm-35.181-1L24.04 10.001l14.992 25.967H9.048z"/><path d="M21.973 16.01l4-.016.05 13-4 .015zM24.023 31.124a1.755 1.755 0 100 3.51 1.755 1.755 0 000-3.51z"/></svg>'}}window.customElements.define("shopicon-regular-exclamationtriangle",he);const ue={href:"#","data-bs-toggle":"modal","data-bs-target":"#notificationModal",class:"btn btn-sm btn-link text-decoration-none link-light border-0 text-nowrap","data-testid":"notification-icon"},me={id:"notificationModal",class:"modal fade text-dark",tabindex:"-1",role:"dialog","aria-hidden":"true","data-bs-backdrop":"true"},pe={class:"modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable",role:"document"},ge={class:"modal-content"},fe={class:"modal-header"},ve={class:"modal-title"},be={class:"modal-body"},ye=["title"],we={class:"d-flex align-items-baseline"},Se={class:"flex-grow-1 px-2 py-1 text-break"},Pe={key:0,class:"badge rounded-pill bg-secondary"},xe={class:"modal-footer d-flex justify-content-between gap-3"},Ce=i({name:"Notifications",mixins:[a],props:{notifications:Array,loadpointTitles:Array},computed:{iconVisible:function(){return this.notifications.length>0},iconClass:function(){return this.notifications.find((e=>"error"===e.level))?"text-danger":"text-warning"}},created:function(){this.interval=setInterval((()=>{this.$forceUpdate()}),1e4)},unmounted:function(){clearTimeout(this.interval)},methods:{message({message:e,lp:t}){const i=Array.isArray(e)?e:[e];return t&&(i[0]=`${this.loadpointTitles[t-1]||t}: ${i[0]}`),i},clear:function(){window.app?.clear()}}},[["render",function(e,t,i,a,b,y){const w=p("router-link");return g(),n("div",null,[o(r("button",ue,[r("shopicon-regular-exclamationtriangle",{class:l(y.iconClass)},null,2)],512),[[s,y.iconVisible]]),r("div",me,[r("div",pe,[r("div",ge,[r("div",fe,[r("h5",ve,c(e.$t("notifications.modalTitle")),1),t[1]||(t[1]=r("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),r("div",be,[(g(!0),n(d,null,h(i.notifications,((t,i)=>(g(),n("div",{key:i},[r("small",{class:"d-flex justify-content-end mt-3",title:e.fmtAbsoluteDate(t.time)},c(e.fmtTimeAgo(t.time-new Date)),9,ye),r("p",we,[r("shopicon-regular-exclamationtriangle",{class:l([{"text-danger":"error"===t.level,"text-warning":"warn"===t.level},"flex-grow-0 flex-shrink-0 d-block"])},null,2),r("span",Se,[(g(!0),n(d,null,h(y.message(t),((e,t)=>(g(),n("span",{key:t,class:"d-block"},c(e),1)))),128))]),t.count>1?(g(),n("span",Pe,c(t.count),1)):f("",!0)])])))),128))]),r("div",xe,[u(w,{to:"/log",class:"btn btn-outline-secondary"},{default:m((()=>[v(c(e.$t("notifications.logs")),1)])),_:1}),r("button",{type:"button","data-bs-dismiss":"modal","aria-label":"Close",class:"btn btn-secondary",onClick:t[0]||(t[0]=(...e)=>y.clear&&y.clear(...e))},c(e.$t("notifications.dismissAll")),1)])])])])])}]]);class Te extends HTMLElement{connectedCallback(){this.setAttribute("data-shopicon",!0),this.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><style></style><g id="Your_Icons"><path d="M0 0h48v48H0V0z" fill="none"/><path d="M7.981 40.019h32.038V7.981H7.981v32.038z" id="Shopicon_00000005233862153072290020000010038958663075050425_"/></g></svg>'}}window.customElements.define("shopicon-filled-square",Te);const ke={name:"BatteryIcon",mixins:[b],props:{soc:{type:Number,default:0},hold:{type:Boolean,default:!1},gridCharge:{type:Boolean,default:!1}},computed:{socRect(){const e=(this.soc/(100/22)).toFixed(2);return`M30 38H18v-${e}h12v${e}z`}}},Ie={key:0,fill:"currentColor",d:"M21.956,26.739l0,8.261l4.088,0l0,-8.261l3.066,3.033l2.89,-2.859l-8,-7.913l-8,7.913l2.89,2.859l3.066,-3.033Z"},$e={key:1,fill:"currentColor",d:"M21.943,22.053l0,9.943l-3,0l0,-9.943l3,-0Zm7,-0l0,9.943l-3,-0l0,-9.943l3,-0Z"},Le=["d"],Ae=i(ke,[["render",function(e,t,i,a,o,s){return g(),n("svg",{style:y(e.svgStyle),viewBox:"0 0 48 48"},[t[0]||(t[0]=r("path",{d:"M0-.004h48v48H0v-48z",fill:"none"},null,-1)),t[1]||(t[1]=r("path",{fill:"currentColor",d:"M35 9.996h-3v-4a2 2 0 00-2-2H18a2 2 0 00-2 2v4h-3a2 2 0 00-2 2v30a2 2 0 002 2h22a2 2 0 002-2v-30a2 2 0 00-2-2zm-15-2h8v2h-8v-2zm13 32H15v-26h18v26z"},null,-1)),i.gridCharge?(g(),n("path",Ie)):i.hold?(g(),n("path",$e)):(g(),n("path",{key:2,fill:"currentColor",d:s.socRect},null,8,Le))],4)}]]),Ne={name:"LabelBar",props:{value:{type:Number,default:0},hideIcon:{type:Boolean},top:{type:Boolean},bottom:{type:Boolean},first:{type:Boolean},last:{type:Boolean}}},Be={class:"label-bar-scale"},Ve={class:"label-bar-icon"},Me=i(Ne,[["render",function(e,t,i,a,o,s){return g(),n("div",{class:l(["label-bar",{"label-bar--hide-icon":i.hideIcon,"label-bar--hidden":!i.value,"label-bar--top":i.top,"label-bar--bottom":i.bottom,"label-bar--first":i.first,"label-bar--last":i.last}])},[r("div",Be,[r("div",Ve,[w(e.$slots,"default",{},void 0,!0)])])],2)}],["__scopeId","data-v-07ec7375"]]);var Ee=function(){return Ee=Object.assign||function(e){for(var t,i=1,a=arguments.length;i<a;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},Ee.apply(this,arguments)},De=function(){function e(e,t,i){var a=this;this.endVal=t,this.options=i,this.version="2.8.0",this.defaults={startVal:0,decimalPlaces:0,duration:2,useEasing:!0,useGrouping:!0,useIndianSeparators:!1,smartEasingThreshold:999,smartEasingAmount:333,separator:",",decimal:".",prefix:"",suffix:"",enableScrollSpy:!1,scrollSpyDelay:200,scrollSpyOnce:!1},this.finalEndVal=null,this.useEasing=!0,this.countDown=!1,this.error="",this.startVal=0,this.paused=!0,this.once=!1,this.count=function(e){a.startTime||(a.startTime=e);var t=e-a.startTime;a.remaining=a.duration-t,a.useEasing?a.countDown?a.frameVal=a.startVal-a.easingFn(t,0,a.startVal-a.endVal,a.duration):a.frameVal=a.easingFn(t,a.startVal,a.endVal-a.startVal,a.duration):a.frameVal=a.startVal+(a.endVal-a.startVal)*(t/a.duration);var i=a.countDown?a.frameVal<a.endVal:a.frameVal>a.endVal;a.frameVal=i?a.endVal:a.frameVal,a.frameVal=Number(a.frameVal.toFixed(a.options.decimalPlaces)),a.printValue(a.frameVal),t<a.duration?a.rAF=requestAnimationFrame(a.count):null!==a.finalEndVal?a.update(a.finalEndVal):a.options.onCompleteCallback&&a.options.onCompleteCallback()},this.formatNumber=function(e){var t,i,n,o,r=e<0?"-":"";t=Math.abs(e).toFixed(a.options.decimalPlaces);var s=(t+="").split(".");if(i=s[0],n=s.length>1?a.options.decimal+s[1]:"",a.options.useGrouping){o="";for(var l=3,c=0,d=0,h=i.length;d<h;++d)a.options.useIndianSeparators&&4===d&&(l=2,c=1),0!==d&&c%l==0&&(o=a.options.separator+o),c++,o=i[h-d-1]+o;i=o}return a.options.numerals&&a.options.numerals.length&&(i=i.replace(/[0-9]/g,(function(e){return a.options.numerals[+e]})),n=n.replace(/[0-9]/g,(function(e){return a.options.numerals[+e]}))),r+a.options.prefix+i+n+a.options.suffix},this.easeOutExpo=function(e,t,i,a){return i*(1-Math.pow(2,-10*e/a))*1024/1023+t},this.options=Ee(Ee({},this.defaults),i),this.formattingFn=this.options.formattingFn?this.options.formattingFn:this.formatNumber,this.easingFn=this.options.easingFn?this.options.easingFn:this.easeOutExpo,this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.endVal=this.validateValue(t),this.options.decimalPlaces=Math.max(this.options.decimalPlaces),this.resetDuration(),this.options.separator=String(this.options.separator),this.useEasing=this.options.useEasing,""===this.options.separator&&(this.options.useGrouping=!1),this.el="string"==typeof e?document.getElementById(e):e,this.el?this.printValue(this.startVal):this.error="[CountUp] target is null or undefined","undefined"!=typeof window&&this.options.enableScrollSpy&&(this.error?console.error(this.error,e):(window.onScrollFns=window.onScrollFns||[],window.onScrollFns.push((function(){return a.handleScroll(a)})),window.onscroll=function(){window.onScrollFns.forEach((function(e){return e()}))},this.handleScroll(this)))}return e.prototype.handleScroll=function(e){if(e&&window&&!e.once){var t=window.innerHeight+window.scrollY,i=e.el.getBoundingClientRect(),a=i.top+window.pageYOffset,n=i.top+i.height+window.pageYOffset;n<t&&n>window.scrollY&&e.paused?(e.paused=!1,setTimeout((function(){return e.start()}),e.options.scrollSpyDelay),e.options.scrollSpyOnce&&(e.once=!0)):(window.scrollY>n||a>t)&&!e.paused&&e.reset()}},e.prototype.determineDirectionAndSmartEasing=function(){var e=this.finalEndVal?this.finalEndVal:this.endVal;this.countDown=this.startVal>e;var t=e-this.startVal;if(Math.abs(t)>this.options.smartEasingThreshold&&this.options.useEasing){this.finalEndVal=e;var i=this.countDown?1:-1;this.endVal=e+i*this.options.smartEasingAmount,this.duration=this.duration/2}else this.endVal=e,this.finalEndVal=null;null!==this.finalEndVal?this.useEasing=!1:this.useEasing=this.options.useEasing},e.prototype.start=function(e){this.error||(this.options.onStartCallback&&this.options.onStartCallback(),e&&(this.options.onCompleteCallback=e),this.duration>0?(this.determineDirectionAndSmartEasing(),this.paused=!1,this.rAF=requestAnimationFrame(this.count)):this.printValue(this.endVal))},e.prototype.pauseResume=function(){this.paused?(this.startTime=null,this.duration=this.remaining,this.startVal=this.frameVal,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count)):cancelAnimationFrame(this.rAF),this.paused=!this.paused},e.prototype.reset=function(){cancelAnimationFrame(this.rAF),this.paused=!0,this.resetDuration(),this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.printValue(this.startVal)},e.prototype.update=function(e){cancelAnimationFrame(this.rAF),this.startTime=null,this.endVal=this.validateValue(e),this.endVal!==this.frameVal&&(this.startVal=this.frameVal,null==this.finalEndVal&&this.resetDuration(),this.finalEndVal=null,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count))},e.prototype.printValue=function(e){var t;if(this.el){var i=this.formattingFn(e);(null===(t=this.options.plugin)||void 0===t?void 0:t.render)?this.options.plugin.render(this.el,i):"INPUT"===this.el.tagName?this.el.value=i:"text"===this.el.tagName||"tspan"===this.el.tagName?this.el.textContent=i:this.el.innerHTML=i}},e.prototype.ensureNumber=function(e){return"number"==typeof e&&!isNaN(e)},e.prototype.validateValue=function(e){var t=Number(e);return this.ensureNumber(t)?t:(this.error="[CountUp] invalid start or end value: ".concat(e),null)},e.prototype.resetDuration=function(){this.startTime=null,this.duration=1e3*Number(this.options.duration),this.remaining=this.duration},e}();const Re=i({name:"AnimatedNumber",props:{to:{type:Number,default:0},format:{type:Function,required:!0},duration:{type:Number,default:.5}},data:()=>({instance:null}),watch:{to(e){this.instance?.update(e)}},mounted(){this.instance||(this.instance=new De(this.$el,this.to,{startVal:this.to,formattingFn:this.format,duration:this.duration,decimalPlaces:3}),this.instance.error&&console.error(this.instance.error))},unmounted(){this.instance=null},methods:{forceUpdate(){this.instance?.reset(),this.instance?.update(this.to)}}},[["render",function(e,t,i,a,o,r){return g(),n("span")}]]),Ue={name:"Visualization",components:{BatteryIcon:Ae,LabelBar:Me,AnimatedNumber:Re,VehicleIcon:ne,QuestionIcon:i({name:"Question",mixins:[b]},[["render",function(e,t,i,a,o,s){return g(),n("svg",{style:y(e.svgStyle),viewBox:"0 0 32 32"},t[0]||(t[0]=[r("path",{fill:"currentColor",d:"M16,24c0.467,0 0.861,-0.161 1.184,-0.484c0.323,-0.323 0.484,-0.717 0.483,-1.183c-0.001,-0.465 -0.163,-0.86 -0.484,-1.184c-0.322,-0.323 -0.716,-0.484 -1.183,-0.482c-0.467,0.001 -0.861,0.163 -1.184,0.484c-0.323,0.321 -0.484,0.715 -0.483,1.182c0.001,0.468 0.163,0.863 0.484,1.184c0.322,0.322 0.716,0.483 1.183,0.483m0,-13.733c0.578,-0 1.084,0.177 1.517,0.533c0.434,0.356 0.651,0.811 0.65,1.367c-0,0.511 -0.162,0.966 -0.484,1.366c-0.323,0.4 -0.673,0.767 -1.05,1.1c-0.577,0.511 -1.016,0.995 -1.316,1.451c-0.299,0.456 -0.472,1.006 -0.517,1.649c-0.022,0.311 0.089,0.584 0.333,0.818c0.245,0.233 0.534,0.35 0.867,0.349c0.311,0 0.595,-0.111 0.851,-0.333c0.256,-0.223 0.405,-0.5 0.449,-0.834c0.044,-0.377 0.178,-0.711 0.4,-1c0.222,-0.289 0.544,-0.644 0.967,-1.066c0.777,-0.778 1.294,-1.406 1.55,-1.883c0.256,-0.477 0.384,-1.05 0.383,-1.717c0,-1.2 -0.433,-2.178 -1.3,-2.934c-0.867,-0.755 -1.967,-1.133 -3.3,-1.133c-0.911,0 -1.728,0.206 -2.449,0.617c-0.722,0.412 -1.272,0.995 -1.651,1.75c-0.133,0.266 -0.139,0.539 -0.016,0.817c0.123,0.278 0.328,0.472 0.616,0.583c0.288,0.11 0.583,0.11 0.884,-0c0.301,-0.111 0.54,-0.288 0.716,-0.534c0.244,-0.311 0.528,-0.549 0.851,-0.716c0.322,-0.166 0.672,-0.249 1.049,-0.25"},null,-1)]),4)}]])},mixins:[a],props:{gridImport:{type:Number,default:0},selfPv:{type:Number,default:0},selfBattery:{type:Number,default:0},pvExport:{type:Number,default:0},loadpoints:{type:Array,default:()=>[]},batteryCharge:{type:Number,default:0},batteryDischarge:{type:Number,default:0},batteryHold:{type:Boolean,default:!1},batteryGridCharge:{type:Boolean,default:!1},pvProduction:{type:Number,default:0},homePower:{type:Number,default:0},batterySoc:{type:Number,default:0},powerUnit:{type:String,default:S.KW},inPower:{type:Number,default:0},outPower:{type:Number,default:0}},data:function(){return{width:0}},computed:{gridExport:function(){return this.applyThreshold(this.pvExport)},totalRaw:function(){return this.gridImport+this.selfPv+this.selfBattery+this.pvExport},gridImportAdjusted:function(){return this.applyThreshold(this.gridImport)},selfPvAdjusted:function(){return this.applyThreshold(this.selfPv)},selfBatteryAdjusted:function(){return this.applyThreshold(this.selfBattery)},pvExportAdjusted:function(){return this.applyThreshold(this.pvExport)},totalAdjusted:function(){return this.gridImportAdjusted+this.selfPvAdjusted+this.selfBatteryAdjusted+this.pvExportAdjusted},unknownImport:function(){return this.applyThreshold(Math.max(0,this.outPower-this.inPower),10)},unknownOutput:function(){return this.applyThreshold(Math.max(0,this.inPower-this.outPower),10)},unknownPower:function(){if(this.unknownImport||this.unknownOutput){const e=Math.max(this.inPower,this.outPower);return Math.abs(e-this.totalAdjusted)}return 0},visualizationReady:function(){return this.totalAdjusted>0&&this.width>0}},mounted:function(){this.$nextTick((function(){window.addEventListener("resize",this.updateElementWidth),this.updateElementWidth()}))},beforeUnmount(){window.removeEventListener("resize",this.updateElementWidth)},methods:{widthTotal:function(e){return 0===this.totalAdjusted||0===e?"0":100/this.totalAdjusted*e+"%"},fmtBarValue:function(e){if(!this.enoughSpaceForValue(e))return"";const t=this.enoughSpaceForUnit(e);return this.fmtW(e,this.powerUnit,t)},powerLabelAvailableSpace(e){if(0===this.totalAdjusted)return 0;const t=100/this.totalAdjusted*e;return this.width/100*t},enoughSpaceForValue(e){return this.powerLabelAvailableSpace(e)>40},enoughSpaceForUnit(e){return this.powerLabelAvailableSpace(e)>60},hideLabelIcon(e,t=32){if(0===this.totalAdjusted)return!0;const i=100/this.totalAdjusted*e;return this.width/100*i<t},applyThreshold(e,t=2){return 100/this.totalRaw*e<t?0:e},updateElementWidth(){this.width=this.$refs.site_progress.getBoundingClientRect().width},labelBarProps(e,t,i){const a=void 0===i?this[t]:i;return{value:a,hideIcon:this.hideLabelIcon(a,40),style:{"flex-basis":this.widthTotal(a)},[e]:!0}}}},qe={class:"label-scale d-flex"},Oe={class:"d-flex justify-content-start flex-grow-1"},Fe={ref:"site_progress",class:"site-progress"},We={key:0,class:"site-progress-bar w-100 grid-import"},_e={class:"label-scale d-flex"},ze={class:"d-flex justify-content-start flex-grow-1"},je=i(Ue,[["render",function(e,t,i,a,o,s){const v=p("LabelBar"),b=p("BatteryIcon"),w=p("QuestionIcon"),S=p("AnimatedNumber"),k=p("VehicleIcon");return g(),n("div",{"data-testid":"visualization",class:l(["visualization",{"visualization--ready":s.visualizationReady}])},[r("div",qe,[r("div",Oe,[u(v,P(x(s.labelBarProps("top","pvProduction"))),{default:m((()=>t[0]||(t[0]=[r("shopicon-regular-sun",null,null,-1)]))),_:1},16),u(v,P(x(s.labelBarProps("top","batteryDischarge"))),{default:m((()=>[u(b,{soc:i.batterySoc},null,8,["soc"])])),_:1},16),u(v,P(x(s.labelBarProps("top","gridImport"))),{default:m((()=>t[1]||(t[1]=[r("shopicon-regular-powersupply",null,null,-1)]))),_:1},16),u(v,P(x(s.labelBarProps("top","unknownImport"))),{default:m((()=>[u(w)])),_:1},16)]),t[2]||(t[2]=r("div",{class:"label-scale-name"},"In",-1))]),r("div",Fe,[r("div",{class:"site-progress-bar self-pv",style:y({width:s.widthTotal(s.selfPvAdjusted)})},[i.selfPv&&s.visualizationReady?(g(),C(S,{key:0,class:"power",to:i.selfPv,format:s.fmtBarValue},null,8,["to","format"])):f("",!0)],4),r("div",{class:"site-progress-bar self-battery",style:y({width:s.widthTotal(s.selfBatteryAdjusted)})},[i.selfBattery&&s.visualizationReady?(g(),C(S,{key:0,class:"power",to:i.selfBattery,format:s.fmtBarValue},null,8,["to","format"])):f("",!0)],4),r("div",{class:"site-progress-bar grid-import",style:y({width:s.widthTotal(s.gridImportAdjusted)})},[i.gridImport&&s.visualizationReady?(g(),C(S,{key:0,class:"power",to:i.gridImport,format:s.fmtBarValue},null,8,["to","format"])):f("",!0)],4),r("div",{class:"site-progress-bar pv-export",style:y({width:s.widthTotal(s.pvExportAdjusted)})},[i.pvExport&&s.visualizationReady?(g(),C(S,{key:0,class:"power",to:i.pvExport,format:s.fmtBarValue},null,8,["to","format"])):f("",!0)],4),r("div",{class:"site-progress-bar unknown-power",style:y({width:s.widthTotal(s.unknownPower)})},[s.unknownPower&&s.visualizationReady?(g(),C(S,{key:0,class:"power",to:s.unknownPower,format:s.fmtBarValue},null,8,["to","format"])):f("",!0)],4),s.totalAdjusted<=0?(g(),n("div",We,[r("span",null,c(e.fmtW(0,e.POWER_UNIT.AUTO,!0)),1)])):f("",!0)],512),r("div",_e,[r("div",ze,[u(v,P(x(s.labelBarProps("bottom","homePower"))),{default:m((()=>t[3]||(t[3]=[r("shopicon-regular-home",null,null,-1)]))),_:1},16),(g(!0),n(d,null,h(i.loadpoints,((e,t)=>(g(),C(v,T({key:t,ref_for:!0},s.labelBarProps("bottom","loadpoints",e.power)),{default:m((()=>[u(k,{names:[e.icon]},null,8,["names"])])),_:2},1040)))),128)),u(v,P(x(s.labelBarProps("bottom","batteryCharge"))),{default:m((()=>[u(b,{soc:i.batterySoc,gridCharge:i.batteryGridCharge},null,8,["soc","gridCharge"])])),_:1},16),u(v,P(x(s.labelBarProps("bottom","gridExport"))),{default:m((()=>t[4]||(t[4]=[r("shopicon-regular-powersupply",null,null,-1)]))),_:1},16),u(v,P(x(s.labelBarProps("bottom","unknownOutput"))),{default:m((()=>[u(w)])),_:1},16)]),t[5]||(t[5]=r("div",{class:"label-scale-name"},"Out",-1))]),u(b,{hold:"",class:l(["battery-hold",{"battery-hold--active":i.batteryHold}])},null,8,["class"])],2)}],["__scopeId","data-v-809fd36d"]]),He={name:"EnergyflowEntry",components:{BatteryIcon:Ae,AnimatedNumber:Re,VehicleIcon:ne,ForecastIcon:i({name:"Forecast",mixins:[b]},[["render",function(e,t,i,a,o,s){return g(),n("svg",{style:y(e.svgStyle),viewBox:"0 0 48 48"},t[0]||(t[0]=[r("path",{fill:"currentColor",d:"M5.78,31c1.791,-3.381 3.675,-6.042 5.643,-9.059c1.422,-2.18 2.889,-4.118 4.384,-5.67l2.881,2.774c-1.338,1.39 -2.642,3.13 -3.914,5.081c-1.523,2.335 -3,4.445 -4.418,6.874l-4.576,-0Zm32.023,0c-0.661,-1.3 -1.346,-2.567 -2.051,-3.781l3.458,-2.011c1.067,1.836 2.089,3.787 3.055,5.792l-4.462,0Zm-16.172,-14.32l-1.915,-3.512c1.409,-0.768 2.842,-1.169 4.286,-1.168c1.35,0.001 2.702,0.328 4.04,0.954l-1.696,3.623c-0.78,-0.365 -1.562,-0.576 -2.348,-0.577c-0.8,-0.001 -1.586,0.254 -2.367,0.68Zm7.78,2.072l2.729,-2.924c1.591,1.484 3.149,3.369 4.639,5.53l-3.292,2.271c-1.313,-1.902 -2.675,-3.57 -4.076,-4.877Z"},null,-1)]),4)}]])},mixins:[a],props:{name:{type:String},icon:{type:String},iconProps:{type:Object,default:()=>({})},power:{type:Number},powerTooltip:{type:Array},powerUnit:{type:String},details:{type:Number},detailsIcon:{type:String},detailsFmt:{type:Function},detailsTooltip:{type:Array},detailsClickable:{type:Boolean},detailsInactive:{type:Boolean}},emits:["details-clicked"],data:()=>({powerTooltipInstance:null,detailsTooltipInstance:null}),computed:{active:function(){return this.power>10},isBattery:function(){return"battery"===this.icon},isVehicle:function(){return"vehicle"===this.icon}},watch:{powerTooltip(e,t){JSON.stringify(e)!==JSON.stringify(t)&&this.updatePowerTooltip()},detailsTooltip(e,t){JSON.stringify(e)!==JSON.stringify(t)&&this.updateDetailsTooltip()},powerInKw(e,t){e!==t&&this.$refs.powerNumber.forceUpdate()}},mounted:function(){this.updatePowerTooltip(),this.updateDetailsTooltip()},methods:{kw:function(e){return this.fmtW(e,this.powerUnit)},updatePowerTooltip(){this.powerTooltipInstance=this.updateTooltip(this.powerTooltipInstance,this.powerTooltip,this.$refs.power)},updateDetailsTooltip(){this.detailsTooltipInstance=this.updateTooltip(this.detailsTooltipInstance,this.detailsTooltip,this.$refs.details)},updateTooltip:function(e,t,i){if(!Array.isArray(t)||!t.length)return void(e&&e.dispose());let a=e;a||(a=new oe(i,{html:!0,title:" "}));const n=`<div class="text-end">${t.join("<br/>")}</div>`;return a.setContent({".tooltip-inner":n}),a},powerClicked:function(e){this.powerTooltip&&e.stopPropagation()},detailsClicked:function(e){(this.detailsClickable||this.detailsTooltip)&&e.stopPropagation(),this.detailsClickable&&this.$emit("details-clicked"),setTimeout((()=>this.detailsTooltipInstance?.hide()),10)}}},Ge={class:"d-flex justify-content-between"},Ke={class:"d-flex flex-nowrap"},Ze={class:"d-block text-nowrap flex-grow-1 ms-3 text-truncate"},Ye={class:"text-end text-nowrap ps-1 fw-bold d-flex"},Qe=["tabindex"],Je={key:0,class:"ms-4 ps-3"},Xe={name:"Energyflow",components:{Visualization:je,EnergyflowEntry:i(He,[["render",function(e,t,i,a,o,s){const d=p("BatteryIcon"),h=p("VehicleIcon"),m=p("ForecastIcon"),v=p("AnimatedNumber");return g(),n("div",{class:l(["mb-2 entry",{"evcc-gray":!s.active}])},[r("div",Ge,[r("span",Ke,[s.isBattery?(g(),C(d,P(T({key:0},i.iconProps)),null,16)):s.isVehicle?(g(),C(h,P(T({key:1},i.iconProps)),null,16)):(g(),C(k(`shopicon-regular-${i.icon}`),{key:2}))]),r("div",Ze,c(i.name),1),r("span",Ye,[r("div",{ref:"details",class:l(["fw-normal",{"text-decoration-underline":i.detailsClickable,"evcc-gray":i.detailsInactive}]),"data-testid":"energyflow-entry-details","data-bs-toggle":"tooltip",tabindex:i.detailsClickable?0:void 0,onClick:t[0]||(t[0]=(...e)=>s.detailsClicked&&s.detailsClicked(...e))},["forecast"===i.detailsIcon?(g(),C(m,{key:0,class:"ms-2 me-1 d-inline-block"})):f("",!0),isNaN(i.details)?f("",!0):(g(),C(v,{key:1,to:i.details,format:i.detailsFmt},null,8,["to","format"]))],10,Qe),r("div",{ref:"power",class:"power","data-bs-toggle":"tooltip",onClick:t[1]||(t[1]=(...e)=>s.powerClicked&&s.powerClicked(...e))},[u(v,{ref:"powerNumber",to:i.power,format:s.kw},null,8,["to","format"])],512)])]),e.$slots.subline?(g(),n("div",Je,[w(e.$slots,"subline",{},void 0,!0)])):f("",!0)],2)}],["__scopeId","data-v-71b7e520"]]),AnimatedNumber:Re},mixins:[a,I],props:{gridConfigured:Boolean,gridPower:{type:Number,default:0},homePower:{type:Number,default:0},pvConfigured:Boolean,pv:{type:Array},pvPower:{type:Number,default:0},loadpointsCompact:{type:Array,default:()=>[]},batteryConfigured:{type:Boolean},battery:{type:Array},batteryPower:{type:Number,default:0},batterySoc:{type:Number,default:0},batteryDischargeControl:{type:Boolean},batteryGridChargeLimit:{type:Number},batteryGridChargeActive:{type:Boolean},batteryMode:{type:String},tariffGrid:{type:Number},tariffFeedIn:{type:Number},tariffCo2:{type:Number},tariffPriceHome:{type:Number},tariffCo2Home:{type:Number},tariffPriceLoadpoints:{type:Number},tariffCo2Loadpoints:{type:Number},smartCostType:{type:String},currency:{type:String},prioritySoc:{type:Number},bufferSoc:{type:Number},bufferStartSoc:{type:Number},forecast:{type:Object,default:()=>({})}},data:()=>({detailsOpen:!1,detailsCompleteHeight:null,ready:!1}),computed:{gridImport:function(){return Math.max(0,this.gridPower)},pvProduction:function(){return Math.abs(this.pvPower)},batteryDischarge:function(){return this.dischargePower(this.batteryPower)},batteryCharge:function(){return this.chargePower(this.batteryPower)},batteryChargeLabel:function(){return this.$t("main.energyflow.battery"+(this.batteryHold?"Hold":"Charge"))},batteryDischargeLabel:function(){return this.$t("main.energyflow.battery"+(this.batteryHold?"Hold":"Discharge"))},batteryHold:function(){return"hold"===this.batteryMode},consumption:function(){return this.homePower+this.batteryCharge+this.loadpointsPower},selfPv:function(){return Math.min(this.pvProduction,this.consumption)},selfBattery:function(){return Math.min(this.batteryDischarge,this.consumption-this.selfPv)},activeLoadpoints:function(){return this.loadpointsCompact.filter((e=>e.charging))},activeLoadpointsCount:function(){return this.activeLoadpoints.length},vehicleIcons:function(){return this.activeLoadpointsCount>0?this.activeLoadpoints.map((e=>e.icon)):["car"]},loadpointsPower:function(){return this.loadpointsCompact.reduce(((e,t)=>e+(t.power||0)),0)},pvExport:function(){return Math.max(0,-1*this.gridPower)},powerUnit:function(){const e=Math.max(this.gridImport,this.selfPv,this.selfBattery,this.pvExport);return e>=1e6?S.MW:e>=1e3?S.KW:S.W},inPower:function(){return this.gridImport+this.pvProduction+this.batteryDischarge},outPower:function(){return this.homePower+this.loadpointsPower+this.pvExport+this.batteryCharge},detailsHeight:function(){return this.detailsOpen?this.detailsCompleteHeight+"px":0},pvTooltip(){if(Array.isArray(this.pv)&&!(this.pv.length<=1))return this.pv.map((({power:e})=>this.fmtW(e,this.powerUnit)))},batteryDischargeTooltip(){return this.batteryTooltip(!0)},batteryChargeTooltip(){return this.batteryTooltip(!1)},batteryFmt(){return e=>this.fmtPercentage(e,0)},co2Available(){return this.smartCostType===N},pvPossible(){return this.pvConfigured||this.gridConfigured},batteryGridChargeNow(){return this.co2Available?this.fmtCo2Short(this.tariffCo2):this.fmtPricePerKWh(this.tariffGrid,this.currency,!0)},batteryGridChargeLimitSet(){return null!==this.batteryGridChargeLimit&&void 0!==this.batteryGridChargeLimit},batteryGridChargeLimitFmt(){if(this.batteryGridChargeLimitSet)return this.co2Available?this.fmtCo2Short(this.batteryGridChargeLimit):this.fmtPricePerKWh(this.batteryGridChargeLimit,this.currency,!0)},solarForecast(){const e=this.forecast.solar||[];if(0!==e.length)return A(e,0)}},watch:{pvConfigured(){this.$nextTick(this.updateHeight)},gridConfigured(){this.$nextTick(this.updateHeight)},batteryConfigured(){this.$nextTick(this.updateHeight)},batteryMode(){this.$nextTick(this.updateHeight)}},mounted(){window.addEventListener("resize",this.updateHeight),L.energyflowDetails&&this.toggleDetails(),setTimeout((()=>this.ready=!0),200)},unmounted(){window.removeEventListener("resize",this.updateHeight)},methods:{detailsTooltip(e,t){const i=[];return void 0!==t&&i.push(`${this.fmtCo2Long(t)}`),void 0!==e&&i.push(`${this.fmtPricePerKWh(e,this.currency)}`),i},forecastTooltip(e){return null!==e?[this.$t("main.energyflow.forecastTooltip")]:[]},detailsValue(e,t){return this.co2Available?t:e},detailsFmt(e){return this.co2Available?this.fmtCo2Short(e):this.fmtPricePerKWh(e,this.currency,!0)},forecastFmt(e){return null===e?"":`${this.fmtWh(e,S.KW)}`},kw:function(e){return this.fmtW(e,this.powerUnit)},toggleDetails:function(){this.updateHeight(),this.detailsOpen=!this.detailsOpen,L.energyflowDetails=this.detailsOpen},updateHeight:function(){this.detailsCompleteHeight=this.$refs.detailsInner.offsetHeight},openBatterySettingsModal(){$.getOrCreateInstance(document.getElementById("batterySettingsModal")).show()},openForecastModal(){$.getOrCreateInstance(document.getElementById("forecastModal")).show()},dischargePower:e=>Math.abs(Math.max(0,e)),chargePower:e=>Math.abs(-1*Math.min(0,e)),batteryTooltip(e=!1){if(Array.isArray(this.battery)&&!(this.battery.length<=1))return this.battery.map((({power:t,soc:i})=>{const a=e?this.dischargePower(t):this.chargePower(t);return`${this.fmtW(a,this.powerUnit)} (${this.fmtPercentage(i,0)})`}))}}},et={class:"row"},tt={ref:"detailsInner",class:"details-inner row"},it={class:"col-12 d-flex justify-content-between pt-2 mb-4"},at={class:"d-flex flex-nowrap align-items-center text-truncate"},nt={class:"me-2 legend-self"},ot={class:"text-nowrap text-truncate"},rt={key:0,class:"d-flex flex-nowrap align-items-center text-truncate"},st={class:"text-nowrap text-truncate"},lt={key:1,class:"d-flex flex-nowrap align-items-center text-truncate"},ct={class:"text-nowrap text-truncate"},dt={class:"col-12 col-md-6 pe-md-5 pb-4 d-flex flex-column justify-content-between"},ht={class:"d-flex justify-content-between align-items-end mb-4"},ut={key:0,class:"fw-bold"},mt={class:"col-12 col-md-6 ps-md-5 pb-4 d-flex flex-column justify-content-between"},pt={class:"d-flex justify-content-between align-items-end mb-4"},gt={key:0,class:"fw-bold"},ft={key:0},vt={class:"text-nowrap"},bt={key:1},yt={class:"text-nowrap"},wt=i(Xe,[["render",function(e,t,i,a,o,s){const d=p("Visualization"),h=p("AnimatedNumber"),b=p("EnergyflowEntry");return g(),n("div",{class:l(["energyflow cursor-pointer position-relative",{"energyflow--open":e.detailsOpen}]),"data-testid":"energyflow",onClick:t[1]||(t[1]=(...e)=>s.toggleDetails&&s.toggleDetails(...e))},[r("div",et,[u(d,{class:"col-12 mb-3 mb-md-4",gridImport:s.gridImport,selfPv:s.selfPv,selfBattery:s.selfBattery,loadpoints:i.loadpointsCompact,pvExport:s.pvExport,batteryCharge:s.batteryCharge,batteryDischarge:s.batteryDischarge,batteryGridCharge:i.batteryGridChargeActive,batteryHold:s.batteryHold,pvProduction:s.pvProduction,homePower:i.homePower,batterySoc:i.batterySoc,powerUnit:s.powerUnit,vehicleIcons:s.vehicleIcons,inPower:s.inPower,outPower:s.outPower},null,8,["gridImport","selfPv","selfBattery","loadpoints","pvExport","batteryCharge","batteryDischarge","batteryGridCharge","batteryHold","pvProduction","homePower","batterySoc","powerUnit","vehicleIcons","inPower","outPower"])]),r("div",{class:l(["details",{"details--ready":e.ready}]),style:y({height:s.detailsHeight})},[r("div",tt,[r("div",it,[r("div",at,[r("span",nt,[t[2]||(t[2]=r("shopicon-filled-square",{class:"color-pv legend-pv"},null,-1)),s.selfBattery>0?(g(),n("shopicon-filled-square",{key:0,class:l("color-battery legend-battery legend-battery--"+(s.selfPv>0?"mixed":"only"))},null,2)):f("",!0)]),r("span",ot,c(e.$t("main.energyflow.selfConsumption")),1)]),s.gridImport>0?(g(),n("div",rt,[r("span",st,c(e.$t("main.energyflow.gridImport")),1),t[3]||(t[3]=r("span",{class:"ms-2"},[r("shopicon-filled-square",{class:"legend-grid"})],-1))])):(g(),n("div",lt,[r("span",ct,c(e.$t("main.energyflow.pvExport")),1),t[4]||(t[4]=r("span",{class:"ms-2"},[r("shopicon-filled-square",{class:"legend-export"})],-1))]))]),r("div",dt,[r("div",ht,[t[5]||(t[5]=r("h3",{class:"m-0"},"In",-1)),s.pvPossible?(g(),n("span",ut,[u(h,{to:s.inPower,format:s.kw},null,8,["to","format"])])):f("",!0)]),r("div",null,[s.pvPossible?(g(),C(b,{key:0,name:e.$t("main.energyflow.pvProduction"),icon:"sun",power:s.pvProduction,powerTooltip:s.pvTooltip,details:s.solarForecast,detailsFmt:s.forecastFmt,detailsTooltip:s.forecastTooltip(s.solarForecast),detailsInactive:0===s.solarForecast,detailsIcon:void 0!==s.solarForecast?"forecast":void 0,detailsClickable:void 0!==s.solarForecast,powerUnit:s.powerUnit,"data-testid":"energyflow-entry-production",onDetailsClicked:s.openForecastModal},null,8,["name","power","powerTooltip","details","detailsFmt","detailsTooltip","detailsInactive","detailsIcon","detailsClickable","powerUnit","onDetailsClicked"])):f("",!0),i.batteryConfigured?(g(),C(b,{key:1,name:s.batteryDischargeLabel,icon:"battery",power:s.batteryDischarge,powerTooltip:s.batteryDischargeTooltip,powerUnit:s.powerUnit,iconProps:{hold:s.batteryHold,soc:i.batterySoc,gridCharge:i.batteryGridChargeActive},details:i.batterySoc,detailsFmt:s.batteryFmt,detailsClickable:"","data-testid":"energyflow-entry-batterydischarge",onDetailsClicked:s.openBatterySettingsModal},B({_:2},[s.batteryGridChargeLimitSet?{name:"subline",fn:m((()=>[t[6]||(t[6]=r("div",{class:"d-none d-md-block"}," ",-1))])),key:"0"}:void 0]),1032,["name","power","powerTooltip","powerUnit","iconProps","details","detailsFmt","onDetailsClicked"])):f("",!0),u(b,{name:e.$t("main.energyflow.gridImport"),icon:"powersupply",power:s.gridImport,powerUnit:s.powerUnit,details:s.detailsValue(i.tariffGrid,i.tariffCo2),detailsFmt:s.detailsFmt,detailsTooltip:s.detailsTooltip(i.tariffGrid,i.tariffCo2),"data-testid":"energyflow-entry-gridimport"},null,8,["name","power","powerUnit","details","detailsFmt","detailsTooltip"])])]),r("div",mt,[r("div",pt,[t[7]||(t[7]=r("h3",{class:"m-0"},"Out",-1)),s.pvPossible?(g(),n("span",gt,[u(h,{to:s.outPower,format:s.kw},null,8,["to","format"])])):f("",!0)]),r("div",null,[s.pvPossible?(g(),C(b,{key:0,name:e.$t("main.energyflow.homePower"),icon:"home",power:i.homePower,powerUnit:s.powerUnit,details:s.detailsValue(i.tariffPriceHome,i.tariffCo2Home),detailsFmt:s.detailsFmt,detailsTooltip:s.detailsTooltip(i.tariffPriceHome,i.tariffCo2Home),"data-testid":"energyflow-entry-home"},null,8,["name","power","powerUnit","details","detailsFmt","detailsTooltip"])):f("",!0),u(b,{name:e.$t("main.energyflow.loadpoints",s.activeLoadpointsCount,{count:s.activeLoadpointsCount}),icon:"vehicle",iconProps:{names:s.vehicleIcons},power:s.loadpointsPower,powerUnit:s.powerUnit,details:s.activeLoadpointsCount?s.detailsValue(i.tariffPriceLoadpoints,i.tariffCo2Loadpoints):void 0,detailsFmt:s.detailsFmt,detailsTooltip:s.detailsTooltip(i.tariffPriceLoadpoints,i.tariffCo2Loadpoints),"data-testid":"energyflow-entry-loadpoints"},null,8,["name","iconProps","power","powerUnit","details","detailsFmt","detailsTooltip"]),i.batteryConfigured?(g(),C(b,{key:1,name:s.batteryChargeLabel,icon:"battery",power:s.batteryCharge,powerTooltip:s.batteryChargeTooltip,powerUnit:s.powerUnit,iconProps:{hold:s.batteryHold,soc:i.batterySoc,gridCharge:i.batteryGridChargeActive},details:i.batterySoc,detailsFmt:s.batteryFmt,detailsClickable:"",onDetailsClicked:s.openBatterySettingsModal},B({_:2},[s.batteryGridChargeLimitSet?{name:"subline",fn:m((()=>[r("button",{type:"button",class:"btn-reset d-flex justify-content-between text-start pe-4",onClick:t[0]||(t[0]=V(((...e)=>s.openBatterySettingsModal&&s.openBatterySettingsModal(...e)),["stop"]))},[i.batteryGridChargeActive?(g(),n("span",ft,[v(c(e.$t("main.energyflow.batteryGridChargeActive"))+" ",1),r("span",vt,[t[8]||(t[8]=v("(≤ ")),r("u",null,c(s.batteryGridChargeLimitFmt),1),t[9]||(t[9]=v(")"))])])):(g(),n("span",bt,[v(c(e.$t("main.energyflow.batteryGridChargeLimit"))+" ",1),r("span",yt,[t[10]||(t[10]=v("≤ ")),r("u",null,c(s.batteryGridChargeLimitFmt),1)])]))])])),key:"0"}:void 0]),1032,["name","power","powerTooltip","powerUnit","iconProps","details","detailsFmt","onDetailsClicked"])):f("",!0),s.pvPossible?(g(),C(b,{key:2,name:e.$t("main.energyflow.pvExport"),icon:"powersupply",power:s.pvExport,powerUnit:s.powerUnit,details:s.detailsValue(-i.tariffFeedIn),detailsFmt:s.detailsFmt,detailsTooltip:s.detailsTooltip(-i.tariffFeedIn),"data-testid":"energyflow-entry-gridexport"},null,8,["name","power","powerUnit","details","detailsFmt","detailsTooltip"])):f("",!0)])])],512)],6)],2)}],["__scopeId","data-v-6d0fa24b"]]);class St extends HTMLElement{connectedCallback(){this.setAttribute("data-shopicon",!0),this.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><style></style><g id="Your_Icons"><path d="M0 0h48v48H0z" fill="none"/><path d="M24 40c-8.822 0-16-7.178-16-16S15.178 8 24 8s16 7.178 16 16-7.178 16-16 16z"/></g></svg>'}}window.customElements.define("shopicon-filled-circle",St);class Pt extends HTMLElement{connectedCallback(){this.setAttribute("data-shopicon",!0),this.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><style></style><g id="Your_Icons"><path d="M0 0h48v48H0z" fill="none"/><path d="M24 40.5c-9.098 0-16.5-7.402-16.5-16.5S14.902 7.5 24 7.5c9.098 0 16.5 7.402 16.5 16.5S33.098 40.5 24 40.5zm0-28c-6.341 0-11.5 5.159-11.5 11.5S17.659 35.5 24 35.5 35.5 30.341 35.5 24 30.341 12.5 24 12.5z"/></g></svg>'}}window.customElements.define("shopicon-bold-circle",Pt);class xt extends HTMLElement{connectedCallback(){this.setAttribute("data-shopicon",!0),this.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><style></style><g id="Your_Icons"><path d="M0 0h48v48H0V0z" fill="none"/><path d="M24.788 4.065a2 2 0 00-2.25.956l-11.282 20.11a2 2 0 001.745 2.978h8.282V42a2 2 0 003.827.813 552.532 552.532 0 0010.037-24.088A2 2 0 0033.282 16h-7V6a2 2 0 00-1.494-1.935z" id="Shopicon"/></g></svg>'}}window.customElements.define("shopicon-filled-lightning",xt);const Ct={name:"Mode",props:{mode:String,pvPossible:Boolean,hasSmartCost:Boolean},emits:["updated"],computed:{modes:function(){return this.pvPossible?["off","pv","minpv","now"]:this.hasSmartCost?["off","pv","now"]:["off","now"]}},methods:{label:function(e){return"pv"===e&&!this.pvPossible&&this.hasSmartCost?this.$t("main.mode.smart"):this.$t(`main.mode.${e}`)},isActive:function(e){return this.mode===e},setTargetMode:function(e){this.$emit("updated",e)}}},Tt={class:"mode-group border d-inline-flex",role:"group","data-testid":"mode"},kt=["onClick"],It=i(Ct,[["render",function(e,t,i,a,o,r){return g(),n("div",Tt,[(g(!0),n(d,null,h(r.modes,(e=>(g(),n("button",{key:e,type:"button",class:l(["btn flex-grow-1 flex-shrink-1",{active:r.isActive(e)}]),tabindex:"0",onClick:t=>r.setTargetMode(e)},c(r.label(e)),11,kt)))),128))])}],["__scopeId","data-v-ef5515c5"]]),$t={class:"root"},Lt={key:1},At={key:2,class:"extraValue text-nowrap"},Nt=i({name:"LabelAndValue",components:{AnimatedNumber:Re},props:{label:String,value:[Number,String],valueFmt:Function,extraValue:String,align:{type:String,default:"center"}},computed:{labelClass(){return`text-${this.align}`},valueClass(){return`justify-content-${this.align}`}}},[["render",function(e,t,i,a,o,s){const d=p("AnimatedNumber");return g(),n("div",$t,[r("div",{class:l(["mb-2 label",s.labelClass])},[w(e.$slots,"label",{},(()=>[v(c(i.label),1)]),!0)],2),w(e.$slots,"default",{},(()=>[r("h3",{class:l(["value m-0",s.valueClass])},[w(e.$slots,"value",{},(()=>[i.valueFmt?(g(),C(d,{key:0,to:i.value,format:i.valueFmt},null,8,["to","format"])):(g(),n("span",Lt,c(i.value),1)),null!=i.extraValue?(g(),n("div",At,c(i.extraValue||" "),1)):f("",!0)]),!0)],2)]),!0)])}],["__scopeId","data-v-668231f2"]]),Bt={name:"VehicleTitle",components:{VehicleOptions:se,VehicleIcon:ne,Sync:E,CloudOffline:M},mixins:[I],props:{connected:Boolean,id:[String,Number],vehicleDetectionActive:Boolean,vehicleNotReachable:Boolean,icon:String,vehicleName:String,vehicles:{type:Array,default:()=>[]},title:String},emits:["change-vehicle","remove-vehicle"],data:function(){return{refreshTooltip:null,notReachableTooltip:null}},computed:{iconType(){return this.vehicleDetectionActive?"refresh":this.connected?"vehicle":null},name(){return this.title?this.title:this.connected?this.$t("main.vehicle.unknown"):this.$t("main.vehicle.none")},vehicleKnown(){return!!this.vehicleName},showOptions(){return this.vehicleKnown||this.vehicles.length},vehicleOptionsProps:function(){return this.collectProps(se)}},watch:{iconType:function(){this.initTooltip()}},mounted:function(){this.initTooltip()},methods:{changeVehicle(e){this.$emit("change-vehicle",e)},removeVehicle(){this.$emit("remove-vehicle")},initTooltip(){this.$nextTick((()=>{this.refreshTooltip?.dispose(),this.notReachableTooltip?.dispose(),this.$refs.refresh&&(this.refreshTooltip=new oe(this.$refs.refresh)),this.$refs.notReachable&&(this.notReachableTooltip=new oe(this.$refs.notReachable))}))},openHelpModal(){$.getOrCreateInstance(document.getElementById("helpModal")).show(),this.initTooltip()}}},Vt={class:"d-flex justify-content-between mb-3 align-items-center","data-testid":"vehicle-title"},Mt={class:"d-flex align-items-center m-0 flex-grow-1 overflow-hidden"},Et=["title"],Dt={key:2,class:"me-2 flex-shrink-0"},Rt={class:"flex-grow-1 text-truncate vehicle-name","data-testid":"vehicle-name"},Ut={key:4,class:"flex-grow-1 text-truncate vehicle-name","data-testid":"vehicle-name"},qt=["title"],Ot=i(Bt,[["render",function(e,t,i,a,o,s){const l=p("Sync"),d=p("VehicleIcon"),h=p("VehicleOptions"),v=p("CloudOffline");return g(),n("div",Vt,[r("h4",Mt,["refresh"===s.iconType?(g(),n("div",{key:0,ref:"refresh",class:"me-2 flex-shrink-0 spin",title:e.$t("main.vehicle.detectionActive"),"data-bs-toggle":"tooltip"},[u(l)],8,Et)):"vehicle"===s.iconType?(g(),C(d,{key:1,name:i.icon,class:"me-2 flex-shrink-0"},null,8,["name"])):(g(),n("shopicon-regular-cablecharge",Dt)),s.showOptions?(g(),C(h,T({key:3},s.vehicleOptionsProps,{id:i.id,class:"options",selected:i.vehicleName,onChangeVehicle:s.changeVehicle,onRemoveVehicle:s.removeVehicle}),{default:m((()=>[r("span",Rt,c(s.name),1)])),_:1},16,["id","selected","onChangeVehicle","onRemoveVehicle"])):(g(),n("span",Ut,c(s.name),1)),i.vehicleNotReachable?(g(),n("button",{key:5,ref:"notReachable",class:"ms-2 btn-neutral","data-bs-toggle":"tooltip",title:e.$t("main.vehicle.notReachable"),type:"button","data-testid":"vehicle-not-reachable-icon",onClick:t[0]||(t[0]=(...e)=>s.openHelpModal&&s.openHelpModal(...e))},[u(v,{class:"evcc-gray"})],8,qt)):f("",!0)])])}],["__scopeId","data-v-c114fed5"]]),Ft={name:"VehicleSoc",mixins:[a],props:{connected:Boolean,vehicleSoc:Number,vehicleLimitSoc:Number,enabled:Boolean,charging:Boolean,heating:Boolean,minSoc:Number,effectivePlanSoc:Number,effectiveLimitSoc:Number,limitEnergy:Number,planEnergy:Number,chargedEnergy:Number,socBasedCharging:Boolean,socBasedPlanning:Boolean},emits:["limit-soc-drag","limit-soc-updated","plan-clicked"],data:function(){return{selectedLimitSoc:null,interactionStartScreenY:null,tooltip:null,dragging:!1}},computed:{step:function(){return this.heating?1:5},vehicleSocDisplayWidth:function(){return this.socBasedCharging?this.vehicleSoc>=0?this.vehicleSoc:100:this.maxEnergy?100/this.maxEnergy*(this.chargedEnergy/1e3):100},transition:function(){return this.dragging?{transition:"none"}:{transition:"width var(--evcc-transition-fast) linear"}},maxEnergy:function(){return Math.max(this.planEnergy,this.limitEnergy,this.chargedEnergy/1e3)},vehicleLimitSocActive:function(){return this.vehicleLimitSoc>0&&this.vehicleLimitSoc>this.vehicleSoc},planMarkerPosition:function(){if(this.socBasedPlanning)return this.effectivePlanSoc;const e=Math.max(this.planEnergy,this.limitEnergy);return e?100/e*this.planEnergy:0},planMarkerAvailable:function(){return!(this.socBasedCharging&&!this.socBasedPlanning)&&this.planMarkerPosition>0},energyLimitMarkerPosition:function(){return this.socBasedCharging?null:this.limitEnergy?100/this.maxEnergy*this.limitEnergy:100},energyLimitMarkerActive:function(){return!this.socBasedCharging&&(!this.planEnergy||this.limitEnergy>=this.planEnergy)},sliderActive:function(){const e=this.visibleLimitSoc<=(this.vehicleLimitSoc||100),t=this.visibleLimitSoc>=(this.effectivePlanSoc||0);return e&&t},progressColor:function(){return this.minSocActive?"bg-danger":"bg-primary"},minSocActive:function(){return this.minSoc>0&&this.vehicleSoc<this.minSoc},remainingSocWidth:function(){if(!this.socBasedCharging)return 100-this.vehicleSocDisplayWidth;{if(100===this.vehicleSocDisplayWidth)return null;if(this.minSocActive)return this.minSoc-this.vehicleSoc;const e=Math.min(this.vehicleLimitSoc||100,Math.max(this.visibleLimitSoc,this.effectivePlanSoc||0));if(e>this.vehicleSoc)return e-this.vehicleSoc}return null},visibleLimitSoc:function(){return Number(this.selectedLimitSoc||this.effectiveLimitSoc)}},watch:{effectiveLimitSoc:function(){this.selectedLimitSoc=this.effectiveLimitSoc},vehicleLimitSoc:function(){this.updateTooltip()}},mounted:function(){this.updateTooltip()},methods:{changeLimitSocStart:function(e){this.dragging=!0,e.stopPropagation()},changeLimitSocEnd:function(e){this.dragging=!1;const t=parseInt(e.target.value,10);t!==this.effectiveLimitSoc&&this.$emit("limit-soc-updated",t)},movedLimitSoc:function(e){const t=parseInt(e.target.value,10);return e.stopPropagation(),t<20?(e.target.value=20,this.selectedLimitSoc=t,e.preventDefault(),!1):(this.selectedLimitSoc=t,this.$emit("limit-soc-drag",this.selectedLimitSoc),!0)},updateTooltip:function(){this.tooltip||(this.tooltip=new oe(this.$refs.vehicleLimitSoc));const e=this.vehicleLimitSoc,t=this.$t("main.vehicleSoc.vehicleLimit",{soc:this.fmtPercentage(e)});this.tooltip.setContent({".tooltip-inner":t})}}},Wt={class:"vehicle-soc"},_t={class:"progress"},zt={class:"target"},jt=["step","value"],Ht=i(Ft,[["render",function(e,t,i,a,c,d){return g(),n("div",Wt,[r("div",_t,[i.connected?(g(),n("div",{key:0,class:l(["progress-bar",{[d.progressColor]:!0,"progress-bar-striped":i.charging,"progress-bar-animated":i.charging}]),role:"progressbar",style:y({width:`${d.vehicleSocDisplayWidth}%`,...d.transition})},null,6)):f("",!0),d.remainingSocWidth>0&&i.enabled&&i.connected?(g(),n("div",{key:1,class:l(["progress-bar bg-muted",d.progressColor]),role:"progressbar",style:y({width:`${d.remainingSocWidth}%`,...d.transition})},null,6)):f("",!0),o(r("div",{ref:"vehicleLimitSoc",class:l(["vehicle-limit-soc",{"vehicle-limit-soc--active":d.vehicleLimitSocActive}]),"data-bs-toggle":"tooltip",title:" ",style:y({left:`${i.vehicleLimitSoc}%`})},null,6),[[s,i.vehicleLimitSoc]]),o(r("div",{class:l(["energy-limit-marker",{"energy-limit-marker--active":d.energyLimitMarkerActive,"energy-limit-marker--visible":d.energyLimitMarkerPosition<100}]),"data-bs-toggle":"tooltip",style:y({left:`${d.energyLimitMarkerPosition}%`})},null,6),[[s,d.energyLimitMarkerPosition]]),o(r("div",{class:"plan-marker","data-bs-toggle":"tooltip",style:y({left:`${d.planMarkerPosition}%`}),"data-testid":"plan-marker",onClick:t[0]||(t[0]=t=>e.$emit("plan-clicked"))},t[6]||(t[6]=[r("shopicon-regular-clock",null,null,-1)]),4),[[s,d.planMarkerAvailable]])]),r("div",zt,[i.socBasedCharging&&i.connected?(g(),n("input",{key:0,type:"range",min:"0",max:"100",step:d.step,value:d.visibleLimitSoc,class:l(["slider",{"slider--active":d.sliderActive}]),onMousedown:t[1]||(t[1]=(...e)=>d.changeLimitSocStart&&d.changeLimitSocStart(...e)),onTouchstart:t[2]||(t[2]=(...e)=>d.changeLimitSocStart&&d.changeLimitSocStart(...e)),onInput:t[3]||(t[3]=(...e)=>d.movedLimitSoc&&d.movedLimitSoc(...e)),onMouseup:t[4]||(t[4]=(...e)=>d.changeLimitSocEnd&&d.changeLimitSocEnd(...e)),onTouchend:t[5]||(t[5]=(...e)=>d.changeLimitSocEnd&&d.changeLimitSocEnd(...e))},null,42,jt)):f("",!0)])])}],["__scopeId","data-v-00c44b1b"]]),Gt=i({name:"Climater",mixins:[b]},[["render",function(e,t,i,a,o,s){return g(),n("svg",{style:y(e.svgStyle),viewBox:"0 0 24 24"},t[0]||(t[0]=[r("path",{fill:"currentColor",d:"M10.6 22q-1.275 0-1.937-.763T8 19.5q0-.65.288-1.263t.887-1.012q.55-.35.888-.9t.462-1.175l-.3-.15q-.15-.075-.275-.175l-2.3.825q-.425.15-.825.25T6 16q-1.575 0-2.788-1.375T2 10.6q0-1.275.763-1.937T4.475 8q.65 0 1.275.288t1.025.887q.35.55.9.887t1.175.463l.15-.3q.075-.15.175-.275l-.825-2.3q-.15-.425-.25-.825t-.1-.8q0-1.6 1.375-2.813T13.4 2q1.275 0 1.938.763T16 4.475q0 .65-.288 1.275t-.887 1.025q-.55.35-.887.9t-.463 1.175l.3.15q.15.075.275.175l2.3-.85q.425-.15.813-.237T17.975 8Q20 8 21 9.675t1 3.725q0 1.275-.8 1.938T19.425 16q-.625 0-1.213-.288t-.987-.887q-.35-.55-.9-.887t-1.175-.463l-.15.3q-.075.15-.175.275l.825 2.3q.15.4.25.763t.1.762q.025 1.625-1.35 2.875T10.6 22m1.4-8.5q.625 0 1.062-.437T13.5 12t-.437-1.062T12 10.5t-1.062.438T10.5 12t.438 1.063T12 13.5m-1.15-4.8q.15-.05.313-.088t.312-.062q.2-1.05.763-1.95t1.487-1.5q.125-.1.2-.25T14 4.475q0-.2-.15-.337T13.4 4q-.95 0-2.15.413T10 6.025q0 .225.063.425t.112.375zM6 14q.35 0 .825-.175L8.7 13.15q-.05-.15-.088-.313t-.062-.312q-1.05-.2-1.95-.763t-1.5-1.487q-.1-.125-.262-.2T4.475 10q-.225 0-.35.15T4 10.6q0 1.35.513 2.375T6 14m4.6 6q1.175 0 2.313-.475T14 17.875q0-.2-.062-.375t-.113-.325L13.15 15.3q-.15.05-.312.088t-.313.062q-.2 1.05-.763 1.95t-1.487 1.5q-.125.1-.213.263T10 19.5q.025.2.15.35t.45.15m8.825-6q.225 0 .4-.125T20 13.4q0-.95-.4-2.162T17.975 10q-.225 0-.425.05t-.375.1l-1.875.7q.05.15.088.313t.062.312q1.05.2 1.95.763t1.5 1.487q.075.125.225.2t.3.075m-6.9 1.45"},null,-1)]),4)}]]),Kt=i({name:"PlanStart",mixins:[b]},[["render",function(e,t,i,a,o,s){return g(),n("svg",{style:y(e.svgStyle),viewBox:"0 0 24 24"},t[0]||(t[0]=[r("path",{fill:"currentColor",d:"M3 18q-.425 0-.712-.288T2 17V7q0-.425.288-.712T3 6t.713.288T4 7v10q0 .425-.288.713T3 18m15.175-5H7q-.425 0-.712-.288T6 12t.288-.712T7 11h11.175L15.3 8.1q-.275-.275-.288-.687T15.3 6.7q.275-.275.7-.275t.7.275l4.6 4.6q.15.15.213.325t.062.375t-.062.375t-.213.325l-4.6 4.6q-.275.275-.687.275T15.3 17.3q-.3-.3-.3-.712t.3-.713z"},null,-1)]),4)}]]),Zt=i({name:"Reconnect",mixins:[b]},[["render",function(e,t,i,a,o,s){return g(),n("svg",{style:y(e.svgStyle),viewBox:"0 0 32 32"},t[0]||(t[0]=[r("path",{fill:"currentColor",d:"M5.505,24.609c-0.595,-0.935 -0.94,-2.041 -0.94,-3.222c-0,-1.632 0.661,-3.198 1.831,-4.336l1.995,-1.994c0.52,-0.521 1.364,-0.521 1.885,0l0.391,0.391l1.724,-1.724c0.52,-0.52 1.365,-0.52 1.885,-0c0.52,0.52 0.52,1.365 0,1.885l-1.724,1.724l2.115,2.115l1.724,-1.724c0.52,-0.52 1.365,-0.52 1.885,-0c0.52,0.52 0.52,1.365 0,1.885l-1.724,1.724l0.391,0.391c0.521,0.521 0.521,1.365 -0,1.885c-0,0 -1.994,1.995 -1.994,1.995c-1.138,1.17 -2.704,1.831 -4.336,1.831c-1.181,0 -2.287,-0.345 -3.222,-0.94l-2.448,2.448c-0.521,0.52 -1.365,0.52 -1.886,-0c-0.52,-0.521 -0.52,-1.365 0,-1.886l2.448,-2.448Zm4.219,-6.333l-0.391,-0.39l-1.057,1.057c-0.005,0.005 -0.01,0.01 -0.015,0.015c-0.658,0.637 -1.03,1.514 -1.03,2.429c0,0.797 0.282,1.533 0.75,2.114c0.106,0.059 0.205,0.133 0.295,0.223c0.09,0.09 0.164,0.189 0.223,0.295c0.581,0.468 1.317,0.75 2.114,0.75c0.915,-0 1.792,-0.372 2.429,-1.03c0.005,-0.005 0.01,-0.01 0.015,-0.015c0,-0 1.057,-1.057 1.057,-1.057l-4.39,-4.391Zm14.885,-12.771l2.448,-2.448c0.521,-0.52 1.365,-0.52 1.886,0c0.52,0.521 0.52,1.365 -0,1.886l-2.448,2.448c0.595,0.935 0.94,2.041 0.94,3.222c0,1.632 -0.661,3.198 -1.831,4.336l-1.995,1.994c-0.52,0.521 -1.364,0.521 -1.885,-0l-6.667,-6.667c-0.521,-0.521 -0.521,-1.365 0,-1.885c0,-0 1.994,-1.995 1.994,-1.995c1.138,-1.17 2.704,-1.831 4.336,-1.831c1.181,-0 2.287,0.345 3.222,0.94Zm-0.59,2.994c-0.106,-0.059 -0.205,-0.133 -0.295,-0.223c-0.09,-0.09 -0.164,-0.189 -0.223,-0.295c-0.581,-0.468 -1.317,-0.75 -2.114,-0.75c-0.915,0 -1.792,0.372 -2.429,1.03c-0.005,0.005 -0.01,0.01 -0.015,0.015c-0,0 -1.057,1.057 -1.057,1.057l4.781,4.781l1.057,-1.057c0.005,-0.005 0.01,-0.01 0.015,-0.015c0.658,-0.637 1.03,-1.514 1.03,-2.429c-0,-0.797 -0.282,-1.533 -0.75,-2.114Z"},null,-1),r("path",{fill:"currentColor",d:"M25.333,20l0.781,-0l-0.39,-0.391c-0.52,-0.52 -0.52,-1.365 -0,-1.885c0.52,-0.52 1.365,-0.52 1.885,-0l2.667,2.667c0.387,0.386 0.492,0.962 0.289,1.453c-0.066,0.161 -0.164,0.308 -0.289,0.432l-2.667,2.667c-0.52,0.52 -1.365,0.52 -1.885,-0c-0.52,-0.521 -0.52,-1.365 -0,-1.886l0.39,-0.39l-0.781,-0c-1.463,-0 -2.666,1.203 -2.666,2.666c-0,1.463 1.203,2.667 2.666,2.667c0.656,-0 1.289,-0.242 1.778,-0.679c0.549,-0.491 1.392,-0.444 1.883,0.105c0.49,0.548 0.443,1.392 -0.105,1.882c-0.978,0.875 -2.244,1.359 -3.556,1.359c-2.926,-0 -5.333,-2.408 -5.333,-5.334c-0,-2.925 2.408,-5.333 5.333,-5.333Z"},null,-1)]),4)}]]),Yt=i({name:"RfidWait",mixins:[b]},[["render",function(e,t,i,a,o,s){return g(),n("svg",{style:y(e.svgStyle),viewBox:"0 0 32 32"},t[0]||(t[0]=[r("path",{d:"M26.667,26.667l-5.4,-0c-0.378,-0 -0.695,-0.128 -0.95,-0.384c-0.255,-0.256 -0.383,-0.573 -0.384,-0.95c-0.001,-0.377 0.127,-0.693 0.384,-0.949c0.257,-0.256 0.574,-0.384 0.95,-0.384l5.4,0l-0,-5.333c-0,-0.378 0.128,-0.695 0.384,-0.95c0.256,-0.255 0.572,-0.383 0.949,-0.384c0.377,-0.001 0.694,0.127 0.951,0.384c0.257,0.257 0.384,0.574 0.382,0.95l0,5.333c0,0.733 -0.261,1.361 -0.782,1.884c-0.522,0.523 -1.15,0.784 -1.884,0.783m-22.667,-17.134c-0.378,0 -0.694,-0.128 -0.949,-0.384c-0.255,-0.256 -0.383,-0.572 -0.384,-0.949l-0,-0.2c-0,-0.733 0.261,-1.361 0.784,-1.883c0.522,-0.521 1.15,-0.783 1.882,-0.784l8,0c0.378,0 0.695,0.128 0.951,0.384c0.256,0.256 0.384,0.573 0.383,0.95c-0.001,0.377 -0.129,0.693 -0.384,0.95c-0.255,0.257 -0.572,0.385 -0.95,0.383l-8,-0l0,0.2c0,0.378 -0.128,0.695 -0.384,0.951c-0.256,0.256 -0.572,0.383 -0.949,0.382m0.667,17.134c-0.556,-0 -1.028,-0.195 -1.416,-0.583c-0.389,-0.388 -0.583,-0.861 -0.584,-1.417c-0.001,-0.557 0.193,-1.029 0.584,-1.416c0.39,-0.388 0.862,-0.583 1.416,-0.584c0.553,-0.002 1.026,0.193 1.417,0.584c0.391,0.391 0.585,0.863 0.583,1.416c-0.003,0.553 -0.197,1.025 -0.583,1.417c-0.386,0.392 -0.858,0.586 -1.417,0.583m6,-0c-0.356,-0 -0.667,-0.106 -0.934,-0.318c-0.266,-0.211 -0.433,-0.494 -0.5,-0.849c-0.244,-1.4 -0.872,-2.589 -1.882,-3.567c-1.011,-0.977 -2.217,-1.589 -3.618,-1.833c-0.333,-0.044 -0.594,-0.205 -0.782,-0.483c-0.189,-0.277 -0.283,-0.594 -0.284,-0.95c-0,-0.378 0.117,-0.695 0.35,-0.95c0.234,-0.255 0.517,-0.361 0.85,-0.317c2.089,0.267 3.877,1.144 5.366,2.633c1.489,1.489 2.378,3.278 2.667,5.367c0.044,0.356 -0.056,0.656 -0.3,0.9c-0.244,0.244 -0.556,0.367 -0.933,0.367m5.333,-0c-0.378,-0 -0.694,-0.123 -0.949,-0.367c-0.255,-0.244 -0.406,-0.556 -0.451,-0.933c-0.311,-2.845 -1.472,-5.256 -3.483,-7.234c-2.01,-1.977 -4.438,-3.111 -7.284,-3.4c-0.355,-0.044 -0.639,-0.2 -0.85,-0.466c-0.212,-0.267 -0.317,-0.578 -0.316,-0.934c-0,-0.377 0.117,-0.7 0.35,-0.966c0.234,-0.267 0.517,-0.378 0.85,-0.334c3.577,0.289 6.622,1.684 9.133,4.184c2.511,2.501 3.933,5.528 4.267,9.083c0.044,0.378 -0.061,0.7 -0.316,0.967c-0.255,0.266 -0.572,0.4 -0.951,0.4",fill:"currentColor"},null,-1),r("path",{d:"M23.989,14.594c-1.844,-0 -3.416,-0.651 -4.716,-1.951c-1.3,-1.3 -1.95,-2.872 -1.951,-4.716c-0.001,-1.844 0.65,-3.416 1.951,-4.716c1.301,-1.3 2.873,-1.951 4.716,-1.951c1.843,0 3.415,0.651 4.717,1.951c1.303,1.3 1.952,2.872 1.95,4.716c-0.003,1.844 -0.653,3.416 -1.951,4.717c-1.298,1.302 -2.87,1.951 -4.716,1.95m0.667,-6.934l-0,-3.066c-0,-0.178 -0.067,-0.334 -0.2,-0.467c-0.134,-0.133 -0.289,-0.2 -0.467,-0.2c-0.178,-0 -0.333,0.067 -0.467,0.2c-0.133,0.133 -0.2,0.289 -0.2,0.467l0,3.033c0,0.178 0.034,0.35 0.1,0.517c0.067,0.167 0.167,0.317 0.3,0.45l2,2c0.134,0.133 0.289,0.2 0.467,0.2c0.178,-0 0.333,-0.067 0.467,-0.2c0.133,-0.134 0.2,-0.289 0.2,-0.467c-0,-0.178 -0.067,-0.333 -0.2,-0.467l-2,-2Z",fill:"currentColor"},null,-1)]),4)}]]),Qt=i({name:"SunDown",mixins:[b]},[["render",function(e,t,i,a,o,s){return g(),n("svg",{style:y(e.svgStyle),viewBox:"0 0 48 48"},t[0]||(t[0]=[r("path",{fill:"currentColor",d:"M14.216 26.071A9.953 9.953 0 0 1 14 24c0-5.514 4.486-10 10-10s10 4.486 10 10c0 .71-.074 1.403-.216 2.071h-4.152A6.006 6.006 0 0 0 24 18a6.006 6.006 0 0 0-5.632 8.071h-4.152ZM22 4h4v6h-4zM4 22h6v4H4zM38 22h6v4h-6zM15.732 5.68l3 5.196-3.464 2-3-5.196 3.464-2ZM40.321 12.269l2 3.466-5.196 2.999-2-3.465 5.196-3ZM7.679 12.267l5.197 2.999-2 3.466-5.197-3 2-3.465ZM32.269 5.68l3.465 2.001-3 5.195-3.465-2.001 3-5.195Z"},null,-1),r("path",{fill:"currentColor",d:"M26.044 36.261V28h-4.088v8.261l-3.066-3.033L16 36.087 24 44l8-7.913-2.89-2.859-3.066 3.033Z",style:{"fill-rule":"nonzero"}},null,-1)]),4)}]]),Jt=i({name:"SunUp",mixins:[b]},[["render",function(e,t,i,a,o,s){return g(),n("svg",{style:y(e.svgStyle),viewBox:"0 0 48 48"},t[0]||(t[0]=[r("path",{fill:"currentColor",d:"M14.216 26.071A9.953 9.953 0 0 1 14 24c0-5.514 4.486-10 10-10s10 4.486 10 10c0 .71-.074 1.403-.216 2.071h-4.152A6.006 6.006 0 0 0 24 18a6.006 6.006 0 0 0-5.632 8.071h-4.152ZM22 4h4v6h-4zM4 22h6v4H4zM38 22h6v4h-6zM15.732 5.68l3 5.196-3.464 2-3-5.196 3.464-2ZM40.321 12.269l2 3.466-5.196 2.999-2-3.465 5.196-3ZM7.679 12.267l5.197 2.999-2 3.466-5.197-3 2-3.465ZM32.269 5.68l3.465 2.001-3 5.195-3.465-2.001 3-5.195Z"},null,-1),r("path",{fill:"currentColor",d:"M21.956 35.739V44h4.088v-8.261l3.066 3.033L32 35.913 24 28l-8 7.913 2.89 2.859 3.066-3.033Z",style:{"fill-rule":"nonzero"}},null,-1)]),4)}]]),Xt=i({name:"VehicleLimit",mixins:[b]},[["render",function(e,t,i,a,o,s){return g(),n("svg",{style:y(e.svgStyle),viewBox:"0 0 24 24"},t[0]||(t[0]=[r("path",{fill:"currentColor",d:"M6 19v1q0 .425-.288.713T5 21H4q-.425 0-.712-.288T3 20v-8l2.1-6q.15-.45.538-.725T6.5 5h11q.475 0 .863.275T18.9 6l2.1 6v8q0 .425-.287.713T20 21h-1q-.425 0-.712-.288T18 20v-1zm-.2-9h12.4l-1.05-3H6.85zM5 12v5zm2.5 4q.625 0 1.063-.437T9 14.5t-.437-1.062T7.5 13t-1.062.438T6 14.5t.438 1.063T7.5 16m9 0q.625 0 1.063-.437T18 14.5t-.437-1.062T16.5 13t-1.062.438T15 14.5t.438 1.063T16.5 16M5 17h14v-5H5z"},null,-1)]),4)}]]),ei=i({name:"VehicleLimitReached",mixins:[b]},[["render",function(e,t,i,a,o,s){return g(),n("svg",{style:y(e.svgStyle),viewBox:"0 0 32 32"},t[0]||(t[0]=[r("path",{fill:"currentColor",d:"M5.333,24l18.667,0l0,-5.433c0.467,-0.067 0.922,-0.167 1.367,-0.3c0.444,-0.134 0.877,-0.3 1.3,-0.5l-0,10.233c-0,0.378 -0.128,0.695 -0.384,0.951c-0.256,0.256 -0.573,0.383 -0.95,0.382l-1.333,0c-0.378,0 -0.694,-0.128 -0.949,-0.384c-0.255,-0.256 -0.383,-0.572 -0.384,-0.949l-0,-1.333l-16,-0l-0,1.333c-0,0.378 -0.128,0.695 -0.384,0.951c-0.256,0.256 -0.573,0.383 -0.95,0.382l-1.333,0c-0.378,0 -0.694,-0.128 -0.949,-0.384c-0.255,-0.256 -0.383,-0.572 -0.384,-0.949l-0,-10.667l2.8,-8c0.133,-0.4 0.372,-0.722 0.717,-0.966c0.345,-0.245 0.728,-0.367 1.149,-0.367l6.1,0c-0.066,0.444 -0.1,0.889 -0.1,1.333c0,0.445 0.034,0.889 0.1,1.334l-5.633,-0l-1.4,4l8.633,-0c0.378,0.533 0.8,1.028 1.267,1.484c0.467,0.456 0.989,0.85 1.567,1.182l-12.534,0l0,6.667Zm15.334,-1.333c-0.552,0.003 -1.024,-0.191 -1.416,-0.583c-0.392,-0.392 -0.587,-0.864 -0.584,-1.417c0.002,-0.553 0.197,-1.025 0.584,-1.416c0.386,-0.391 0.858,-0.586 1.416,-0.584c0.557,0.001 1.029,0.196 1.417,0.584c0.388,0.387 0.582,0.859 0.583,1.416c0.001,0.556 -0.194,1.029 -0.583,1.417c-0.389,0.388 -0.862,0.583 -1.417,0.583Zm-12,-0c-0.552,0.003 -1.024,-0.191 -1.416,-0.583c-0.392,-0.392 -0.587,-0.864 -0.584,-1.417c0.002,-0.553 0.197,-1.025 0.584,-1.416c0.386,-0.391 0.858,-0.586 1.416,-0.584c0.557,0.001 1.029,0.196 1.417,0.584c0.388,0.387 0.582,0.859 0.583,1.416c0.001,0.556 -0.194,1.029 -0.583,1.417c-0.389,0.388 -0.862,0.583 -1.417,0.583Zm13.968,-20.009c1.844,-0 3.417,0.65 4.717,1.95c1.301,1.301 1.95,2.873 1.949,4.716c-0,1.844 -0.651,3.416 -1.95,4.718c-1.3,1.301 -2.872,1.951 -4.716,1.949c-1.845,-0.002 -3.417,-0.652 -4.716,-1.951c-1.3,-1.298 -1.95,-2.87 -1.951,-4.716c-0.001,-1.845 0.649,-3.417 1.951,-4.716c1.301,-1.298 2.873,-1.948 4.716,-1.95Zm-0.934,9.666l4.734,-4.733l-1,-1l-3.734,3.733l-1.866,-1.866l-1,1l2.866,2.866Z"},null,-1)]),4)}]]),ti=i({name:"VehicleLimitWarning",mixins:[b]},[["render",function(e,t,i,a,o,s){return g(),n("svg",{style:y(e.svgStyle),viewBox:"0 0 24 24"},t[0]||(t[0]=[r("path",{fill:"currentColor",d:"M4 18v-5zm-2-5l2.1-6q.15-.45.538-.725T5.5 6h4.575Q10 6.5 10 7t.075 1H5.85L4.8 11h6.475q.425.6.95 1.113T13.4 13H4v5h14v-4.075q.525-.075 1.025-.225t.975-.375V21q0 .425-.288.713T19 22h-1q-.425 0-.712-.288T17 21v-1H5v1q0 .425-.288.713T4 22H3q-.425 0-.712-.288T2 21zm13.5 4q.625 0 1.063-.437T17 15.5t-.437-1.062T15.5 14t-1.062.438T14 15.5t.438 1.063T15.5 17m-9 0q.625 0 1.063-.437T8 15.5t-.437-1.062T6.5 14t-1.062.438T5 15.5t.438 1.063T6.5 17M17 12q-2.075 0-3.537-1.463T12 7q0-2.05 1.45-3.525T17 2q2.075 0 3.538 1.462T22 7t-1.463 3.538T17 12m-.5-4h1V4h-1zm.5 2q.2 0 .35-.15t.15-.35t-.15-.35T17 9t-.35.15t-.15.35t.15.35t.35.15"},null,-1)]),4)}]]),ii=i({name:"VehicleMinSoc",mixins:[b]},[["render",function(e,t,i,a,o,s){return g(),n("svg",{style:y(e.svgStyle),viewBox:"0 0 32 32"},t[0]||(t[0]=[r("path",{fill:"currentColor",d:"M8,20.167l0,0.666c0,0.556 -0.194,1.028 -0.583,1.418c-0.388,0.389 -0.861,0.583 -1.417,0.582c-0.556,-0.001 -1.028,-0.195 -1.416,-0.582c-0.388,-0.388 -0.582,-0.86 -0.584,-1.418l0,-9.533c0,-0.156 0.011,-0.311 0.033,-0.467c0.023,-0.155 0.056,-0.3 0.1,-0.433l2.5,-7.1c0.178,-0.533 0.5,-0.967 0.967,-1.3c0.467,-0.333 0.989,-0.5 1.567,-0.5l13.666,-0c0.578,-0 1.1,0.167 1.567,0.5c0.467,0.333 0.789,0.767 0.967,1.3l2.5,7.1c0.044,0.133 0.077,0.278 0.1,0.433c0.022,0.156 0.033,0.311 0.033,0.467l0,9.533c0,0.556 -0.194,1.028 -0.583,1.418c-0.388,0.389 -0.861,0.583 -1.417,0.582c-0.556,-0.001 -1.028,-0.195 -1.416,-0.582c-0.388,-0.388 -0.582,-0.86 -0.584,-1.418l0,-0.666l-16,-0Zm-0.267,-12l16.534,-0l-1.4,-4l-13.734,-0l-1.4,4Zm-1.066,2.666l-0,6.667l-0,-6.667Zm3.333,5.334c0.556,-0 1.028,-0.195 1.417,-0.583c0.39,-0.388 0.584,-0.861 0.583,-1.417c-0.001,-0.557 -0.195,-1.029 -0.583,-1.416c-0.387,-0.388 -0.86,-0.583 -1.417,-0.584c-0.557,-0.002 -1.029,0.193 -1.416,0.584c-0.387,0.391 -0.581,0.863 -0.584,1.416c-0.003,0.553 0.192,1.025 0.584,1.417c0.392,0.392 0.864,0.586 1.416,0.583m12,-0c0.556,-0 1.028,-0.195 1.417,-0.583c0.39,-0.388 0.584,-0.861 0.583,-1.417c-0.001,-0.557 -0.195,-1.029 -0.583,-1.416c-0.387,-0.388 -0.86,-0.583 -1.417,-0.584c-0.557,-0.002 -1.029,0.193 -1.416,0.584c-0.387,0.391 -0.581,0.863 -0.584,1.416c-0.003,0.553 0.192,1.025 0.584,1.417c0.392,0.392 0.864,0.586 1.416,0.583m-15.333,1.333l18.666,0l0,-6.667l-18.666,0l-0,6.667Z",style:{"fill-rule":"nonzero"}},null,-1),r("path",{fill:"currentColor",d:"M23.267,25.167l0.666,-0c0.178,-0 0.334,0.066 0.467,0.2c0.133,0.133 0.2,0.289 0.2,0.466l0,1.334c0,0.177 -0.067,0.333 -0.2,0.466c-0.133,0.134 -0.289,0.2 -0.467,0.2l-0.666,0l-0,1.334c-0,0.377 -0.128,0.694 -0.384,0.95c-0.256,0.256 -0.573,0.384 -0.95,0.383l-12,-0c-0.377,-0 -0.694,-0.128 -0.95,-0.384c-0.256,-0.256 -0.384,-0.572 -0.383,-0.949l0,-5.334c0,-0.377 0.128,-0.694 0.384,-0.949c0.256,-0.255 0.572,-0.383 0.949,-0.384l12,-0c0.378,-0 0.695,0.128 0.95,0.384c0.255,0.256 0.383,0.572 0.384,0.949l-0,1.334Zm-12,-0l-0,2.666l-0,-2.666Zm1.54,-0l-0,2.666l7.793,0l0,-2.666l-7.793,-0Z",style:{"fill-rule":"nonzero"}},null,-1)]),4)}]]),ai=i({name:"Welcome",mixins:[b]},[["render",function(e,t,i,a,o,s){return g(),n("svg",{style:y(e.svgStyle),viewBox:"0 0 24 24"},t[0]||(t[0]=[r("path",{fill:"currentColor",d:"M11.875 20q.1 0 .2-.05t.15-.1l8.2-8.2q.3-.3.438-.675t.137-.75q0-.4-.137-.763t-.438-.637l-4.25-4.25q-.275-.3-.638-.437T14.776 4q-.375 0-.75.138t-.675.437l-.275.275l1.85 1.875q.375.35.55.8t.175.95q0 1.05-.712 1.763t-1.763.712q-.5 0-.962-.175t-.813-.525L9.525 8.4L5.15 12.775q-.075.075-.112.163T5 13.125q0 .2.15.363t.35.162q.1 0 .2-.05t.15-.1l3.4-3.4l1.4 1.4l-3.375 3.4q-.075.075-.112.163t-.038.187q0 .2.15.35t.35.15q.1 0 .2-.05t.15-.1l3.4-3.375l1.4 1.4l-3.375 3.4q-.075.05-.112.15t-.038.2q0 .2.15.35t.35.15q.1 0 .188-.038t.162-.112l3.4-3.375l1.4 1.4l-3.4 3.4q-.075.075-.112.162t-.038.188q0 .2.163.35t.362.15m-.025 2q-.925 0-1.637-.612t-.838-1.538q-.85-.125-1.425-.7t-.7-1.425q-.85-.125-1.412-.712T5.15 15.6q-.95-.125-1.55-.825t-.6-1.65q0-.5.188-.962t.537-.813l5.8-5.775L12.8 8.85q.05.075.15.113t.2.037q.225 0 .375-.137t.15-.363q0-.1-.038-.2t-.112-.15L9.95 4.575q-.275-.3-.637-.437T8.55 4q-.375 0-.75.138t-.675.437L3.6 8.125q-.225.225-.375.525t-.2.6t0 .613t.2.587l-1.45 1.45q-.425-.575-.625-1.262T1 9.25t.35-1.362t.825-1.188L5.7 3.175Q6.3 2.6 7.038 2.3T8.55 2t1.513.3t1.312.875l.275.275l.275-.275q.6-.575 1.338-.875t1.512-.3t1.513.3t1.312.875L21.825 7.4q.575.575.875 1.325t.3 1.525t-.3 1.513t-.875 1.312l-8.2 8.175q-.35.35-.812.55t-.963.2M9.375 8"},null,-1)]),4)}]]),ni=i({name:"BatteryBoost",mixins:[b]},[["render",function(e,t,i,a,o,s){return g(),n("svg",{style:y(e.svgStyle),viewBox:"0 0 48 48"},t[0]||(t[0]=[r("g",null,[r("path",{fill:"currentColor",d:"M35,9.996l-3,0l0,-4c0,-1.097 -0.903,-2 -2,-2l-12,0c-1.097,0 -2,0.903 -2,2l0,4l-3,0c-1.097,0 -2,0.903 -2,2l0,30c0,1.097 0.903,2 2,2l22,0c1.097,0 2,-0.903 2,-2l0,-30c0,-1.097 -0.903,-2 -2,-2Zm-15,-2l8,-0l0,2l-8,-0l0,-2Zm13,32l-18,0l0,-26l18,0l0,26Z"}),r("path",{fill:"currentColor",d:"M24.741,18.029c-0.395,-0.103 -0.812,0.073 -1.012,0.43l-5.077,9.05c-0.157,0.278 -0.154,0.619 0.008,0.895c0.162,0.275 0.458,0.445 0.777,0.445l3.727,-0l-0,6.251c-0,0.425 0.297,0.792 0.712,0.88c0.063,0.014 0.126,0.02 0.188,0.02c0.349,-0 0.675,-0.204 0.822,-0.534c0.966,-2.174 1.917,-4.395 2.823,-6.603c0.571,-1.394 1.142,-2.82 1.693,-4.237c0.108,-0.277 0.072,-0.589 -0.096,-0.834c-0.167,-0.245 -0.445,-0.392 -0.742,-0.392l-3.15,-0l-0,-4.5c-0,-0.41 -0.277,-0.767 -0.673,-0.871Z"})],-1)]),4)}]]),oi={name:"VehicleStatus",components:{ClimaterIcon:Gt,DynamicPriceIcon:R,PlanEndIcon:D,PlanStartIcon:Kt,ReconnectIcon:Zt,RfidWaitIcon:Yt,SunDownIcon:Qt,SunUpIcon:Jt,VehicleLimitIcon:Xt,VehicleMinSocIcon:ii,WelcomeIcon:ai,BatteryBoostIcon:ni},mixins:[a],props:{vehicleSoc:Number,batteryBoostActive:Boolean,charging:Boolean,chargingPlanDisabled:Boolean,chargerStatusReason:String,connected:Boolean,currency:String,effectiveLimitSoc:Number,effectivePlanSoc:Number,effectivePlanTime:String,enabled:Boolean,heating:Boolean,minSoc:Number,phaseAction:String,phaseRemainingInterpolated:Number,planActive:Boolean,planOverrun:Number,planProjectedEnd:String,planProjectedStart:String,planTimeUnreachable:Boolean,pvAction:String,pvRemainingInterpolated:Number,smartCostActive:Boolean,smartCostDisabled:Boolean,smartCostLimit:{type:Number,default:null},smartCostNextStart:String,smartCostType:String,tariffCo2:Number,tariffGrid:Number,vehicleClimaterActive:Boolean,vehicleWelcomeActive:Boolean,vehicleLimitSoc:Number},emits:["open-loadpoint-settings","open-minsoc-settings","open-plan-modal"],data:()=>({pvTooltip:null,phaseTooltip:null,planStartTooltip:null,planActiveTooltip:null,minSocTooltip:null,vehicleClimaterTooltip:null,vehicleWelcomeTooltip:null,smartCostTooltip:null,vehicleLimitTooltip:null,awaitingAuthorizationTooltip:null,disconnectRequiredTooltip:null,batteryBoostTooltip:null,interval:null,planProjectedEndDuration:null,smartCostNextStartDuration:null,planProjectedStartDuration:null}),computed:{phaseTimerActive(){return this.phaseRemainingInterpolated>0&&["scale1p","scale3p"].includes(this.phaseAction)},pvTimerActive(){return this.pvRemainingInterpolated>0&&["enable","disable"].includes(this.pvAction)},pvTimerVisible(){return this.pvTimerActive},pvTimerContent(){if(!this.pvTimerVisible)return"";const e="enable"===this.pvAction?"pvEnable":"pvDisable";return this.$t(`main.vehicleStatus.${e}`)},phaseTimerVisible(){return!this.pvTimerActive&&this.charging&&this.phaseTimerActive},phaseIconClass(){return"scale1p"===this.phaseAction?"phaseUp":"phaseDown"},phaseTimerContent(){return this.phaseTimerVisible?this.$t(`main.vehicleStatus.${this.phaseAction}`):""},vehicleLimitVisible(){const e=this.effectiveLimitSoc||100;return this.connected&&this.vehicleLimitSoc>0&&this.vehicleLimitSoc<e},awaitingAuthorizationVisible(){return"waitingforauthorization"===this.chargerStatusReason},awaitingAuthorizationTooltipContent(){return this.awaitingAuthorizationVisible?this.$t("main.vehicleStatus.awaitingAuthorization"):""},disconnectRequiredVisible(){return"disconnectrequired"===this.chargerStatusReason},disconnectRequiredTooltipContent(){return this.disconnectRequiredVisible?this.$t("main.vehicleStatus.disconnectRequired"):""},vehicleLimitTooltipContent(){return this.vehicleLimitVisible?this.vehicleLimitReached?this.$t("main.vehicleStatus.vehicleLimitReached"):this.vehicleLimitWarning?this.$t("main.targetCharge.targetIsAboveVehicleLimit"):this.$t("main.vehicleStatus.vehicleLimit"):""},minSocVisible(){return this.connected&&this.minSoc>0&&this.vehicleSoc<this.minSoc},minSocTooltipContent(){return this.minSocVisible?this.$t("main.vehicleStatus.minCharge",{soc:this.fmtPercentage(this.minSoc)}):""},vehicleLimitReached(){return!this.charging&&this.vehicleSoc&&this.vehicleLimitSoc&&this.vehicleSoc>=this.vehicleLimitSoc-1},vehicleLimitWarning(){return this.effectivePlanSoc>this.vehicleLimitSoc},vehicleLimitClass(){return this.vehicleLimitWarning?"text-warning":""},vehicleLimitIconComponent(){return this.vehicleLimitReached?ei:this.vehicleLimitWarning?ti:Xt},planStartVisible(){return this.planProjectedStart&&!this.planActive&&!this.chargingPlanDisabled},batteryBoostVisible(){return this.batteryBoostActive},batteryBoostTooltipContent(){return this.batteryBoostVisible?this.$t("main.vehicleStatus.batteryBoost"):""},planStartTooltipContent(){return this.planStartVisible?this.$t("main.vehicleStatus.targetChargePlanned",{duration:this.planProjectedStartDuration}):""},planActiveVisible(){return this.planProjectedEnd&&this.planActive&&!this.chargingPlanDisabled},planActiveClass(){return this.planTimeUnreachable?"text-warning":"text-primary"},planActiveTooltipContent(){return this.planActiveVisible?this.planTimeUnreachable?this.$t("main.targetCharge.notReachableInTime",{overrun:this.fmtDuration(this.planOverrun,!0,"h")}):this.$t("main.vehicleStatus.targetChargeActive",{duration:this.planProjectedEndDuration}):""},smartCostVisible(){return null!==this.smartCostLimit},smartCostTooltipContent(){if(!this.smartCostVisible)return"";const e="main.vehicleStatus."+(this.smartCostPrice?"cheap":"clean");return this.smartCostNowVisible?this.$t(`${e}EnergyCharging`):this.smartCostNextStart?this.$t(`${e}EnergyNextStart`,{duration:this.smartCostNextStartDuration}):this.$t(`${e}EnergySet`)},smartCostPrice(){return this.smartCostType!==N},smartCostNowVisible(){return this.smartCostPrice?this.tariffGrid<=this.smartCostLimit:this.tariffCo2<=this.smartCostLimit},smartCostNow(){return this.smartCostPrice?this.fmtPricePerKWh(this.tariffGrid,this.currency,!0):this.fmtCo2Short(this.tariffCo2)},smartCostLimitFmt(){return this.smartCostPrice?this.fmtPricePerKWh(this.smartCostLimit,this.currency,!0):this.fmtCo2Short(this.smartCostLimit)},smartCostClass(){return this.smartCostDisabled?"opacity-25":this.smartCostActive?"text-primary":""},vehicleClimaterTooltipContent(){return this.vehicleClimaterActive?this.$t("main.vehicleStatus.climating"):""},vehicleWelcomeTooltipContent(){return this.vehicleWelcomeActive?this.$t("main.vehicleStatus.welcome"):""},chargerStatus(){const e=(e,t)=>{if(this.heating){const i=`main.heatingStatus.${e}`;if(this.$te(i,U))return this.$t(i,t)}return this.$t(`main.vehicleStatus.${e}`,t)};return this.connected?this.enabled&&!this.charging?this.vehicleLimitReached?e("finished"):e("waitForVehicle"):this.charging?e("charging"):e("connected"):e("disconnected")}},watch:{planActiveTooltipContent(){this.$nextTick(this.updatePlanActiveTooltip)},planStartTooltipContent(){this.$nextTick(this.updatePlanStartTooltip)},minSocTooltipContent(){this.$nextTick(this.updateMinSocTooltip)},phaseTimerContent(){this.$nextTick(this.updatePhaseTooltip)},pvTimerContent(){this.$nextTick(this.updatePvTooltip)},vehicleClimaterTooltipContent(){this.$nextTick(this.updateVehicleClimaterTooltip)},vehicleWelcomeTooltipContent(){this.$nextTick(this.updateVehicleWelcomeTooltip)},smartCostTooltipContent(){this.$nextTick(this.updateSmartCostTooltip)},vehicleLimitTooltipContent(){this.$nextTick(this.updateVehicleLimitTooltip)},awaitingAuthorizationTooltipContent(){this.$nextTick(this.updateAwaitingAuthorizationTooltip)},disconnectRequiredTooltipContent(){this.$nextTick(this.updateDisconnectRequiredTooltip)},batteryBoostTooltipContent(){this.$nextTick(this.updateBatteryBoostTooltip)},planProjectedStart(){this.updateDurations()},planProjectedEnd(){this.updateDurations()},smartCostNextStart(){this.updateDurations()}},mounted(){this.updatePlanStartTooltip(),this.updatePlanActiveTooltip(),this.updateMinSocTooltip(),this.updatePhaseTooltip(),this.updatePvTooltip(),this.updateVehicleClimaterTooltip(),this.updateVehicleWelcomeTooltip(),this.updateSmartCostTooltip(),this.updateVehicleLimitTooltip(),this.updateAwaitingAuthorizationTooltip(),this.updateDisconnectRequiredTooltip(),this.updateDurations(),this.interval=setInterval(this.updateDurations,6e4),this.updateBatteryBoostTooltip()},beforeUnmount(){clearInterval(this.interval)},methods:{updateDurations(){this.planProjectedStart&&(this.planProjectedStartDuration=this.fmtDurationToTime(new Date(this.planProjectedStart))),this.planProjectedEnd&&(this.planProjectedEndDuration=this.fmtDurationToTime(new Date(this.planProjectedEnd))),this.smartCostNextStart&&(this.smartCostNextStartDuration=this.fmtDurationToTime(new Date(this.smartCostNextStart)))},openLoadpointSettings(){this.$emit("open-loadpoint-settings")},openMinSocSettings(){this.minSocTooltip?.hide(),this.$emit("open-minsoc-settings")},planStartClicked(){this.planStartTooltip?.hide(),this.$emit("open-plan-modal")},planActiveClicked(){this.planActiveTooltip?.hide(),this.$emit("open-plan-modal")},vehicleLimitClicked(){this.vehicleLimitWarning&&(this.vehicleLimitTooltip?.hide(),this.$emit("open-plan-modal"))},smartCostClicked(){this.openLoadpointSettings(),this.smartCostTooltip?.hide()},batteryBoostClicked(){this.batteryBoostTooltip?.hide(),this.openLoadpointSettings()},updatePvTooltip(){this.pvTooltip=this.updateTooltip(this.pvTooltip,this.pvTimerContent,this.$refs.pvTimer)},updatePhaseTooltip(){this.phaseTooltip=this.updateTooltip(this.phaseTooltip,this.phaseTimerContent,this.$refs.phaseTimer)},updatePlanStartTooltip(){this.planStartTooltip=this.updateTooltip(this.planStartTooltip,this.planStartTooltipContent,this.$refs.planStart,!0)},updatePlanActiveTooltip(){this.planActiveTooltip=this.updateTooltip(this.planActiveTooltip,this.planActiveTooltipContent,this.$refs.planActive,!0)},updateMinSocTooltip(){this.minSocTooltip=this.updateTooltip(this.minSocTooltip,this.minSocTooltipContent,this.$refs.minSoc,!0)},updateVehicleClimaterTooltip(){this.vehicleClimaterTooltip=this.updateTooltip(this.vehicleClimaterTooltip,this.vehicleClimaterTooltipContent,this.$refs.vehicleClimater)},updateBatteryBoostTooltip(){this.batteryBoostTooltip=this.updateTooltip(this.batteryBoostTooltip,this.batteryBoostTooltipContent,this.$refs.batteryBoost)},updateVehicleWelcomeTooltip(){this.vehicleWelcomeTooltip=this.updateTooltip(this.vehicleWelcomeTooltip,this.vehicleWelcomeTooltipContent,this.$refs.vehicleWelcome)},updateSmartCostTooltip(){this.smartCostTooltip=this.updateTooltip(this.smartCostTooltip,this.smartCostTooltipContent,this.$refs.smartCost,!0)},updateVehicleLimitTooltip(){this.vehicleLimitTooltip=this.updateTooltip(this.vehicleLimitTooltip,this.vehicleLimitTooltipContent,this.$refs.vehicleLimit,!0)},updateAwaitingAuthorizationTooltip(){this.awaitingAuthorizationTooltip=this.updateTooltip(this.awaitingAuthorizationTooltip,this.awaitingAuthorizationTooltipContent,this.$refs.awaitingAuthorization)},updateDisconnectRequiredTooltip(){this.updateTooltip(this.disconnectRequiredTooltip,this.disconnectRequiredTooltipContent,this.$refs.disconnectRequired)},updateTooltip:function(e,t,i,a=!1){if(!t||!i)return void(e&&e.dispose());let n=e;return n||(n=new oe(i,{title:" ",trigger:a?"hover":"hover focus"})),n.setContent({".tooltip-inner":t}),n}}},ri={class:"d-flex justify-content-between gap-3 evcc-gray align-items-start flex-wrap",style:{"min-height":"24px"},"data-testid":"vehicle-status"},si={class:"charger-status","data-testid":"vehicle-status-charger"},li={class:"d-flex flex-wrap justify-content-end gap-3 flex-grow-1"},ci={key:0,ref:"pvTimer",class:"entry","data-testid":"vehicle-status-pvtimer","data-bs-toggle":"tooltip"},di={class:"tabular"},hi={key:1,ref:"phaseTimer",class:"entry","data-testid":"vehicle-status-phasetimer","data-bs-toggle":"tooltip"},ui={class:"tabular"},mi=["role"],pi={key:4,ref:"vehicleClimater","data-bs-toggle":"tooltip",class:"entry","data-testid":"vehicle-status-climater"},gi={key:5,ref:"vehicleWelcome","data-bs-toggle":"tooltip",class:"entry","data-testid":"vehicle-status-welcome"},fi={key:6,ref:"awaitingAuthorization","data-bs-toggle":"tooltip",class:"entry","data-testid":"vehicle-status-awaiting-authorization"},vi={key:7,ref:"disconnectRequired",class:"entry text-warning","data-bs-toggle":"tooltip","data-testid":"vehicle-status-disconnect-required"},bi={key:1},yi={key:0},wi={class:"text-decoration-underline"},Si={key:1},Pi=i(oi,[["render",function(e,t,i,a,o,s){const d=p("SunUpIcon"),h=p("SunDownIcon"),m=p("VehicleMinSocIcon"),b=p("ClimaterIcon"),y=p("WelcomeIcon"),w=p("RfidWaitIcon"),S=p("ReconnectIcon"),P=p("DynamicPriceIcon"),x=p("BatteryBoostIcon"),T=p("PlanEndIcon"),I=p("PlanStartIcon");return g(),n("div",ri,[r("div",si,c(s.chargerStatus),1),r("div",li,[s.pvTimerVisible?(g(),n("div",ci,["enable"===i.pvAction?(g(),C(d,{key:0})):(g(),C(h,{key:1})),r("div",di,c(e.fmtDuration(i.pvRemainingInterpolated)),1)],512)):s.phaseTimerVisible?(g(),n("div",hi,[r("shopicon-regular-angledoublerightsmall",{class:l(s.phaseIconClass)},null,2),r("div",ui,c(e.fmtDuration(i.phaseRemainingInterpolated)),1)],512)):f("",!0),s.minSocVisible?(g(),n("button",{key:2,ref:"minSoc",type:"button",class:"entry text-danger text-decoration-underline","data-testid":"vehicle-status-minsoc","data-bs-toggle":"tooltip",onClick:t[0]||(t[0]=(...e)=>s.openMinSocSettings&&s.openMinSocSettings(...e))},[u(m),v(" "+c(e.fmtPercentage(i.minSoc)),1)],512)):s.vehicleLimitVisible?(g(),n("div",{key:3,ref:"vehicleLimit",class:l(["entry",s.vehicleLimitClass]),"data-bs-toggle":"tooltip","data-testid":"vehicle-status-limit",role:s.vehicleLimitWarning?"button":null,onClick:t[1]||(t[1]=(...e)=>s.vehicleLimitClicked&&s.vehicleLimitClicked(...e))},[(g(),C(k(s.vehicleLimitIconComponent))),v(" "+c(e.fmtPercentage(i.vehicleLimitSoc)),1)],10,mi)):f("",!0),i.vehicleClimaterActive?(g(),n("div",pi,[u(b)],512)):f("",!0),i.vehicleWelcomeActive?(g(),n("div",gi,[u(y)],512)):f("",!0),s.awaitingAuthorizationVisible?(g(),n("div",fi,[u(w)],512)):f("",!0),s.disconnectRequiredVisible?(g(),n("div",vi,[u(S)],512)):f("",!0),s.smartCostVisible?(g(),n("button",{key:8,ref:"smartCost",type:"button",class:l(["entry",s.smartCostClass]),"data-testid":"vehicle-status-smartcost","data-bs-toggle":"tooltip","data-bs-trigger":"hover",onClick:t[2]||(t[2]=(...e)=>s.smartCostClicked&&s.smartCostClicked(...e))},[s.smartCostPrice?(g(),C(P,{key:0})):(g(),n("shopicon-regular-eco1",bi)),r("div",null,[s.smartCostNowVisible?(g(),n("span",yi,c(s.smartCostNow),1)):f("",!0),t[6]||(t[6]=v(" ≤ ")),r("span",wi,c(s.smartCostLimitFmt),1),i.smartCostNextStart?(g(),n("span",Si," ("+c(e.fmtAbsoluteDate(new Date(i.smartCostNextStart)))+") ",1)):f("",!0)])],2)):f("",!0),s.batteryBoostVisible?(g(),n("button",{key:9,ref:"batteryBoost",type:"button",class:"entry","data-testid":"vehicle-status-batteryboost","data-bs-toggle":"tooltip",onClick:t[3]||(t[3]=(...e)=>s.batteryBoostClicked&&s.batteryBoostClicked(...e))},[u(x)],512)):f("",!0),s.planActiveVisible?(g(),n("button",{key:10,ref:"planActive",type:"button",class:l(["entry",s.planActiveClass]),"data-testid":"vehicle-status-planactive","data-bs-toggle":"tooltip",onClick:t[4]||(t[4]=(...e)=>s.planActiveClicked&&s.planActiveClicked(...e))},[u(T),r("span",null,c(e.fmtAbsoluteDate(new Date(i.planProjectedEnd))),1)],2)):s.planStartVisible?(g(),n("button",{key:11,ref:"planStart",type:"button",class:"entry","data-testid":"vehicle-status-planstart","data-bs-toggle":"tooltip",onClick:t[5]||(t[5]=(...e)=>s.planStartClicked&&s.planStartClicked(...e))},[u(I),v(" "+c(e.fmtAbsoluteDate(new Date(i.planProjectedStart))),1)],512)):f("",!0)])])}],["__scopeId","data-v-94e003cd"]]),xi={name:"ChargingPlanPreview",components:{TariffChart:q},mixins:[a],props:{duration:Number,power:Number,rates:Array,plan:Array,smartCostType:String,targetTime:Date,currency:String},data:()=>({activeIndex:null,startTime:new Date}),computed:{endTime(){if(!this.plan?.length)return null;const e=this.plan[this.plan.length-1].end;return e?new Date(e):null},timeWarning(){return!(!this.targetTime||!this.endTime)&&this.targetTime<this.endTime},planDuration(){return this.fmtDuration(this.duration)},fmtPower(){return this.duration>0&&this.power>0?`@ ${this.fmtW(this.power)}`:null},isCo2(){return this.smartCostType===N},hasTariff(){return this.rates?.length>1},avgPrice(){let e=0,t=0;return this.convertDates(this.plan).forEach((i=>{const a=(i.end.getTime()-i.start.getTime())/36e5;i.price&&(e+=a,t+=a*i.price)})),e?t/e:void 0},fmtAvgPrice(){if(!this.targetTime||0===this.duration)return"—";const e=this.activeSlot?this.activeSlot.price:this.avgPrice;return void 0===e?this.$t("main.targetChargePlan.unknownPrice"):this.isCo2?this.fmtCo2Medium(e):this.fmtPricePerKWh(e,this.currency)},activeSlot(){return this.slots[this.activeIndex]},activeSlotName(){if(this.activeSlot){const{day:e,startHour:t,endHour:i}=this.activeSlot,a=`${t}–${i}`;return this.$t("main.targetChargePlan.timeRange",{day:e,range:a})}return null},targetHourOffset(){if(!this.targetTime)return null;const e=new Date(this.startTime);return e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),(this.targetTime.getTime()-e.getTime())/36e5},targetText(){return this.targetTime?this.fmtWeekdayTime(this.targetTime):null},slots(){const e=[],t=this.convertDates(this.rates),i=this.convertDates(this.plan);for(let a=0;a<39;a++){const n=new Date(this.startTime.getTime()+36e5*a),o=n.getHours();n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0);const r=new Date(n.getTime());r.setHours(o+1);const s=r.getHours(),l=this.weekdayShort(n),c=this.targetTime&&this.targetTime<=n,d=this.findSlotInRange(n,r,t)?.price,h=n<=this.targetTime&&r>this.targetTime,u=null!=this.findSlotInRange(n,r,i),m=u&&this.targetTime&&r>this.targetTime&&this.targetTime<this.endTime;e.push({day:l,price:d,startHour:o,endHour:s,charging:u,toLate:c,warning:m,isTarget:h})}return e}},watch:{rates(){this.startTime=new Date}},methods:{convertDates:e=>e?.length?e.map((e=>({start:new Date(e.start),end:new Date(e.end),price:e.price}))):[],findSlotInRange:(e,t,i)=>i.find((i=>i.start.getTime()<e.getTime()?i.end.getTime()>e.getTime():i.start.getTime()<t.getTime())),slotHovered(e){this.activeIndex=e}}},Ci={class:"plan"},Ti={class:"justify-content-between mb-2 d-flex justify-content-between"},ki={class:"text-start"},Ii={class:"label"},$i={key:0,class:"extraValue text-nowrap ms-sm-1"},Li={key:0,class:"text-end"},Ai={class:"label"},Ni={key:0},Bi={key:1},Vi={key:2},Mi={class:"value text-primary"},Ei=i(xi,[["render",function(e,t,i,a,o,s){const d=p("TariffChart");return g(),n("div",Ci,[r("div",Ti,[r("div",ki,[r("div",Ii,c(e.$t("main.targetChargePlan.chargeDuration")),1),r("div",{class:l("value  d-sm-flex align-items-baseline "+(s.timeWarning?"text-warning":"text-primary"))},[r("div",null,c(s.planDuration),1),s.fmtPower?(g(),n("div",$i,c(s.fmtPower),1)):f("",!0)],2)]),s.hasTariff?(g(),n("div",Li,[r("div",Ai,[s.activeSlot?(g(),n("span",Ni,c(s.activeSlotName),1)):s.isCo2?(g(),n("span",Bi,c(e.$t("main.targetChargePlan.co2Label")),1)):(g(),n("span",Vi,c(e.$t("main.targetChargePlan.priceLabel")),1))]),r("div",Mi,c(s.fmtAvgPrice),1)])):f("",!0)]),u(d,{slots:s.slots,"target-text":s.targetText,"target-offset":s.targetHourOffset,onSlotHovered:s.slotHovered},null,8,["slots","target-text","target-offset","onSlotHovered"])])}],["__scopeId","data-v-f1cf5626"]]);function Di(e){return e<.1?.005:e<1?.05:e<2?.1:e<5?.25:e<10?.5:e<25?1:e<50?2:5}function Ri(e,t,i,a){if(0===e)return a;const n=t>=.1,o=n&&t<1?1:0;return i(1e3*e,n?S.KW:S.W,!0,o)}function Ui(e,t){return t?Math.round(e*t):null}function qi(e,t,i,a,n,o){const r=Di(t),s=[];for(let l=0;l<=t;l+=r){let t=Ri(l,r,a,o);const c=l<e/1e3&&0!==l,d=Ui(l,i);d&&(t+=` (+${n(d)})`);const h=1*l.toFixed(3);s.push({energy:h,text:t,disabled:c})}return s}const Oi="last_target_time",Fi="last_soc_goal",Wi="last_energy_goal",_i={name:"ChargingPlanStaticSettings",mixins:[a],props:{id:String,soc:Number,energy:Number,time:String,rangePerSoc:Number,socPerKwh:Number,capacity:Number,socBasedPlanning:Boolean,multiplePlans:Boolean},emits:["static-plan-updated","static-plan-removed","plan-preview"],data:function(){return{selectedDay:null,selectedTime:null,selectedSoc:this.soc,selectedEnergy:this.energy,active:!1}},computed:{selectedDate:function(){return new Date(`${this.selectedDay}T${this.selectedTime||"00:00"}`)},socOptions:function(){return Array.from(Array(20).keys()).map((e=>5+5*e)).map(this.socOption)},energyOptions:function(){return qi(0,this.capacity||100,this.socPerKwh,this.fmtWh,this.fmtPercentage,"-").slice(1)},originalData:function(){return this.isNew?{}:{soc:this.soc,energy:this.energy,day:this.fmtDayString(new Date(this.time)),time:this.fmtTimeString(new Date(this.time))}},dataChanged:function(){const e=this.originalData.day!=this.selectedDay||this.originalData.time!=this.selectedTime,t=this.socBasedPlanning?this.originalData.soc!=this.selectedSoc:this.originalData.energy!=this.selectedEnergy;return e||t},isNew:function(){return!(this.time||this.soc&&this.energy)},timeInThePast:function(){return new Date>=this.selectedDate}},watch:{time(){this.initInputFields()},soc(){this.soc&&(this.selectedSoc=this.soc)},energy(){this.energy&&(this.selectedEnergy=this.energy)},isNew(e){this.active=!e}},mounted(){this.initInputFields(),this.preview()},methods:{formId:function(e){return`chargingplan-${this.id}-${e}`},socOption:function(e){return{value:e,name:this.fmtSocOption(e,this.rangePerSoc,O())}},initInputFields:function(){this.selectedSoc||(this.selectedSoc=window.localStorage[Fi]||100),this.selectedEnergy||(this.selectedEnergy=window.localStorage[Wi]||this.capacity||10);let e=this.time;if(!e){if(this.selectedDay&&this.selectedTime)return;e=this.defaultTime()}const t=new Date(e);this.selectedDay=this.fmtDayString(t),this.selectedTime=this.fmtTimeString(t)},dayOptions:function(){const e=[],t=new Date,i=[this.$t("main.targetCharge.today"),this.$t("main.targetCharge.tomorrow")];for(let a=0;a<7;a++){const n=t.toLocaleDateString(this.$i18n?.locale,{day:"numeric",month:"short"}),o=i[a]||t.toLocaleDateString(this.$i18n?.locale,{weekday:"short"});e.push({value:this.fmtDayString(t),name:`${n} (${o})`}),t.setDate(t.getDate()+1)}return e},update:function(){try{const e=this.selectedDate.getHours(),t=this.selectedDate.getMinutes();window.localStorage[Oi]=`${e}:${t}`,this.selectedSoc&&(window.localStorage[Fi]=this.selectedSoc),this.selectedEnergy&&(window.localStorage[Wi]=this.selectedEnergy)}catch(e){console.warn(e)}this.$emit("static-plan-updated",{time:this.selectedDate,soc:this.selectedSoc,energy:this.selectedEnergy})},preview:function(e=!1){if(!this.isNew&&!e)return!1;this.$emit("plan-preview",{time:this.selectedDate,soc:this.selectedSoc,energy:this.selectedEnergy})},toggle:function(e){const{checked:t}=e.target;t?this.update():(this.$emit("static-plan-removed"),this.preview(!0)),this.active=t},defaultTime:function(){const[e,t]=(window.localStorage[Oi]||"7:00").split(":"),i=new Date;return i.setSeconds(0),i.setMinutes(t),i.setHours(e),i<new Date&&i.setDate(i.getDate()+1),i}}},zi={class:"mb-5 mb-lg-4","data-testid":"plan-entry"},ji={key:0,class:"d-flex gap-3 align-items-baseline d-lg-none mb-4 fw-normal evcc-gray","data-testid":"repeating-plan-title"},Hi={class:"text-uppercase fs-6"},Gi={class:"row d-none d-lg-flex mb-2"},Ki={key:0,class:"plan-id d-none d-lg-flex"},Zi=["for"],Yi={class:"col-6 col-lg-2"},Qi=["for"],Ji={class:"col-6 col-lg-3"},Xi=["for"],ea={class:"col-6 col-lg-1"},ta=["for"],ia={class:"row"},aa={key:0,class:"plan-id d-none d-lg-flex align-items-center justify-content-start fs-6"},na={class:"col-5 d-lg-none col-form-label"},oa=["for"],ra=["id"],sa=["value"],la={class:"col-5 d-lg-none col-form-label"},ca=["for"],da={class:"col-7 col-lg-2 mb-2 mb-lg-0"},ha=["id"],ua={class:"col-5 d-lg-none col-form-label"},ma=["for"],pa={class:"col-7 col-lg-3 mb-2 mb-lg-0"},ga=["id"],fa=["value"],va=["id"],ba=["value"],ya={class:"col-5 d-lg-none col-form-label"},wa=["for"],Sa={class:"col-2 col-lg-1 d-flex align-items-center"},Pa={class:"form-check form-switch"},xa=["id","checked","disabled"],Ca={class:"col-5 col-lg-2 d-flex align-items-center"},Ta=["disabled"],ka={class:"mb-0","data-testid":"plan-entry-warnings"},Ia={key:0,class:"d-block text-danger my-2"},$a=i(_i,[["render",function(e,t,i,a,s,u){return g(),n("div",zi,[i.multiplePlans?(g(),n("h5",ji,[r("span",Hi,c(`${e.$t("main.chargingPlan.planNumber",{number:"#1"})}`),1)])):f("",!0),r("div",Gi,[i.multiplePlans?(g(),n("div",Ki)):f("",!0),r("div",{class:l(["col-6",i.multiplePlans?"col-lg-3":"col-lg-4"])},[r("label",{for:u.formId("day")},c(e.$t("main.chargingPlan.day")),9,Zi)],2),r("div",Yi,[r("label",{for:u.formId("time")},c(e.$t("main.chargingPlan.time")),9,Qi)]),r("div",Ji,[r("label",{for:u.formId("goal")},c(e.$t("main.chargingPlan.goal")),9,Xi)]),r("div",ea,[r("label",{for:u.formId("active")},c(e.$t("main.chargingPlan.active")),9,ta)])]),r("div",ia,[i.multiplePlans?(g(),n("div",aa," #1 ")):f("",!0),r("div",na,[r("label",{for:u.formId("day")},c(e.$t("main.chargingPlan.day")),9,oa)]),r("div",{class:l(["col-7",i.multiplePlans?"col-lg-3":"col-lg-4","mb-2","mb-lg-0"])},[o(r("select",{id:u.formId("day"),"onUpdate:modelValue":t[0]||(t[0]=t=>e.selectedDay=t),class:"form-select me-2","data-testid":"static-plan-day",onChange:t[1]||(t[1]=e=>u.preview())},[(g(!0),n(d,null,h(u.dayOptions(),(e=>(g(),n("option",{key:e.value,value:e.value},c(e.name),9,sa)))),128))],40,ra),[[F,e.selectedDay]])],2),r("div",la,[r("label",{for:u.formId("day")},c(e.$t("main.chargingPlan.time")),9,ca)]),r("div",da,[o(r("input",{id:u.formId("time"),"onUpdate:modelValue":t[2]||(t[2]=t=>e.selectedTime=t),type:"time",class:"form-control mx-0",step:300,"data-testid":"static-plan-time",required:"",onChange:t[3]||(t[3]=e=>u.preview())},null,40,ha),[[W,e.selectedTime]])]),r("div",ua,[r("label",{for:u.formId("goal")},c(e.$t("main.chargingPlan.goal")),9,ma)]),r("div",pa,[i.socBasedPlanning?o((g(),n("select",{key:0,id:u.formId("goal"),"onUpdate:modelValue":t[4]||(t[4]=t=>e.selectedSoc=t),class:"form-select mx-0","data-testid":"static-plan-soc",onChange:t[5]||(t[5]=e=>u.preview())},[(g(!0),n(d,null,h(u.socOptions,(e=>(g(),n("option",{key:e.value,value:e.value},c(e.name),9,fa)))),128))],40,ga)),[[F,e.selectedSoc]]):o((g(),n("select",{key:1,id:u.formId("goal"),"onUpdate:modelValue":t[6]||(t[6]=t=>e.selectedEnergy=t),class:"form-select mx-0","data-testid":"static-plan-energy",onChange:t[7]||(t[7]=e=>u.preview())},[(g(!0),n(d,null,h(u.energyOptions,(e=>(g(),n("option",{key:e.energy,value:e.energy},c(e.text),9,ba)))),128))],40,va)),[[F,e.selectedEnergy]])]),r("div",ya,[r("label",{for:u.formId("active")},c(e.$t("main.chargingPlan.active")),9,wa)]),r("div",Sa,[r("div",Pa,[r("input",{id:u.formId("active"),class:"form-check-input",type:"checkbox",role:"switch","data-testid":"static-plan-active",checked:!u.isNew,disabled:u.timeInThePast,tabindex:"0",onChange:t[8]||(t[8]=(...e)=>u.toggle&&u.toggle(...e))},null,40,xa)])]),r("div",Ca,[u.dataChanged&&!u.isNew?(g(),n("button",{key:0,type:"button",class:"btn btn-sm btn-outline-primary border-0 text-decoration-underline","data-testid":"static-plan-apply",disabled:u.timeInThePast,tabindex:"0",onClick:t[9]||(t[9]=(...e)=>u.update&&u.update(...e))},c(e.$t("main.chargingPlan.update")),9,Ta)):f("",!0)])]),r("p",ka,[u.timeInThePast?(g(),n("span",Ia,c(e.$t("main.targetCharge.targetIsInThePast")),1)):f("",!0)])])}],["__scopeId","data-v-ad0df20e"]]);class La extends HTMLElement{connectedCallback(){this.setAttribute("data-shopicon",!0),this.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path d="M0 0h48v48H0z" fill="none"/><path d="M18 20h4v16h-4zM26 20h4v16h-4z"/><path d="M42 12h-8V8c0-2.2-1.8-4-4-4H18c-2.2 0-4 1.8-4 4v4H6v4h4v24c0 2.2 1.8 4 4 4h20c2.2 0 4-1.8 4-4V16h4v-4zM18 8h12v4H18V8zm16 32H14V16h20v24z"/></svg>'}}window.customElements.define("shopicon-regular-trash",La);const Aa={name:"ChargingPlanRepeatingSettings",components:{MultiSelect:le},mixins:[a],props:{number:Number,weekdays:{type:Array,default:()=>[]},time:String,tz:String,soc:Number,showHeader:Boolean,active:Boolean,rangePerSoc:Number,formIdPrefix:String},emits:["updated","removed"],data:function(){return{selectedWeekdays:this.weekdays,selectedTime:this.time,selectedSoc:this.soc,selectedActive:this.active}},computed:{dataChanged:function(){return!ce(this.weekdays,this.selectedWeekdays)||this.time!==this.selectedTime||this.soc!==this.selectedSoc||this.active!==this.selectedActive},showApply:function(){return this.dataChanged&&this.selectedActive},weekdaysLabel:function(){return this.getShortenedWeekdaysLabel(this.selectedWeekdays)},socOptions:function(){return Array.from(Array(20).keys()).map((e=>5+5*e)).map(this.socOption)},dayOptions:function(){return this.getWeekdaysList("long")}},watch:{weekdays(e,t){ce(e,t)||(this.selectedWeekdays=e)},time(e){this.selectedTime=e},soc(e){this.selectedSoc=e},active(e){this.selectedActive=e}},methods:{changeSelectedWeekdays:function(e){this.selectedWeekdays=e,this.update()},formId:function(e){return`${this.formIdPrefix}-${this.number}-${e}`},socOption:function(e){return{value:e,name:this.fmtSocOption(e,this.rangePerSoc,O())}},update:function(e=!1){const t={weekdays:this.selectedWeekdays,time:this.selectedTime,soc:this.selectedSoc,tz:this.tz,active:this.selectedActive};!e&&this.selectedActive||this.$emit("updated",t)}}},Na={class:"d-flex gap-3 align-items-baseline d-lg-none mb-4 fw-normal evcc-gray","data-testid":"repeating-plan-title"},Ba={class:"text-uppercase fs-6"},Va={key:0,class:"row d-none d-lg-flex mb-2"},Ma={class:"col-6 col-lg-3"},Ea=["for"],Da={class:"col-6 col-lg-2"},Ra=["for"],Ua={class:"col-6 col-lg-3"},qa=["for"],Oa={class:"col-6 col-lg-1"},Fa=["for"],Wa={class:"row"},_a={class:"plan-id d-none d-lg-flex align-items-center justify-content-start fs-6"},za={class:"col-5 d-lg-none col-form-label"},ja=["for"],Ha={class:"col-7 col-lg-3 mb-2 mb-lg-0"},Ga={class:"col-5 d-lg-none col-form-label"},Ka=["for"],Za={class:"col-7 col-lg-2 mb-2 mb-lg-0"},Ya=["id"],Qa={class:"col-5 d-lg-none col-form-label"},Ja=["for"],Xa={class:"col-7 col-lg-3 mb-2 mb-lg-0"},en=["id"],tn=["value"],an={class:"col-5 d-lg-none col-form-label"},nn=["for"],on={class:"col-2 col-lg-1 d-flex align-items-center"},rn={class:"form-check form-switch"},sn=["id","checked"],ln={class:"col-5 col-lg-2 d-flex align-items-center"},cn=[1,2,3,4,5],dn={class:"d-flex align-items-center pb-4"},hn=i({name:"ChargingPlansRepeatingSettings",components:{ChargingPlanRepeatingSettings:i(Aa,[["render",function(e,t,i,a,s,l){const b=p("MultiSelect");return g(),n("div",null,[r("h5",Na,[r("span",Ba,c(`${e.$t("main.chargingPlan.planNumber",{number:`#${i.number}`})}`),1),r("small",null,c(e.$t("main.chargingPlan.repeating")),1)]),i.showHeader?(g(),n("div",Va,[t[8]||(t[8]=r("div",{class:"plan-id d-none d-lg-flex"},null,-1)),r("div",Ma,[r("label",{for:l.formId("weekdays")},c(e.$t("main.chargingPlan.weekdays")),9,Ea)]),r("div",Da,[r("label",{for:l.formId("time")},c(e.$t("main.chargingPlan.time")),9,Ra)]),r("div",Ua,[r("label",{for:l.formId("goal")},c(e.$t("main.chargingPlan.goal")),9,qa)]),r("div",Oa,[r("label",{for:l.formId("active")},c(e.$t("main.chargingPlan.active")),9,Fa)])])):f("",!0),r("div",Wa,[r("div",_a," #"+c(i.number),1),r("div",za,[r("label",{for:l.formId("weekdays")},c(e.$t("main.chargingPlan.weekdays")),9,ja)]),r("div",Ha,[u(b,{id:l.formId("weekdays"),value:e.selectedWeekdays,options:l.dayOptions,selectAllLabel:e.$t("main.chargingPlan.selectAll"),"data-testid":"repeating-plan-weekdays","onUpdate:modelValue":l.changeSelectedWeekdays},{default:m((()=>[v(c(l.weekdaysLabel),1)])),_:1},8,["id","value","options","selectAllLabel","onUpdate:modelValue"])]),r("div",Ga,[r("label",{for:l.formId("time")},c(e.$t("main.chargingPlan.time")),9,Ka)]),r("div",Za,[o(r("input",{id:l.formId("time"),"onUpdate:modelValue":t[0]||(t[0]=t=>e.selectedTime=t),type:"time",class:"form-control mx-0 text-start",step:300,"data-testid":"repeating-plan-time",required:"",onChange:t[1]||(t[1]=e=>l.update())},null,40,Ya),[[W,e.selectedTime]])]),r("div",Qa,[r("label",{for:l.formId("goal")},c(e.$t("main.chargingPlan.goal")),9,Ja)]),r("div",Xa,[o(r("select",{id:l.formId("goal"),"onUpdate:modelValue":t[2]||(t[2]=t=>e.selectedSoc=t),class:"form-select mx-0","data-testid":"repeating-plan-soc",onChange:t[3]||(t[3]=e=>l.update())},[(g(!0),n(d,null,h(l.socOptions,(e=>(g(),n("option",{key:e.value,value:e.value},c(e.name),9,tn)))),128))],40,en),[[F,e.selectedSoc]])]),r("div",an,[r("label",{for:l.formId("active")},c(e.$t("main.chargingPlan.active")),9,nn)]),r("div",on,[r("div",rn,[o(r("input",{id:l.formId("active"),"onUpdate:modelValue":t[4]||(t[4]=t=>e.selectedActive=t),class:"form-check-input",type:"checkbox",role:"switch","data-testid":"repeating-plan-active",checked:e.selectedActive,tabindex:"0",onChange:t[5]||(t[5]=e=>l.update(!0))},null,40,sn),[[_,e.selectedActive]])])]),r("div",ln,[l.showApply?(g(),n("button",{key:0,type:"button",class:"btn btn-sm btn-outline-primary border-0 text-decoration-underline","data-testid":"repeating-plan-apply",tabindex:"0",onClick:t[6]||(t[6]=e=>l.update(!0))},c(e.$t("main.chargingPlan.update")),1)):(g(),n("button",{key:1,type:"button",class:"btn btn-sm btn-outline-secondary border-0","aria-label":"Remove",tabindex:"0",onClick:t[7]||(t[7]=t=>e.$emit("removed",e.id))},t[9]||(t[9]=[r("shopicon-regular-trash",{size:"s",class:"flex-shrink-0"},null,-1)])))])])])}],["__scopeId","data-v-34b92d47"]])},mixins:[a],props:{id:Number,rangePerSoc:Number,plans:{type:Array,default:()=>[]}},emits:["updated"],computed:{formIdPrefix:function(){return`chargingplan-lp${this.id}`}},methods:{deepEqual:ce,addPlan:function(){const e={weekdays:cn,time:"07:00",soc:80,active:!1,tz:this.timezone()},t=[...this.plans];t.push(e),this.updatePlans(t)},updatePlan:function(e,t){const i=[...this.plans];i.splice(e,1,t),this.updatePlans(i)},updatePlans:function(e){this.$emit("updated",e)},removePlan:function(e){const t=[...this.plans];t.splice(e,1),this.updatePlans(t)}}},[["render",function(e,t,i,a,o,s){const l=p("ChargingPlanRepeatingSettings");return g(),n(d,null,[(g(!0),n(d,null,h(i.plans,((t,a)=>(g(),n("div",{key:a,"data-testid":"plan-entry"},[r("div",null,[u(l,T({showHeader:0===a,number:a+2,class:"mb-5 mb-lg-4",formIdPrefix:s.formIdPrefix,ref_for:!0},t,{rangePerSoc:i.rangePerSoc,onUpdated:e=>s.updatePlan(a,e),onSaved:t=>e.savePlan(a,t),onRemoved:e=>s.removePlan(a)}),null,16,["showHeader","number","formIdPrefix","rangePerSoc","onUpdated","onSaved","onRemoved"])])])))),128)),r("div",dn,[r("button",{type:"button",class:"d-flex btn btn-sm btn-outline-secondary border-0 align-items-center gap-2 evcc-gray","data-testid":"repeating-plan-add",tabindex:"0",onClick:t[0]||(t[0]=(...e)=>s.addPlan&&s.addPlan(...e))},[t[1]||(t[1]=r("shopicon-regular-plus",{size:"s",class:"flex-shrink-0"},null,-1)),v(" "+c(e.$t("main.chargingPlan.addRepeatingPlan")),1)])])],64)}],["__scopeId","data-v-0d9f4be9"]]),un={name:"ChargingPlanWarnings",mixins:[a],props:{id:[String,Number],effectiveLimitSoc:Number,effectivePlanTime:String,effectivePlanSoc:Number,planEnergy:Number,limitEnergy:Number,socBasedPlanning:Boolean,socPerKwh:Number,rangePerSoc:Number,mode:String,tariff:Object,plan:Object,vehicleLimitSoc:Number,planOverrun:Number},computed:{endTime:function(){if(!this.plan?.plan?.length)return null;const{plan:e}=this.plan;return e[e.length-1].end},overrunFmt:function(){return this.planOverrun?this.fmtDuration(this.planOverrun,!0,"m"):""},timeTooFarInTheFuture:function(){if(!this.effectivePlanTime)return!1;if(this.tariff?.rates){const e=this.tariff.rates[this.tariff.rates.length-1];if(e?.end){const t=new Date(e.end);return new Date(this.effectivePlanTime)>=t}}return!1},notReachableInTime:function(){const{planTime:e}=this.plan||{};if(e&&this.endTime){const t=new Date(e);return new Date(this.endTime)-t>6e4}return!1},targetIsAboveLimit:function(){return this.socBasedPlanning?this.effectivePlanSoc>this.effectiveLimitSoc:this.limitEnergy&&this.planEnergy>this.limitEnergy},targetIsAboveVehicleLimit:function(){return!!this.socBasedPlanning&&this.effectivePlanSoc>(this.vehicleLimitSoc||100)},limitFmt:function(){return this.socBasedPlanning?this.fmtSoc(this.effectiveLimitSoc):this.fmtWh(1e3*this.limitEnergy)},goalFmt:function(){return this.socBasedPlanning?this.fmtSoc(this.effectivePlanSoc):this.fmtWh(1e3*this.planEnergy)}},methods:{fmtSoc(e){return this.fmtPercentage(e)}}},mn={class:"mb-3 root","data-testid":"plan-warnings"},pn={key:0,class:"d-block evcc-gray mb-1"},gn={key:1,class:"d-block evcc-gray mb-1"},fn={key:2,class:"d-block evcc-gray mb-1"},vn={key:3,class:"d-block text-warning mb-1"},bn={key:4,class:"d-block text-warning mb-1"},yn=i(un,[["render",function(e,t,i,a,o,r){return g(),n("p",mn,[r.targetIsAboveLimit?(g(),n("span",pn,c(e.$t("main.targetCharge.targetIsAboveLimit",{limit:r.limitFmt})),1)):f("",!0),["off","now"].includes(i.mode)?(g(),n("span",gn,c(e.$t("main.targetCharge.onlyInPvMode")),1)):f("",!0),r.timeTooFarInTheFuture?(g(),n("span",fn,c(e.$t("main.targetCharge.targetIsTooFarInTheFuture")),1)):f("",!0),r.notReachableInTime?(g(),n("span",vn,c(e.$t("main.targetCharge.notReachableInTime",{overrun:r.overrunFmt})),1)):f("",!0),r.targetIsAboveVehicleLimit?(g(),n("span",bn,c(e.$t("main.targetCharge.targetIsAboveVehicleLimit")),1)):f("",!0)])}],["__scopeId","data-v-0c41476e"]]),wn={name:"ChargingPlansSettings",components:{ChargingPlanPreview:Ei,ChargingPlanStaticSettings:$a,ChargingPlansRepeatingSettings:hn,ChargingPlanWarnings:yn,CustomSelect:z},mixins:[a,I],props:{id:[String,Number],staticPlan:Object,repeatingPlans:{type:Array,default:()=>[]},effectiveLimitSoc:Number,effectivePlanTime:String,effectivePlanSoc:Number,planEnergy:Number,limitEnergy:Number,socBasedPlanning:Boolean,socPerKwh:Number,rangePerSoc:Number,smartCostType:String,currency:String,mode:String,capacity:Number,vehicle:Object,vehicleLimitSoc:Number,planOverrun:Number},emits:["static-plan-removed","static-plan-updated","repeating-plans-updated"],data:function(){return{staticPlanPreview:{},tariff:{},plan:{},activeTab:"time",debounceTimer:null,selectedPreviewId:1,nextPlanId:0}},computed:{noActivePlan:function(){return!this.staticPlan&&this.repeatingPlans.every((e=>!e.active))},multiplePlans:function(){return 0!==this.repeatingPlans.length},selectedPreviewPlanTitle:function(){return this.previewPlanOptions[this.selectedPreviewId-1]?.name},chargingPlanWarningsProps:function(){return this.collectProps(yn)},chargingPlanPreviewProps:function(){const{rates:e}=this.tariff,{duration:t,plan:i,power:a,planTime:n}=this.plan,o=n?new Date(n):null,{currency:r,smartCostType:s}=this;return e?{duration:t,plan:i,power:a,rates:e,targetTime:o,currency:r,smartCostType:s}:null},previewPlanOptions:function(){const e=e=>`${this.$t("main.targetCharge.preview")} #${e}`,t=[{value:1,name:e(1)}];return this.repeatingPlans.forEach(((i,a)=>{const n=a+2;t.push({value:n,name:e(n),disabled:!i.weekdays.length})})),t},nextPlanTitle:function(){return`${this.$t("main.targetCharge.nextPlan")} #${this.nextPlanId}`}},watch:{effectivePlanTime(e){null!==e&&this.fetchPlanDebounced()},staticPlan:{deep:!0,handler:function(e,t){ce(e,t)||this.fetchPlanDebounced()}},repeatingPlans:{deep:!0,handler:function(e,t){ce(e,t)||(this.adjustPreviewId(),this.fetchPlanDebounced())}}},mounted(){this.fetchPlanDebounced()},methods:{selectPreviewPlan:function(e){this.selectedPreviewId=e,this.fetchPlanPreviewDebounced()},fetchPlanDebounced:async function(){this.noActivePlan?await this.fetchPlanPreviewDebounced():await this.fetchActivePlanDebounced()},adjustPreviewId:function(){this.selectedPreviewId>this.previewPlanOptions.length&&(this.selectedPreviewId=this.previewPlanOptions.length)},fetchActivePlan:async function(){try{const e=await this.apiFetchPlan(`loadpoints/${this.id}/plan`);this.plan=e.data.result,this.nextPlanId=this.plan.planId}catch(e){console.error(e)}await this.updateTariff()},fetchStaticPreviewSoc:async function(e,t){const i=t.toISOString();return await this.apiFetchPlan(`loadpoints/${this.id}/plan/static/preview/soc/${e}/${i}`)},fetchRepeatingPreview:async function(e,t,i,a){return await this.apiFetchPlan(`loadpoints/${this.id}/plan/repeating/preview/${t}/${e}/${i}/${encodeURIComponent(a)}`)},fetchStaticPreviewEnergy:async function(e,t){const i=t.toISOString();return await this.apiFetchPlan(`loadpoints/${this.id}/plan/static/preview/energy/${e}/${i}`)},apiFetchPlan:async function(e){try{const t=await j.get(e,{validateStatus:e=>[200,404].includes(e)});return 404===t.status?{data:{result:{}}}:t}catch(t){console.error(t)}},fetchPreviewPlan:async function(){if(this.noActivePlan)try{let e;if(this.selectedPreviewId<2&&this.staticPlanPreview){const{soc:t,energy:i,time:a}=this.staticPlanPreview;e=this.socBasedPlanning?await this.fetchStaticPreviewSoc(t,new Date(a)):await this.fetchStaticPreviewEnergy(i,new Date(a))}else{const t=this.repeatingPlans[this.selectedPreviewId-2];if(!t)return;const{weekdays:i,soc:a,time:n,tz:o}=t;if(0===i.length)return;e=await this.fetchRepeatingPreview(i,a,n,o)}this.plan=e.data.result,await this.updateTariff()}catch(e){console.error(e)}},updateTariff:async function(){if(this.tariff?.lastUpdate&&Date.now()-this.tariff.lastUpdate.getTime()<=3e5)return;const e=await j.get("tariff/planner",{validateStatus:function(e){return e>=200&&e<500}});404===e.status?this.tariff={rates:[]}:(this.tariff=e.data.result,this.tariff.lastUpdate=new Date)},fetchPlanPreviewDebounced:async function(){this.debounceTimer?(clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout((async()=>await this.fetchPreviewPlan()),1e3)):await this.fetchPreviewPlan()},fetchActivePlanDebounced:async function(){this.debounceTimer?(clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout((async()=>await this.fetchActivePlan()),1e3)):await this.fetchActivePlan()},removeStaticPlan:function(e){this.$emit("static-plan-removed",e)},updateStaticPlan:function(e){this.$emit("static-plan-updated",e)},updateRepeatingPlans:function(e){this.$emit("repeating-plans-updated",e)},previewStaticPlan:function(e){this.staticPlanPreview=e,this.fetchPlanPreviewDebounced()}}},Sn={class:"mt-4"},Pn={class:"form-group d-lg-flex align-items-baseline justify-content-between"},xn={class:"container px-0"},Cn={key:0},Tn={key:0,class:"d-none d-lg-block"},kn={class:"inner mb-3","data-testid":"repeating-plan-title"},In={class:"inner","data-testid":"plan-preview-title"},$n={key:0},Ln={class:"text-decoration-underline"},An={key:2},Nn=i(wn,[["render",function(e,t,i,a,o,s){const l=p("ChargingPlanStaticSettings"),d=p("ChargingPlansRepeatingSettings"),h=p("CustomSelect"),v=p("ChargingPlanWarnings"),b=p("ChargingPlanPreview");return g(),n("div",Sn,[r("div",Pn,[r("div",xn,[u(l,T({id:`lp${i.id}-1`,class:"mb-2"},i.staticPlan||{},{capacity:i.capacity,"range-per-soc":i.rangePerSoc,"soc-per-kwh":i.socPerKwh,"soc-based-planning":i.socBasedPlanning,multiplePlans:s.multiplePlans,onStaticPlanUpdated:t[0]||(t[0]=e=>s.updateStaticPlan({index:0,...e})),onStaticPlanRemoved:t[1]||(t[1]=()=>s.removeStaticPlan(0)),onPlanPreview:s.previewStaticPlan}),null,16,["id","capacity","range-per-soc","soc-per-kwh","soc-based-planning","multiplePlans","onPlanPreview"]),i.socBasedPlanning?(g(),n("div",Cn,[s.multiplePlans?(g(),n("div",Tn,[t[3]||(t[3]=r("hr",{class:"mt-5"},null,-1)),r("h5",null,[r("div",kn,c(e.$t("main.chargingPlan.repeatingPlans")),1)])])):f("",!0),u(d,{id:i.id,rangePerSoc:i.rangePerSoc,plans:i.repeatingPlans,onUpdated:s.updateRepeatingPlans},null,8,["id","rangePerSoc","plans","onUpdated"])])):f("",!0)])]),t[4]||(t[4]=r("hr",null,null,-1)),r("h5",null,[r("div",In,[s.multiplePlans?s.noActivePlan?(g(),C(h,{key:1,options:s.previewPlanOptions,selected:e.selectedPreviewId,"data-testid":"preview-plan-select",onChange:t[2]||(t[2]=e=>s.selectPreviewPlan(e.target.value))},{default:m((()=>[r("span",Ln,c(s.selectedPreviewPlanTitle),1)])),_:1},8,["options","selected"])):(g(),n("span",An,c(s.nextPlanTitle),1)):(g(),n("span",$n,c(e.$t("main.targetCharge."+(s.noActivePlan?"preview":"currentPlan"))),1))])]),u(v,P(x(s.chargingPlanWarningsProps)),null,16),u(b,P(x(s.chargingPlanPreviewProps)),null,16)])}],["__scopeId","data-v-985c6fc7"]]),Bn={name:"ChargingPlanArrival",mixins:[a],props:{id:[String,Number],minSoc:{type:Number,default:0},limitSoc:{type:Number,default:0},vehicleName:String,socBasedCharging:Boolean,rangePerSoc:Number},emits:["minsoc-updated","limitsoc-updated"],data:function(){return{selectedMinSoc:this.minSoc,selectedLimitSoc:this.limitSoc}},computed:{minSocOptions(){return Array.from(Array(20).keys()).map((e=>5*e)).map(this.socOption)},limitSocOptions(){return Array.from(Array(21).keys()).map((e=>5*e)).map(this.socOption)}},watch:{minSoc:function(e){this.selectedMinSoc=e},limitSoc:function(e){this.selectedLimitSoc=e}},methods:{socOption:function(e){return{value:e,name:0===e?"---":this.fmtSocOption(e,this.rangePerSoc,O())}},formId:function(e){return`chargingplan_${this.id}_${e}`},changeMinSoc:function(){this.$emit("minsoc-updated",this.selectedMinSoc)},changeLimitSoc:function(){this.$emit("limitsoc-updated",this.selectedLimitSoc)}}},Vn={class:"mt-4 container"},Mn={class:"row"},En={class:"col-6 col-lg-3 col-form-label"},Dn=["for"],Rn={class:"col-6 col-lg-3"},Un=["id","disabled"],qn=["value"],On={class:"col-12 col-lg-6 ps-lg-4 col-form-label mb-4"},Fn={class:"row"},Wn={class:"col-6 col-lg-3 col-form-label"},_n=["for"],zn={class:"col-6 col-lg-3"},jn=["id","disabled"],Hn=["value"],Gn={class:"col-12 col-lg-6 ps-lg-4 col-form-label mb-4"},Kn={key:0,class:"mx-2 small text-muted"},Zn={class:"text-evcc"},Yn=i(Bn,[["render",function(e,t,i,a,s,l){return g(),n(d,null,[r("div",Vn,[r("div",Mn,[r("div",En,[r("label",{for:l.formId("minsoc")},c(e.$t("main.loadpointSettings.minSoc.label")),9,Dn)]),r("div",Rn,[o(r("select",{id:l.formId("minsoc"),"onUpdate:modelValue":t[0]||(t[0]=t=>e.selectedMinSoc=t),class:"form-select mb-2",disabled:!i.socBasedCharging,onChange:t[1]||(t[1]=(...e)=>l.changeMinSoc&&l.changeMinSoc(...e))},[(g(!0),n(d,null,h(l.minSocOptions,(e=>(g(),n("option",{key:e.value,value:e.value},c(e.name),9,qn)))),128))],40,Un),[[F,e.selectedMinSoc,void 0,{number:!0}]])]),r("small",On,c(e.$t("main.loadpointSettings.minSoc.description",[e.selectedMinSoc?e.fmtPercentage(e.selectedMinSoc):"x"])),1)]),r("div",Fn,[r("div",Wn,[r("label",{for:l.formId("limitsoc")},c(e.$t("main.loadpointSettings.limitSoc.label")),9,_n)]),r("div",zn,[o(r("select",{id:l.formId("limitsoc"),"onUpdate:modelValue":t[2]||(t[2]=t=>e.selectedLimitSoc=t),class:"form-select mb-2",disabled:!i.socBasedCharging,onChange:t[3]||(t[3]=(...e)=>l.changeLimitSoc&&l.changeLimitSoc(...e))},[(g(!0),n(d,null,h(l.limitSocOptions,(e=>(g(),n("option",{key:e.value,value:e.value},c(e.name),9,Hn)))),128))],40,jn),[[F,e.selectedLimitSoc,void 0,{number:!0}]])]),r("small",Gn,c(e.$t("main.loadpointSettings.limitSoc.description")),1)])]),i.socBasedCharging?f("",!0):(g(),n("div",Kn,[r("strong",Zn,c(e.$t("main.loadpointSettings.disclaimerHint")),1),v(" "+c(e.$t("main.loadpointSettings.onlyForSocBasedCharging")),1)]))],64)}]]),Qn={name:"ChargingPlan",components:{LabelAndValue:Nt,ChargingPlansSettings:Nn,ChargingPlanArrival:Yn},mixins:[a,I],props:{currency:String,disabled:Boolean,effectiveLimitSoc:Number,effectivePlanSoc:Number,effectivePlanTime:String,id:[String,Number],limitEnergy:Number,mode:String,planActive:Boolean,planEnergy:Number,planTime:String,planTimeUnreachable:Boolean,planOverrun:Number,rangePerSoc:Number,smartCostType:String,socBasedPlanning:Boolean,socBasedCharging:Boolean,socPerKwh:Number,vehicle:Object,capacity:Number,vehicleSoc:Number,vehicleLimitSoc:Number},data:function(){return{modal:null,isModalVisible:!1,activeTab:"departure",targetTimeLabel:"",interval:null}},computed:{buttonColor:function(){return this.planTimeUnreachable?"text-warning":this.enabled?"evcc-default-text":"text-gray"},minSoc:function(){return this.vehicle?.minSoc},limitSoc:function(){return this.vehicle?.limitSoc},staticPlan:function(){return this.socBasedPlanning?this.vehicle?.plan:this.planEnergy&&this.planTime?{energy:this.planEnergy,time:this.planTime}:null},repeatingPlans:function(){return this.vehicle?.repeatingPlans.length>0?[...this.vehicle.repeatingPlans]:[]},enabled:function(){return this.effectivePlanTime},modalId:function(){return`chargingPlanModal_${this.id}`},departureTabActive:function(){return"departure"===this.activeTab},arrivalTabActive:function(){return"arrival"===this.activeTab},chargingPlansSettingsProps:function(){return this.collectProps(Nn)},chargingPlanArrival:function(){return this.collectProps(Yn)},targetSocLabel:function(){return this.socBasedPlanning?this.fmtPercentage(this.effectivePlanSoc):Ri(this.planEnergy,Di(this.capacity||100),this.fmtWh,this.$t("main.targetEnergy.noLimit"))},apiVehicle:function(){return`vehicles/${this.vehicle?.name}/`},apiLoadpoint:function(){return`loadpoints/${this.id}/`}},watch:{effectivePlanTime(){this.updateTargetTimeLabel()},"$i18n.locale":{handler(){this.updateTargetTimeLabel()}}},mounted(){this.modal=$.getOrCreateInstance(this.$refs.modal),this.$refs.modal.addEventListener("show.bs.modal",this.modalVisible),this.$refs.modal.addEventListener("hidden.bs.modal",this.modalInvisible),this.$refs.modal.addEventListener("hide.bs.modal",this.checkUnsavedOnClose),this.interval=setInterval(this.updateTargetTimeLabel,6e4),this.updateTargetTimeLabel()},unmounted(){this.$refs.modal?.removeEventListener("show.bs.modal",this.modalVisible),this.$refs.modal?.removeEventListener("hidden.bs.modal",this.modalInvisible),this.$refs.modal?.removeEventListener("hide.bs.modal",this.checkUnsavedOnClose),clearInterval(this.interval)},methods:{checkUnsavedOnClose:function(){const e=this.$refs.modal.querySelector("[data-testid=plan-apply]");e&&confirm(this.$t("main.chargingPlan.unsavedChanges"))&&e.click()},modalVisible:function(){this.isModalVisible=!0},modalInvisible:function(){this.isModalVisible=!1},openModal(){this.showDeatureTab(),this.modal.show()},openPlanModal(e=!1){e?this.showArrivalTab():this.showDeatureTab(),this.modal.show()},updateTargetTimeLabel:function(){if(!this.effectivePlanTime)return"";const e=new Date(this.effectivePlanTime);this.targetTimeLabel=this.fmtAbsoluteDate(e)},showDeatureTab:function(){this.activeTab="departure"},showArrivalTab:function(){this.activeTab="arrival"},updateStaticPlan:function({soc:e,time:t,energy:i}){const a=t.toISOString();this.socBasedPlanning?j.post(`${this.apiVehicle}plan/soc/${e}/${a}`):j.post(`${this.apiLoadpoint}plan/energy/${i}/${a}`)},removeStaticPlan:function(){this.socBasedPlanning?j.delete(`${this.apiVehicle}plan/soc`):j.delete(`${this.apiLoadpoint}plan/energy`)},updateRepeatingPlans:function(e){j.post(`${this.apiVehicle}plan/repeating`,{plans:e})},setMinSoc:function(e){j.post(`${this.apiVehicle}minsoc/${e}`)},setLimitSoc:function(e){j.post(`${this.apiVehicle}limitsoc/${e}`)}}},Jn={class:"text-center"},Xn={class:"value m-0 d-block align-items-baseline justify-content-center"},eo={key:0},to={class:"targetTimeLabel"},io={key:1,class:"text-decoration-underline"},ao=["id"],no={class:"modal-dialog modal-dialog-centered",role:"document"},oo={class:"modal-content"},ro={class:"modal-header"},so={class:"modal-title"},lo={key:0},co={class:"modal-body pt-2"},ho={class:"nav nav-tabs"},uo={class:"nav-item"},mo={class:"nav-item"},po={key:0},go=i(Qn,[["render",function(e,t,i,a,o,s){const d=p("LabelAndValue"),h=p("ChargingPlansSettings"),b=p("ChargingPlanArrival");return g(),n("div",Jn,[u(d,{class:l(["root flex-grow-1",i.disabled?"opacity-25":"opacity-100"]),label:e.$t("main.chargingPlan.title"),"data-testid":"charging-plan"},{default:m((()=>[r("div",Xn,[r("button",{class:l(["value-button p-0",s.buttonColor]),"data-testid":"charging-plan-button",onClick:t[0]||(t[0]=(...e)=>s.openModal&&s.openModal(...e))},[s.enabled?(g(),n("strong",eo,[r("span",to,c(e.targetTimeLabel),1),r("div",{class:l(["extraValue text-nowrap",{"text-warning":i.planTimeUnreachable}])},c(s.targetSocLabel),3)])):(g(),n("span",io,c(e.$t("main.chargingPlan.none")),1))],2)])])),_:1},8,["label","class"]),(g(),C(H,{to:"body"},[r("div",{id:s.modalId,ref:"modal",class:"modal fade text-dark modal-xl","data-bs-backdrop":"true",tabindex:"-1",role:"dialog","aria-hidden":"true","data-testid":"charging-plan-modal"},[r("div",no,[r("div",oo,[r("div",ro,[r("h5",so,[v(c(e.$t("main.chargingPlan.modalTitle")),1),i.socBasedPlanning&&i.vehicle?(g(),n("span",lo,": "+c(i.vehicle.title),1)):f("",!0)]),t[3]||(t[3]=r("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),r("div",co,[r("ul",ho,[r("li",uo,[r("a",{class:l(["nav-link",{active:s.departureTabActive}]),href:"#",onClick:t[1]||(t[1]=V(((...e)=>s.showDeatureTab&&s.showDeatureTab(...e)),["prevent"]))},c(e.$t("main.chargingPlan.departureTab")),3)]),r("li",mo,[r("a",{class:l(["nav-link",{active:s.arrivalTabActive}]),href:"#",onClick:t[2]||(t[2]=V(((...e)=>s.showArrivalTab&&s.showArrivalTab(...e)),["prevent"]))},c(e.$t("main.chargingPlan.arrivalTab")),3)])]),e.isModalVisible?(g(),n("div",po,[s.departureTabActive?(g(),C(h,T({key:0},s.chargingPlansSettingsProps,{onStaticPlanUpdated:s.updateStaticPlan,onStaticPlanRemoved:s.removeStaticPlan,onRepeatingPlansUpdated:s.updateRepeatingPlans}),null,16,["onStaticPlanUpdated","onStaticPlanRemoved","onRepeatingPlansUpdated"])):f("",!0),s.arrivalTabActive?(g(),C(b,T({key:1},s.chargingPlanArrival,{onMinsocUpdated:s.setMinSoc,onLimitsocUpdated:s.setLimitSoc}),null,16,["onMinsocUpdated","onLimitsocUpdated"])):f("",!0)])):f("",!0)])])])],8,ao)]))])}],["__scopeId","data-v-4fbfedfb"]]),fo={name:"LimitSocSelect",components:{LabelAndValue:Nt,AnimatedNumber:Re},mixins:[a],props:{limitSoc:Number,rangePerSoc:Number,heating:Boolean},emits:["limit-soc-updated"],computed:{options:function(){const e=[];for(let t=20;t<=100;t+=this.step){const i=this.fmtSocOption(t,this.rangePerSoc,O(),this.heating);e.push({soc:t,text:i})}return e},step:function(){return this.heating?1:5},title:function(){return this.heating?this.$t("main.vehicle.tempLimit"):this.$t("main.vehicle.targetSoc")},estimatedTargetRange:function(){return this.estimatedRange(this.limitSoc)}},methods:{change:function(e){return this.$emit("limit-soc-updated",parseInt(e.target.value,10))},estimatedRange:function(e){return this.rangePerSoc?Math.round(e*this.rangePerSoc):null},formatSoc:function(e){return this.heating?this.fmtTemperature(e):this.fmtPercentage(e)},formatKm:function(e){return`${this.fmtNumber(e,0)} ${O()}`}}},vo={class:"value m-0"},bo={class:"position-relative",role:"button"},yo=["value"],wo=["value"],So={class:"text-decoration-underline","data-testid":"limit-soc-value"},Po={key:0,class:"extraValue text-nowrap"},xo={class:"value m-0"},Co={class:"position-relative",role:"button"},To=["value"],ko=["value","disabled"],Io={key:0,class:"extraValue text-nowrap"},$o={name:"Vehicle",components:{VehicleTitle:Ot,VehicleSoc:Ht,VehicleStatus:Pi,LabelAndValue:Nt,ChargingPlan:go,LimitSocSelect:i(fo,[["render",function(e,t,i,a,o,s){const l=p("AnimatedNumber"),v=p("LabelAndValue");return g(),C(v,{class:"flex-grow-1",label:s.title,align:"end","data-testid":"limit-soc"},{default:m((()=>[r("h3",vo,[r("label",bo,[r("select",{value:i.limitSoc,class:"custom-select",onChange:t[0]||(t[0]=(...e)=>s.change&&s.change(...e))},[(g(!0),n(d,null,h(s.options,(({soc:e,text:t})=>(g(),n("option",{key:e,value:e},c(t),9,wo)))),128))],40,yo),r("span",So,[u(l,{to:i.limitSoc,format:s.formatSoc},null,8,["to","format"])])]),s.estimatedTargetRange?(g(),n("div",Po,[u(l,{to:s.estimatedTargetRange,format:s.formatKm},null,8,["to","format"])])):f("",!0)])])),_:1},8,["label"])}],["__scopeId","data-v-182f339e"]]),LimitEnergySelect:i({name:"LimitEnergySelect",components:{LabelAndValue:Nt,AnimatedNumber:Re},mixins:[a],props:{limitEnergy:Number,socPerKwh:Number,chargedEnergy:Number,capacity:Number},emits:["limit-energy-updated"],computed:{options:function(){return qi(this.chargedEnergy,this.capacity||100,this.socPerKwh,this.fmtWh,this.fmtPercentage,this.$t("main.targetEnergy.noLimit"))},step(){return Di(this.capacity||100)},estimated:function(){return Ui(this.limitEnergy,this.socPerKwh)}},methods:{change:function(e){return this.$emit("limit-energy-updated",parseFloat(e.target.value))},fmtEnergy:function(e){return Ri(e,this.step,this.fmtWh,this.$t("main.targetEnergy.noLimit"))},fmtSoc:function(e){return`+${this.fmtPercentage(e)}`}}},[["render",function(e,t,i,a,o,s){const v=p("AnimatedNumber"),b=p("LabelAndValue");return g(),C(b,{class:"flex-grow-1",label:e.$t("main.targetEnergy.label"),align:"end","data-testid":"limit-energy"},{default:m((()=>[r("h3",xo,[r("label",Co,[r("select",{value:i.limitEnergy,class:"custom-select",onChange:t[0]||(t[0]=(...e)=>s.change&&s.change(...e))},[(g(!0),n(d,null,h(s.options,(({energy:e,text:t,disabled:i})=>(g(),n("option",{key:e,value:e,disabled:i},c(t),9,ko)))),128))],40,To),r("span",{class:l(["text-decoration-underline",{"text-gray fw-normal":!i.limitEnergy}]),"data-testid":"limit-energy-value"},[u(v,{to:i.limitEnergy,format:s.fmtEnergy},null,8,["to","format"])],2)]),s.estimated?(g(),n("div",Io,[u(v,{to:s.estimated,format:s.fmtSoc},null,8,["to","format"])])):f("",!0)])])),_:1},8,["label"])}],["__scopeId","data-v-4632b117"]])},mixins:[I,a],props:{chargedEnergy:Number,charging:Boolean,vehicleClimaterActive:Boolean,vehicleWelcomeActive:Boolean,connected:Boolean,currency:String,effectiveLimitSoc:Number,effectivePlanSoc:Number,effectivePlanTime:String,batteryBoostActive:Boolean,enabled:Boolean,heating:Boolean,id:[String,Number],integratedDevice:Boolean,limitEnergy:Number,mode:String,chargerStatusReason:String,phaseAction:String,phaseRemainingInterpolated:Number,planActive:Boolean,planEnergy:Number,planProjectedStart:String,planProjectedEnd:String,planTime:String,planTimeUnreachable:Boolean,planOverrun:Number,pvAction:String,pvRemainingInterpolated:Number,sessionSolarPercentage:Number,smartCostActive:Boolean,smartCostNextStart:String,smartCostLimit:Number,smartCostType:String,socBasedCharging:Boolean,socBasedPlanning:Boolean,tariffCo2:Number,tariffGrid:Number,vehicle:Object,vehicleDetectionActive:Boolean,vehicleName:String,vehicleRange:Number,vehicles:Array,vehicleSoc:Number,vehicleLimitSoc:Number,vehicleNotReachable:Boolean},emits:["limit-soc-updated","limit-energy-updated","change-vehicle","remove-vehicle","open-loadpoint-settings"],data(){return{displayLimitSoc:this.effectiveLimitSoc}},computed:{title:function(){return this.vehicle?.title||""},capacity:function(){return this.vehicle?.capacity||0},icon:function(){return this.vehicle?.icon||""},minSoc:function(){return this.vehicle?.minSoc||0},vehicleSocProps:function(){return this.collectProps(Ht)},vehicleStatus:function(){return this.collectProps(Pi)},vehicleTitleProps:function(){return this.collectProps(Ot)},chargingPlan:function(){return this.collectProps(go)},formattedSoc:function(){return this.vehicleSoc?this.heating?this.fmtTemperature(this.vehicleSoc):this.fmtPercentage(this.vehicleSoc):"--"},vehicleSocTitle:function(){return this.heating?this.$t("main.vehicle.temp"):this.$t("main.vehicle.vehicleSoc")},range:function(){return G(this.vehicleRange)},rangeUnit:function(){return O()},rangePerSoc:function(){return this.vehicleSoc>10&&this.range?Math.round(this.range/this.vehicleSoc*100)/100:null},socPerKwh:function(){return this.capacity>0?100/this.capacity:null},chargedSoc:function(){const e=this.socPerKwh*(this.chargedEnergy/1e3);return e>1?`+${this.fmtPercentage(e)}`:null},chargingPlanDisabled:function(){return["off","now"].includes(this.mode)},smartCostDisabled:function(){return["off","now"].includes(this.mode)}},watch:{effectiveLimitSoc:function(){this.displayLimitSoc=this.effectiveLimitSoc}},methods:{limitSocDrag:function(e){this.displayLimitSoc=e},limitSocUpdated:function(e){this.displayLimitSoc=e,this.$emit("limit-soc-updated",e)},limitEnergyUpdated:function(e){this.$emit("limit-energy-updated",e)},changeVehicle(e){this.$emit("change-vehicle",e)},removeVehicle(){this.$emit("remove-vehicle")},fmtEnergy(e){return this.fmtWh(e,0==e?S.KW:S.AUTO)},openPlanModal(){this.$refs.chargingPlan.openPlanModal()},openMinSocSettings(){this.$refs.chargingPlan.openPlanModal(!0)}}},Lo={class:"vehicle pt-4"},Ao={class:"details d-flex flex-wrap justify-content-between"},No=i($o,[["render",function(e,t,i,a,o,s){const l=p("VehicleTitle"),c=p("VehicleStatus"),d=p("VehicleSoc"),h=p("LabelAndValue"),m=p("ChargingPlan"),v=p("LimitSocSelect"),b=p("LimitEnergySelect");return g(),n("div",Lo,[i.integratedDevice?f("",!0):(g(),C(l,T({key:0},s.vehicleTitleProps,{onChangeVehicle:s.changeVehicle,onRemoveVehicle:s.removeVehicle}),null,16,["onChangeVehicle","onRemoveVehicle"])),u(c,T(s.vehicleStatus,{class:"mb-2",onOpenLoadpointSettings:t[0]||(t[0]=t=>e.$emit("open-loadpoint-settings")),onOpenMinsocSettings:s.openMinSocSettings,onOpenPlanModal:s.openPlanModal}),null,16,["onOpenMinsocSettings","onOpenPlanModal"]),u(d,T(s.vehicleSocProps,{class:"mt-2 mb-4",onLimitSocUpdated:s.limitSocUpdated,onLimitSocDrag:s.limitSocDrag,onPlanClicked:s.openPlanModal}),null,16,["onLimitSocUpdated","onLimitSocDrag","onPlanClicked"]),r("div",Ao,[i.socBasedCharging?(g(),C(h,{key:0,class:"flex-grow-1",label:s.vehicleSocTitle,value:s.formattedSoc,extraValue:s.range?`${e.fmtNumber(s.range,0)} ${s.rangeUnit}`:"","data-testid":"current-soc",align:"start"},null,8,["label","value","extraValue"])):(g(),C(h,{key:1,class:"flex-grow-1",label:e.$t("main.loadpoint.charged"),value:s.fmtEnergy(i.chargedEnergy),extraValue:s.chargedSoc||"","data-testid":"current-energy",align:"start"},null,8,["label","value","extraValue"])),i.heating?f("",!0):(g(),C(m,T({key:2,ref:"chargingPlan",class:"flex-grow-1 target-charge"},s.chargingPlan,{disabled:s.chargingPlanDisabled}),null,16,["disabled"])),i.socBasedCharging?(g(),C(v,{key:3,class:"flex-grow-1 text-end","limit-soc":o.displayLimitSoc,"range-per-soc":s.rangePerSoc,heating:i.heating,onLimitSocUpdated:s.limitSocUpdated},null,8,["limit-soc","range-per-soc","heating","onLimitSocUpdated"])):(g(),C(b,{key:4,class:"flex-grow-1 text-end","limit-energy":i.limitEnergy,"soc-per-kwh":s.socPerKwh,"charged-energy":i.chargedEnergy,capacity:s.capacity,onLimitEnergyUpdated:s.limitEnergyUpdated},null,8,["limit-energy","soc-per-kwh","charged-energy","capacity","onLimitEnergyUpdated"]))])])}],["__scopeId","data-v-ddceed21"]]),Bo={name:"Phases",props:{chargeCurrent:{type:Number},chargeCurrents:{type:Array},phasesActive:{type:Number},minCurrent:{type:Number},maxCurrent:{type:Number}},computed:{chargeCurrentsActive(){return this.chargeCurrents?.filter((e=>e>=1)).length>0}},methods:{targetWidth(){const e=Math.min(Math.max(this.minCurrent,this.chargeCurrent),this.maxCurrent);return 100/this.maxCurrent*e},realWidth(e){if(this.chargeCurrents){const t=this.chargeCurrents[e-1]||0;return 100/this.maxCurrent*t}return this.targetWidth()},isPhaseActive(e){return this.chargeCurrentsActive?this.chargeCurrents[e-1]>=1:e<=this.phasesActive}}},Vo={class:l("phases d-flex justify-content-between")},Mo=i(Bo,[["render",function(e,t,i,a,o,s){return g(),n("div",Vo,[(g(),n(d,null,h([1,2,3],(e=>r("div",{key:e,class:l(["phase me-1",{"phase-inactive":!s.isPhaseActive(e)}])},[r("div",{class:"target",style:y({width:`${s.targetWidth()}%`})},null,4),r("div",{class:"real",style:y({width:`${s.realWidth(e)}%`})},null,4)],2))),64))])}],["__scopeId","data-v-c08337bb"]]),Eo={type:"button",class:"btn btn-sm btn-outline-secondary position-relative border-0 p-2 evcc-gray","data-testid":"loadpoint-settings-button"},Do=i({name:"LoadpointSettingsButton",props:{id:[String,Number]}},[["render",function(e,t,i,a,o,s){return g(),n("button",Eo,t[0]||(t[0]=[r("shopicon-regular-adjust",{size:"s"},null,-1)]))}]]),Ro={mixins:[a],props:{formId:Function,mode:String,batteryBoost:Boolean},emits:["batteryboost-updated"],data(){return{selectedEnabled:this.batteryBoost}},computed:{disabled(){return["off","now"].includes(this.mode)}},watch:{batteryBoost(e){this.selectedEnabled=e}},methods:{handleEnabledChange(){this.$emit("batteryboost-updated",this.selectedEnabled)}}},Uo={class:"mb-3 row","data-testid":"battery-boost"},qo=["for"],Oo={class:"col-sm-8 pe-0"},Fo={class:"form-check form-switch my-1"},Wo=["id","disabled"],_o=["for"],zo={key:0,class:"d-block text-primary"},jo={key:1,class:"d-block"},Ho=i(Ro,[["render",function(e,t,i,a,s,l){return g(),n("div",null,[r("h6",null,c(e.$t("main.loadpointSettings.batteryUsage")),1),r("div",Uo,[r("label",{for:i.formId("batteryBoost"),class:"col-sm-4 col-form-label pt-0 pt-sm-2"},c(e.$t("main.loadpointSettings.batteryBoost.label"))+" 🧪 ",9,qo),r("div",Oo,[r("div",Fo,[o(r("input",{id:i.formId("batteryBoost"),"onUpdate:modelValue":t[0]||(t[0]=e=>s.selectedEnabled=e),class:"form-check-input",type:"checkbox",role:"switch",disabled:l.disabled,"data-testid":"battery-boost-checkbox",onChange:t[1]||(t[1]=(...e)=>l.handleEnabledChange&&l.handleEnabledChange(...e))},null,40,Wo),[[_,s.selectedEnabled]]),r("label",{for:i.formId("batteryBoost"),class:"form-check-label"},[r("div",null,c(e.$t("main.loadpointSettings.batteryBoost.description")),1),s.selectedEnabled&&!l.disabled?(g(),n("span",zo,c(e.$t("main.loadpointSettings.batteryBoost.once")),1)):f("",!0),l.disabled?(g(),n("small",jo,c(e.$t("main.loadpointSettings.batteryBoost.mode")),1)):f("",!0)],8,_o)])])])])}]]),Go=230,Ko=1,Zo=3,Yo=(e,t,i=-1)=>Array.from({length:(t-e)/i+1},((t,a)=>e+a*i)),Qo=(e,t)=>{const i=new Set(e);return i.add(t),[...i].sort(((e,t)=>t-e))},Jo={name:"LoadpointSettingsModal",components:{SmartCostLimit:K,LoadpointSettingsBatteryBoost:Ho},mixins:[a,I],props:{id:[String,Number],phasesConfigured:Number,chargerPhases1p3p:Boolean,chargerSinglePhase:Boolean,batteryBoost:Boolean,batteryBoostAvailable:Boolean,mode:String,minSoc:Number,maxCurrent:Number,minCurrent:Number,title:String,smartCostLimit:Number,smartCostType:String,tariffGrid:Number,currency:String,multipleLoadpoints:Boolean},emits:["phasesconfigured-updated","maxcurrent-updated","mincurrent-updated","batteryboost-updated"],data(){return{selectedMaxCurrent:this.maxCurrent,selectedMinCurrent:this.minCurrent,selectedPhases:this.phasesConfigured,isModalVisible:!1}},computed:{phasesOptions(){return this.chargerSinglePhase?[]:this.chargerPhases1p3p?[0,Zo,Ko]:[Zo,Ko]},batteryBoostProps(){return this.collectProps(Ho)},maxPower(){if(this.chargerPhases1p3p){if(0===this.phasesConfigured)return this.maxPowerPhases(3);if([Zo,Ko].includes(this.phasesConfigured))return this.maxPowerPhases(this.phasesConfigured)}return this.fmtW(this.maxCurrent*Go*this.phasesConfigured)},minPower(){if(this.chargerPhases1p3p){if(0===this.phasesConfigured)return this.minPowerPhases(1);if([Zo,Ko].includes(this.phasesConfigured))return this.minPowerPhases(this.phasesConfigured)}return this.fmtW(this.minCurrent*Go*this.phasesConfigured)},minCurrentOptions(){const e=[...Yo(Math.floor(this.maxCurrent),1),.5,.25,.125];return Qo(e,this.minCurrent).map((e=>this.currentOption(e,6===e)))},maxCurrentOptions(){const e=Yo(32,Math.ceil(this.minCurrent));return Qo(e,this.maxCurrent).map((e=>this.currentOption(e,16===e)))},smartCostLimitProps(){return this.collectProps(K)},loadpointId(){return this.id},smartCostAvailable(){return Z(this.smartCostType)}},watch:{maxCurrent(e){this.selectedMaxCurrent=e},minCurrent(e){this.selectedMinCurrent=e},phasesConfigured(e){this.selectedPhases=e},minSoc(e){this.selectedMinSoc=e}},mounted(){this.$refs.modal.addEventListener("show.bs.modal",this.modalVisible),this.$refs.modal.addEventListener("hidden.bs.modal",this.modalInvisible)},unmounted(){this.$refs.modal?.removeEventListener("show.bs.modal",this.modalVisible),this.$refs.modal?.removeEventListener("hidden.bs.modal",this.modalInvisible)},methods:{maxPowerPhases(e){return this.fmtW(this.maxCurrent*Go*e)},minPowerPhases(e){return this.fmtW(this.minCurrent*Go*e)},formId(e){return`loadpoint_${this.id}_${e}`},changeMaxCurrent(){this.$emit("maxcurrent-updated",this.selectedMaxCurrent)},changeMinCurrent(){this.$emit("mincurrent-updated",this.selectedMinCurrent)},changePhasesConfigured(){this.$emit("phasesconfigured-updated",this.selectedPhases)},currentOption(e,t){let i=`${this.fmtNumber(e)} A`;return t&&(i+=` (${this.$t("main.loadpointSettings.default")})`),{value:e,name:i}},modalVisible(){this.isModalVisible=!0},modalInvisible(){this.isModalVisible=!1},changeBatteryBoost(e){this.$emit("batteryboost-updated",e)}}},Xo=["id"],er={class:"modal-dialog modal-dialog-centered",role:"document"},tr={class:"modal-content"},ir={class:"modal-header"},ar={class:"modal-title"},nr={class:"modal-body"},or={class:"container"},rr={key:2,class:"mb-3 row"},sr=["for"],lr={class:"col-sm-8 pe-0"},cr={key:0,class:"mt-0 mb-2"},dr=["id","name","value"],hr=["for"],ur={key:0},mr={class:"mb-3 row"},pr=["for"],gr={class:"col-sm-8 pe-0 d-flex align-items-center"},fr=["id"],vr=["value"],br={class:"ms-3"},yr={class:"mb-3 row"},wr=["for"],Sr={class:"col-sm-8 pe-0 d-flex align-items-center"},Pr=["id"],xr=["value"],Cr={class:"ms-3"},Tr=i(Jo,[["render",function(e,t,i,a,s,l){const u=p("SmartCostLimit"),m=p("LoadpointSettingsBatteryBoost");return g(),C(H,{to:"body"},[r("div",{id:`loadpointSettingsModal_${i.id}`,ref:"modal",class:"modal fade text-dark modal-xl","data-bs-backdrop":"true",tabindex:"-1",role:"dialog","aria-hidden":"true","data-testid":"loadpoint-settings-modal"},[r("div",er,[r("div",tr,[r("div",ir,[r("h5",ar,c(e.$t("main.loadpointSettings.title",[i.title])),1),t[6]||(t[6]=r("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),r("div",nr,[r("div",or,[s.isModalVisible&&l.smartCostAvailable?(g(),C(u,T({key:0},l.smartCostLimitProps,{class:"mt-2"}),null,16)):f("",!0),i.batteryBoostAvailable?(g(),C(m,T({key:1},l.batteryBoostProps,{class:"mt-2",onBatteryboostUpdated:l.changeBatteryBoost}),null,16,["onBatteryboostUpdated"])):f("",!0),r("h6",null,c(e.$t("main.loadpointSettings.currents")),1),l.phasesOptions.length?(g(),n("div",rr,[r("label",{for:l.formId(`phases_${l.phasesOptions[0]}`),class:"col-sm-4 col-form-label pt-0"},c(e.$t("main.loadpointSettings.phasesConfigured.label")),9,sr),r("div",lr,[i.chargerPhases1p3p?f("",!0):(g(),n("p",cr,[r("small",null,c(e.$t("main.loadpointSettings.phasesConfigured.no1p3pSupport")),1)])),(g(!0),n(d,null,h(l.phasesOptions,(i=>(g(),n("div",{key:i,class:"form-check"},[o(r("input",{id:l.formId(`phases_${i}`),"onUpdate:modelValue":t[0]||(t[0]=e=>s.selectedPhases=e),class:"form-check-input",type:"radio",name:l.formId("phases"),value:i,onChange:t[1]||(t[1]=(...e)=>l.changePhasesConfigured&&l.changePhasesConfigured(...e))},null,40,dr),[[Y,s.selectedPhases,void 0,{number:!0}]]),r("label",{class:"form-check-label",for:l.formId(`phases_${i}`)},[v(c(e.$t(`main.loadpointSettings.phasesConfigured.phases_${i}`))+" ",1),i>0?(g(),n("small",ur,c(e.$t(`main.loadpointSettings.phasesConfigured.phases_${i}_hint`,{min:l.minPowerPhases(i),max:l.maxPowerPhases(i)})),1)):f("",!0)],8,hr)])))),128))])])):f("",!0),r("div",mr,[r("label",{for:l.formId("maxcurrent"),class:"col-sm-4 col-form-label pt-0 pt-sm-2"},c(e.$t("main.loadpointSettings.maxCurrent.label")),9,pr),r("div",gr,[o(r("select",{id:l.formId("maxcurrent"),"onUpdate:modelValue":t[2]||(t[2]=e=>s.selectedMaxCurrent=e),class:"form-select form-select-sm w-50",onChange:t[3]||(t[3]=(...e)=>l.changeMaxCurrent&&l.changeMaxCurrent(...e))},[(g(!0),n(d,null,h(l.maxCurrentOptions,(({value:e,name:t})=>(g(),n("option",{key:e,value:e},c(t),9,vr)))),128))],40,fr),[[F,s.selectedMaxCurrent,void 0,{number:!0}]]),r("small",br,"~ "+c(l.maxPower),1)])]),r("div",yr,[r("label",{for:l.formId("mincurrent"),class:"col-sm-4 col-form-label pt-0 pt-sm-2"},c(e.$t("main.loadpointSettings.minCurrent.label")),9,wr),r("div",Sr,[o(r("select",{id:l.formId("mincurrent"),"onUpdate:modelValue":t[4]||(t[4]=e=>s.selectedMinCurrent=e),class:"form-select form-select-sm w-50",onChange:t[5]||(t[5]=(...e)=>l.changeMinCurrent&&l.changeMinCurrent(...e))},[(g(!0),n(d,null,h(l.minCurrentOptions,(({value:e,name:t})=>(g(),n("option",{key:e,value:e},c(t),9,xr)))),128))],40,Pr),[[F,s.selectedMinCurrent,void 0,{number:!0}]]),r("small",Cr,"~ "+c(l.minPower),1)])])])])])])],8,Xo)])}],["__scopeId","data-v-dccd6b68"]]),kr={class:"sessionInfo"},Ir={class:"text-decoration-underline","data-testid":"sessionInfoLabel"},$r={key:0,class:"d-block d-sm-none"},Lr=i({name:"LoadpointSessionInfo",components:{LabelAndValue:Nt,CustomSelect:z},mixins:[a],props:{id:Number,sessionCo2PerKWh:{type:Number,default:0},sessionPricePerKWh:{type:Number,default:0},sessionPrice:{type:Number,default:0},currency:String,sessionSolarPercentage:{type:Number,default:0},chargeRemainingDurationInterpolated:Number,chargeDurationInterpolated:Number,tariffCo2:Number,tariffGrid:Number},data(){return{selectedKey:(e=this.id,L.sessionInfo[e-1]||t)};var e,t},computed:{options:function(){return[{key:"remaining",value:this.fmtDuration(this.chargeRemainingDurationInterpolated),available:this.chargeRemainingDurationInterpolated>0},{key:"duration",value:this.fmtDuration(this.chargeDurationInterpolated)},{key:"solar",value:this.solarFormatted},{key:"avgPrice",value:this.fmtAvgPrice(this.sessionPricePerKWh),valueSm:this.fmtAvgPriceShort(this.sessionPricePerKWh),available:void 0!==this.tariffGrid},{key:"price",value:this.priceFormatted,available:void 0!==this.tariffGrid},{key:"co2",value:this.fmtCo2Medium(this.sessionCo2PerKWh),valueSm:this.fmtCo2Short(this.sessionCo2PerKWh),available:void 0!==this.tariffCo2}].filter((({available:e})=>void 0===e||e))},optionKeys(){return this.options.map((e=>e.key))},selectOptions(){return this.optionKeys.map((e=>({name:this.$t(`main.loadpoint.${e}`),value:e})))},selectedOption(){return this.options.find((e=>e.key===this.selectedKey))||this.options[0]},label(){return this.$t(`main.loadpoint.${this.selectedOption.key}`)},value(){return this.selectedOption.value},valueSm(){return this.selectedOption.valueSm},showSm(){return void 0!==this.valueSm},solarFormatted(){return this.fmtPercentage(this.sessionSolarPercentage,1)},priceFormatted(){return`${this.fmtMoney(this.sessionPrice,this.currency)} ${this.fmtCurrencySymbol(this.currency)}`}},methods:{fmtAvgPrice(e){return this.fmtPricePerKWh(e,this.currency,!1)},fmtAvgPriceShort(e){return this.fmtPricePerKWh(e,this.currency,!0)},nextSessionInfo(){const e=this.optionKeys.indexOf(this.selectedKey);this.selectedKey=this.optionKeys[e+1]||this.optionKeys[0],this.presist()},selectOption(e){this.selectedKey=e,this.presist()},presist(){!function(e,t){const i=[...L.sessionInfo];i[e-1]=t,i.map((e=>e||"")),L.sessionInfo=i}(this.id,this.selectedKey)}}},[["render",function(e,t,i,a,o,s){const d=p("CustomSelect"),h=p("LabelAndValue");return g(),n("div",kr,[u(h,{class:"d-block",align:"end"},{label:m((()=>[u(d,{selected:o.selectedKey,options:s.selectOptions,"data-testid":"sessionInfoSelect",onChange:t[0]||(t[0]=e=>s.selectOption(e.target.value))},{default:m((()=>[r("span",Ir,c(s.label),1)])),_:1},8,["selected","options"])])),value:m((()=>[r("div",{class:"value","data-testid":"sessionInfoValue",onClick:t[1]||(t[1]=(...e)=>s.nextSessionInfo&&s.nextSessionInfo(...e))},[r("div",{class:l({"d-none d-sm-block":s.showSm})},c(s.value),3),s.showSm?(g(),n("div",$r,c(s.valueSm),1)):f("",!0)])])),_:1})])}],["__scopeId","data-v-4d673aeb"]]),Ar={name:"Loadpoint",components:{Mode:It,Vehicle:No,Phases:Mo,LabelAndValue:Nt,LoadpointSettingsButton:Do,LoadpointSettingsModal:Tr,LoadpointSessionInfo:Lr,VehicleIcon:ne},mixins:[a,I],props:{id:Number,single:Boolean,title:String,mode:String,effectiveLimitSoc:Number,limitEnergy:Number,remoteDisabled:Boolean,remoteDisabledSource:String,chargeDuration:Number,charging:Boolean,batteryBoost:Boolean,batteryConfigured:Boolean,sessionEnergy:Number,sessionCo2PerKWh:Number,sessionPricePerKWh:Number,sessionPrice:Number,sessionSolarPercentage:Number,chargerStatusReason:String,chargerFeatureIntegratedDevice:Boolean,chargerFeatureHeating:Boolean,chargerIcon:String,connected:Boolean,enabled:Boolean,vehicleDetectionActive:Boolean,vehicleRange:Number,vehicleSoc:Number,vehicleName:String,vehicleIcon:String,vehicleLimitSoc:Number,vehicles:Array,planActive:Boolean,planProjectedStart:String,planProjectedEnd:String,planOverrun:Number,planEnergy:Number,planTime:String,effectivePlanTime:String,effectivePlanSoc:Number,vehicleProviderLoggedIn:Boolean,vehicleProviderLoginPath:String,vehicleProviderLogoutPath:String,vehicleClimaterActive:Boolean,vehicleWelcomeActive:Boolean,chargePower:Number,chargedEnergy:Number,chargeRemainingDuration:Number,phasesConfigured:Number,phasesActive:Number,chargerPhases1p3p:Boolean,chargerSinglePhase:Boolean,minCurrent:Number,maxCurrent:Number,chargeCurrent:Number,connectedDuration:Number,chargeCurrents:Array,chargeRemainingEnergy:Number,phaseAction:String,phaseRemaining:Number,pvRemaining:Number,pvAction:String,smartCostLimit:{type:Number,default:null},smartCostType:String,smartCostActive:Boolean,smartCostNextStart:String,tariffGrid:Number,tariffCo2:Number,currency:String,multipleLoadpoints:Boolean,gridConfigured:Boolean,pvConfigured:Boolean},data(){return{tickerHandler:null,phaseRemainingInterpolated:this.phaseRemaining,pvRemainingInterpolated:this.pvRemaining,chargeDurationInterpolated:this.chargeDuration,chargeRemainingDurationInterpolated:this.chargeRemainingDuration}},computed:{vehicle:function(){return this.vehicles?.find((e=>e.name===this.vehicleName))},vehicleTitle:function(){return this.vehicle?.title},loadpointTitle:function(){return this.title||this.$t("main.loadpoint.fallbackName")},integratedDevice:function(){return this.chargerFeatureIntegratedDevice},heating:function(){return this.chargerFeatureHeating},phasesProps:function(){return this.collectProps(Mo)},modeProps:function(){return this.collectProps(It)},sessionInfoProps:function(){return this.collectProps(Lr)},settingsModal:function(){return this.collectProps(Tr)},vehicleProps:function(){return this.collectProps(No)},showChargingIndicator:function(){return this.charging&&this.chargePower>0},vehicleKnown:function(){return!!this.vehicleName},vehicleHasSoc:function(){return this.vehicleKnown&&!this.vehicle?.features?.includes("Offline")},vehicleNotReachable:function(){const e=this.vehicle?.features||[];return e.includes("Offline")&&e.includes("Retryable")},planTimeUnreachable:function(){return this.planOverrun>60},socBasedCharging:function(){return this.vehicleHasSoc||this.vehicleSoc>0},socBasedPlanning:function(){return this.socBasedCharging&&this.vehicle?.capacity>0},pvPossible:function(){return this.pvConfigured||this.gridConfigured},hasSmartCost:function(){return Z(this.smartCostType)},batteryBoostAvailable:function(){return this.batteryConfigured&&this.$hiddenFeatures()},batteryBoostActive:function(){return this.batteryBoost&&this.charging&&!["off","now"].includes(this.mode)}},watch:{phaseRemaining(){this.phaseRemainingInterpolated=this.phaseRemaining},pvRemaining(){this.pvRemainingInterpolated=this.pvRemaining},chargeDuration(){this.chargeDurationInterpolated=this.chargeDuration},chargeRemainingDuration(){this.chargeRemainingDurationInterpolated=this.chargeRemainingDuration}},mounted(){this.tickerHandler=setInterval(this.tick,1e3)},unmounted(){clearInterval(this.tickerHandler)},methods:{tick(){this.phaseRemainingInterpolated>0&&this.phaseRemainingInterpolated--,this.pvRemainingInterpolated>0&&this.pvRemainingInterpolated--,this.chargeDurationInterpolated>0&&this.charging&&this.chargeDurationInterpolated++,this.chargeRemainingDurationInterpolated>0&&this.charging&&this.chargeRemainingDurationInterpolated--},apiPath:function(e){return"loadpoints/"+this.id+"/"+e},setTargetMode:function(e){j.post(this.apiPath("mode")+"/"+e)},setLimitSoc:function(e){j.post(this.apiPath("limitsoc")+"/"+e)},setLimitEnergy:function(e){j.post(this.apiPath("limitenergy")+"/"+e)},setMaxCurrent:function(e){j.post(this.apiPath("maxcurrent")+"/"+e)},setMinCurrent:function(e){j.post(this.apiPath("mincurrent")+"/"+e)},setPhasesConfigured:function(e){j.post(this.apiPath("phases")+"/"+e)},changeVehicle(e){j.post(this.apiPath("vehicle")+`/${e}`)},removeVehicle(){j.delete(this.apiPath("vehicle"))},setBatteryBoost:function(e){j.post(this.apiPath("batteryboost")+"/"+(e?"1":"0"))},fmtPower(e){return this.fmtW(e,S.AUTO)},fmtEnergy(e){return this.fmtWh(e,S.AUTO)},openSettingsModal(){$.getOrCreateInstance(document.getElementById(`loadpointSettingsModal_${this.id}`)).show()}}},Nr={class:"loadpoint d-flex flex-column pt-4 pb-2 px-3 px-sm-4 mx-2 mx-sm-0"},Br={class:"d-block d-sm-flex justify-content-between align-items-center mb-3"},Vr={class:"d-flex justify-content-between align-items-center mb-3 text-truncate"},Mr={class:"me-2 mb-0 text-truncate d-flex"},Er={class:"text-truncate"},Dr={class:"mb-3 d-flex align-items-center"},Rr={class:"details d-flex align-items-start mb-2"},Ur={class:"d-flex align-items-center"},qr={name:"Loadpoints",components:{Loadpoint:i(Ar,[["render",function(e,t,i,a,d,h){const m=p("VehicleIcon"),v=p("LoadpointSettingsButton"),b=p("Mode"),y=p("LoadpointSettingsModal"),w=p("LabelAndValue"),S=p("Phases"),k=p("LoadpointSessionInfo"),I=p("Vehicle");return g(),n("div",Nr,[r("div",Br,[r("div",Vr,[r("h3",Mr,[i.chargerIcon?(g(),C(m,{key:0,name:i.chargerIcon,class:"me-2 flex-shrink-0"},null,8,["name"])):f("",!0),r("div",Er,c(h.loadpointTitle),1)]),u(v,{class:"d-block d-sm-none",onClick:h.openSettingsModal},null,8,["onClick"])]),r("div",Dr,[u(b,T({class:"flex-grow-1"},h.modeProps,{onUpdated:h.setTargetMode}),null,16,["onUpdated"]),u(v,{id:i.id,class:"d-none d-sm-block ms-2",onClick:h.openSettingsModal},null,8,["id","onClick"])])]),u(y,T(h.settingsModal,{onMaxcurrentUpdated:h.setMaxCurrent,onMincurrentUpdated:h.setMinCurrent,onPhasesconfiguredUpdated:h.setPhasesConfigured,onBatteryboostUpdated:h.setBatteryBoost}),null,16,["onMaxcurrentUpdated","onMincurrentUpdated","onPhasesconfiguredUpdated","onBatteryboostUpdated"]),i.remoteDisabled?(g(),n("div",{key:0,class:l(["alert alert-warning my-4 py-2","hard"===i.remoteDisabled?"alert-danger":"alert-warning"]),role:"alert"},c(e.$t("hard"===i.remoteDisabled?"main.loadpoint.remoteDisabledHard":"main.loadpoint.remoteDisabledSoft",{source:i.remoteDisabledSource})),3)):f("",!0),r("div",Rr,[r("div",null,[r("div",Ur,[u(w,{label:e.$t("main.loadpoint.power"),value:i.chargePower,valueFmt:h.fmtPower,class:"mb-2 text-nowrap",align:"start"},null,8,["label","value","valueFmt"]),r("shopicon-regular-lightning",{class:l(["text-evcc opacity-transiton","opacity-"+(h.showChargingIndicator?"100":"0")]),size:"m"},null,2)]),u(S,T(h.phasesProps,{class:["opacity-transiton","opacity-"+(h.showChargingIndicator?"100":"0")]}),null,16,["class"])]),o(u(w,{label:e.$t("main.loadpoint.charged"),value:h.fmtEnergy(i.chargedEnergy),align:"center"},null,8,["label","value"]),[[s,h.socBasedCharging]]),u(k,P(x(h.sessionInfoProps)),null,16)]),t[0]||(t[0]=r("hr",{class:"divider"},null,-1)),u(I,T({class:"flex-grow-1 d-flex flex-column justify-content-end"},h.vehicleProps,{onLimitSocUpdated:h.setLimitSoc,onLimitEnergyUpdated:h.setLimitEnergy,onChangeVehicle:h.changeVehicle,onRemoveVehicle:h.removeVehicle,onOpenLoadpointSettings:h.openSettingsModal}),null,16,["onLimitSocUpdated","onLimitEnergyUpdated","onChangeVehicle","onRemoveVehicle","onOpenLoadpointSettings"])])}],["__scopeId","data-v-f4d67e94"]])},props:{loadpoints:Array,vehicles:Array,smartCostType:String,tariffGrid:Number,tariffCo2:Number,currency:String,selectedIndex:Number,gridConfigured:Boolean,pvConfigured:Boolean,batteryConfigured:Boolean},emits:["index-changed"],data:()=>({snapTimeout:null,scrollTimeout:null,highlightedIndex:0}),watch:{selectedIndex:function(e){this.scrollTo(e)}},mounted(){this.selectedIndex>0&&this.$refs.carousel.scrollTo({top:0,left:this.left(this.selectedIndex)}),this.$refs.carousel.addEventListener("scroll",this.handleCarouselScroll)},unmounted(){this.$refs.carousel&&this.$refs.carousel.removeEventListener("scroll",this.handleCarouselScroll)},methods:{handleCarouselScroll(){const{scrollLeft:e}=this.$refs.carousel,{offsetWidth:t}=this.$refs.carousel.children[0];this.highlightedIndex=Math.round((e-7.5)/t),clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout((()=>{this.highlightedIndex!==this.selectedIndex&&this.$emit("index-changed",this.highlightedIndex)}),2e3)},goTo(e){this.$emit("index-changed",e)},isCharging:e=>e.charging&&e.chargePower>0,selected(e){return this.highlightedIndex===e},left(e){return this.$refs.carousel.children[0].offsetWidth*e},scrollTo(e){this.highlightedIndex=e;const t=this.$refs.carousel;t.style.scrollSnapType="none",t.scrollTo({top:0,left:this.left(e),behavior:"smooth"}),clearTimeout(this.snapTimeout),this.snapTimeout=setTimeout((()=>{this.$refs.carousel.style.scrollSnapType="x mandatory"}),1e3)}}},Or={class:"container container--loadpoint px-0 mb-md-2 d-flex flex-column justify-content-center"},Fr={key:0,class:"d-flex d-lg-none justify-content-center"},Wr=["onClick"],_r={key:0,class:"indicator-icon"},zr={key:1,class:"indicator-icon"},jr={key:2,class:"indicator-icon"},Hr=i(qr,[["render",function(e,t,i,a,o,s){const c=p("Loadpoint");return g(),n("div",Or,[r("div",{ref:"carousel",class:l(["carousel d-lg-flex flex-wrap",`carousel--${i.loadpoints.length}`])},[(g(!0),n(d,null,h(i.loadpoints,((e,t)=>(g(),n("div",{key:t,class:"flex-grow-1 mb-3 m-lg-0 p-lg-0"},[u(c,T({ref_for:!0},e,{id:t+1,"data-testid":"loadpoint",vehicles:i.vehicles,smartCostType:i.smartCostType,tariffGrid:i.tariffGrid,tariffCo2:i.tariffCo2,currency:i.currency,multipleLoadpoints:i.loadpoints.length>1,gridConfigured:i.gridConfigured,pvConfigured:i.pvConfigured,batteryConfigured:i.batteryConfigured,class:["h-100",{"loadpoint-unselected":!s.selected(t)}],onClick:e=>s.goTo(t)}),null,16,["id","vehicles","smartCostType","tariffGrid","tariffCo2","currency","multipleLoadpoints","gridConfigured","pvConfigured","batteryConfigured","class","onClick"])])))),128))],2),i.loadpoints.length>1?(g(),n("div",Fr,[(g(!0),n(d,null,h(i.loadpoints,((e,t)=>(g(),n("button",{key:t,class:l(["btn btn-sm btn-link p-0 mx-1 indicator d-flex justify-content-center align-items-center evcc-default-text",{"indicator--selected":s.selected(t)}]),onClick:e=>s.goTo(t)},[s.isCharging(e)?(g(),n("shopicon-filled-lightning",_r)):e.connected?(g(),n("shopicon-filled-circle",zr)):(g(),n("shopicon-bold-circle",jr))],10,Wr)))),128))])):f("",!0)])}],["__scopeId","data-v-b91b635c"]]);class Gr extends HTMLElement{connectedCallback(){this.setAttribute("data-shopicon",!0),this.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><style></style><g id="Your_Icons"><path d="M0 .008h48v48H0z" fill="none"/><path d="M39.114 34.332C37.38 31.449 32.326 23.487 31 21.402V10h1a2 2 0 000-4H16a2 2 0 000 4h1v11.402c-1.326 2.085-6.38 10.047-8.114 12.93-.512.852-.772 1.749-.772 2.668 0 2.757 2.243 5 4.999 5h21.773c2.757 0 5-2.243 5-5 0-.919-.26-1.816-.772-2.668zM20.688 23.059c.204-.322.312-.694.312-1.075V10.003h6v11.981a2 2 0 00.312 1.074c.031.049 1.55 2.435 3.325 5.244l-15.434 3.43c2.495-3.976 5.441-8.605 5.485-8.673z"/></g></svg>'}}window.customElements.define("shopicon-filled-testtube",Gr);const Kr={viewBox:"0 0 122 35",xmlns:"http://www.w3.org/2000/svg","fill-rule":"evenodd","clip-rule":"evenodd","stroke-linejoin":"round","stroke-miterlimit":"2"},Zr={name:"Version",components:{Logo:i({name:"Logo"},[["render",function(e,t,i,a,o,s){return g(),n("svg",Kr,t[0]||(t[0]=[r("path",{d:"M13.082 29.071a12.384 12.384 0 01-9-3.42 12.192 12.192 0 01-3.54-9.12v-.64a15.394 15.394 0 011.47-6.83 10.825 10.825 0 014.17-4.64 11.64 11.64 0 016.15-1.63 10.45 10.45 0 018.21 3.26c2 2.194 3 5.297 3 9.31v2.76H7.382a6.348 6.348 0 002 4 5.997 5.997 0 004.16 1.49 7.305 7.305 0 006.1-2.84l3.31 3.73a10 10 0 01-4.13 3.39 13.309 13.309 0 01-5.74 1.18zm-.77-20.84a4.216 4.216 0 00-3.26 1.37 7.141 7.141 0 00-1.6 3.91h9.39v-.55a5.005 5.005 0 00-1.22-3.49 4.304 4.304 0 00-3.31-1.24zM36.452 20.331l4.7-17.09h7l-8.48 25.36h-6.44l-8.52-25.36h7l4.74 17.09zM85.542 23.611a4.444 4.444 0 003-1 3.638 3.638 0 001.22-2.75h6.32a8.668 8.668 0 01-1.4 4.73 9.145 9.145 0 01-3.79 3.3 11.736 11.736 0 01-5.29 1.19 10.912 10.912 0 01-8.54-3.46c-2.087-2.3-3.13-5.483-3.13-9.55v-.45c0-3.9 1.033-7.016 3.1-9.35a10.868 10.868 0 018.51-3.5c2.791-.134 5.524.84 7.6 2.71a9.626 9.626 0 012.9 7.21h-6.3a4.663 4.663 0 00-1.2-3.22 4.005 4.005 0 00-3.08-1.24 4.068 4.068 0 00-3.56 1.73c-.8 1.15-1.2 3-1.2 5.6v.7c0 2.61.39 4.49 1.19 5.63a4.092 4.092 0 003.65 1.72zM110.422 23.611a4.454 4.454 0 003-1 3.63 3.63 0 001.21-2.75h6.33a8.668 8.668 0 01-1.4 4.73 9.143 9.143 0 01-3.73 3.3 11.76 11.76 0 01-5.29 1.18 10.912 10.912 0 01-8.54-3.46c-2.087-2.3-3.13-5.483-3.13-9.55v-.45c0-3.9 1.033-7.016 3.1-9.35a10.85 10.85 0 018.57-3.49 10.575 10.575 0 017.6 2.71 9.598 9.598 0 012.91 7.21h-6.33a4.651 4.651 0 00-1.21-3.22 4.492 4.492 0 00-6.64.49c-.8 1.15-1.21 3-1.21 5.6v.7c0 2.607.4 4.484 1.2 5.63a4.09 4.09 0 003.56 1.72z",fill:"#fff",class:"letter","fill-rule":"nonzero"},null,-1),r("path",{d:"M58.462.751h9.22l-6.14 12.3h6.15l-11.53 21.51 2.3-15.36h-7.68l7.68-18.45z",fill:"#0fdd42","fill-rule":"nonzero"},null,-1),r("path",{fill:"none",d:"M-24.458-22.109h170v76h-170z"},null,-1)]))}],["__scopeId","data-v-239c7b9a"]])},props:{installed:String,available:String,releaseNotes:String,commit:String,hasUpdater:Boolean,uploadMessage:String,uploadProgress:Number},data:function(){return{updateStarted:!1,updateStatus:""}},computed:{githubHashUrl:function(){return`https://github.com/evcc-io/evcc/commit/${this.commit}`},newVersionAvailable:function(){return this.available&&"[[.Version]]"!=this.installed&&"0.0.0"!=this.installed&&this.available!=this.installed}},methods:{update:async function(){try{await j.post("update"),this.updateStatus=this.$t("footer.version.modalUpdateStatusStart"),this.updateStarted=!0}catch(e){this.updateStatus=`${this.$t("footer.version.modalUpdateStatusStart")} ${e}`}},releaseNotesUrl:function(e){return"0.0.0"==e?"https://github.com/evcc-io/evcc/releases":`https://github.com/evcc-io/evcc/releases/tag/${e}`},openModal(){$.getOrCreateInstance(document.getElementById("updateModal")).show()}}},Yr={class:"text-truncate"},Qr=["href"],Jr={class:"text-decoration-underline text-truncate"},Xr={class:"text-decoration-underline text-truncate"},es={class:"ms-2 d-none d-sm-block text-gray-medium text-decoration-underline"},ts=["href"],is={class:"text-decoration-underline text-truncate"},as={id:"updateModal",class:"modal fade text-dark",tabindex:"-1",role:"dialog","aria-hidden":"true"},ns={class:"modal-dialog modal-dialog-centered",role:"document"},os={class:"modal-content"},rs={class:"modal-header"},ss={class:"modal-title"},ls={class:"modal-body"},cs={key:0},ds={class:"progress my-3"},hs={key:1},us=["innerHTML"],ms={key:1},ps=["href"],gs={class:"modal-footer d-flex justify-content-between"},fs=["disabled"],vs=["disabled"],bs={key:0},ys={key:1},ws=["href"],Ss=i(Zr,[["render",function(e,t,i,a,o,s){const l=p("Logo");return g(),n("div",Yr,[i.commit?(g(),n("a",{key:0,href:s.githubHashUrl,target:"_blank",class:"btn btn-link ps-0 text-decoration-none evcc-default-text text-nowrap d-flex align-items-end"},[u(l,{class:"logo me-2 flex-shrink-0"}),r("span",Jr,"v"+c(i.installed),1),t[2]||(t[2]=r("shopicon-regular-moonstars",{class:"ms-2 text-gray-light flex-shrink-0"},null,-1))],8,Qr)):s.newVersionAvailable?(g(),n("button",{key:1,href:"#",class:"btn btn-link ps-0 text-decoration-none evcc-default-text text-nowrap d-flex align-items-end",onClick:t[0]||(t[0]=(...e)=>s.openModal&&s.openModal(...e))},[t[3]||(t[3]=r("shopicon-regular-gift",{class:"me-2"},null,-1)),r("span",Xr,"v"+c(i.installed),1),r("span",es,c(e.$t("footer.version.availableLong")),1)])):(g(),n("a",{key:2,href:s.releaseNotesUrl(i.installed),target:"_blank",class:"btn btn-link evcc-default-text ps-0 text-decoration-none text-nowrap d-flex align-items-end"},[u(l,{class:"logo me-2 flex-shrink-0"}),r("span",is,"v"+c(i.installed),1)],8,ts)),(g(),C(H,{to:"body"},[r("div",as,[r("div",ns,[r("div",os,[r("div",rs,[r("h5",ss,c(e.$t("footer.version.modalTitle")),1),t[4]||(t[4]=r("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),r("div",ls,[e.updateStarted?(g(),n("div",cs,[r("p",null,c(e.$t("footer.version.modalUpdateStarted")),1),r("div",ds,[r("div",{class:"progress-bar progress-bar-striped progress-bar-animated",role:"progressbar",style:y({width:i.uploadProgress+"%"})},null,4)]),r("p",null,c(e.updateStatus)+" "+c(i.uploadMessage),1)])):(g(),n("div",hs,[r("p",null,[r("small",null,c(e.$t("footer.version.modalInstalledVersion"))+": "+c(i.installed),1)]),i.releaseNotes?(g(),n("div",{key:0,innerHTML:i.releaseNotes},null,8,us)):(g(),n("p",ms,[v(c(e.$t("footer.version.modalNoReleaseNotes"))+" ",1),r("a",{href:s.releaseNotesUrl(i.available)},"GitHub",8,ps),t[5]||(t[5]=v(". "))]))]))]),r("div",gs,[r("button",{type:"button",class:"btn btn-outline-secondary",disabled:e.updateStarted,"data-bs-dismiss":"modal"},c(e.$t("footer.version.modalCancel")),9,fs),r("div",null,[i.hasUpdater?(g(),n("button",{key:0,type:"button",class:"btn btn-primary",disabled:e.updateStarted,onClick:t[1]||(t[1]=(...e)=>s.update&&s.update(...e))},[e.updateStarted?(g(),n("span",bs,[t[6]||(t[6]=r("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1)),v(" "+c(e.$t("footer.version.modalUpdate")),1)])):(g(),n("span",ys,c(e.$t("footer.version.modalUpdateNow")),1))],8,vs)):(g(),n("a",{key:1,href:s.releaseNotesUrl(i.available),class:"btn btn-primary"},c(e.$t("footer.version.modalDownload")),9,ws))])])])])])]))])}],["__scopeId","data-v-8faa8aea"]]),Ps={class:"flex-shrink-1 d-flex mb-4 mb-lg-0 align-items-center align-items-lg-start"},xs={key:0,class:"tile-icon"},Cs={key:1,class:"tile-icon"},Ts={key:2,class:"tile-icon"},ks={key:3,class:"tile-icon"},Is={key:4,class:"tile-icon"},$s={class:"ms-3 d-flex flex-grow-1 d-lg-block align-items-center justify-content-between"},Ls={class:"my-0 fw-bold text-truncate"},As={class:"d-flex align-items-baseline lh-sm"},Ns={class:"fs-1 value order-1"},Bs={key:1},Vs={class:"d-block mt-0 ms-3 ms-lg-0 text-end text-lg-start"},Ms=i({name:"SavingsTile",components:{AnimatedNumber:Re},mixins:[a],props:{title:String,icon:String,value:[String,Number],valueFmt:Function,unit:String,sub1:String,sub2:String},computed:{leadingUnit(){return"%"===this.unit&&this.hasLeadingPercentageSign()}}},[["render",function(e,t,i,a,o,s){const d=p("AnimatedNumber");return g(),n("div",Ps,["sun"===i.icon?(g(),n("shopicon-regular-sun",xs)):f("",!0),"lightning"===i.icon?(g(),n("shopicon-regular-lightning",Cs)):f("",!0),"receivepayment"===i.icon?(g(),n("shopicon-regular-receivepayment",Ts)):f("",!0),"car"===i.icon?(g(),n("shopicon-regular-car3",ks)):f("",!0),"eco"===i.icon?(g(),n("shopicon-regular-eco1",Is)):f("",!0),r("div",$s,[r("div",null,[r("p",Ls,c(i.title),1),r("strong",As,[r("span",Ns,[i.valueFmt?(g(),C(d,{key:0,to:i.value,format:i.valueFmt},null,8,["to","format"])):(g(),n("span",Bs,c(i.value),1))]),r("span",{class:l(["unit",s.leadingUnit?"order-0 me-1":"order-2 ms-1"])},c(i.unit),3)])]),r("small",Vs,[v(c(i.sub1)+" ",1),t[0]||(t[0]=r("br",null,null,-1)),v(" "+c(i.sub2),1)])])])}],["__scopeId","data-v-60d56bd3"]]),Es=Q.create({baseURL:"https://api.evcc.io/v1/",headers:{Accept:"application/json"}});Es.interceptors.response.use((e=>e),(e=>{const t=e.config.baseURL+e.config.url,i=`${e.message}: API request failed ${t}`;return window.app.raise({message:i}),Promise.reject(e)}));const Ds={class:"d-block d-lg-flex mb-2 justify-content-between"},Rs={regions:[{name:"Australia",co2:503},{name:"Austria",co2:158},{name:"Canada",co2:128},{name:"Czech Republic",co2:415},{name:"Denmark",co2:181},{name:"Estonia",co2:464},{name:"Europe",co2:278},{name:"Finland",co2:131},{name:"France",co2:85},{name:"Germany",co2:385},{name:"Netherlands",co2:356},{name:"Norway",co2:29},{name:"Poland",co2:635},{name:"Sweden",co2:45},{name:"Switzerland",co2:46},{name:"United Kingdom",co2:257},{name:"United States",co2:367},{name:"World",co2:436}]},Us={name:"Savings",components:{Sponsor:re,SavingsTile:Ms,LiveCommunity:i({name:"LiveCommunity",components:{SavingsTile:Ms},mixins:[a],props:{},data:()=>({refresh:null,result:{}}),computed:{totalClients(){return this.result.totalClients},activeClients(){return this.result.activeClients},chargePower(){const{chargePower:e=0}=this.result;return e<1e6?{value:e/1e3,unit:"kW"}:e<1e9?{value:e/1e6,unit:"MW"}:e<1e12?{value:e/1e9,unit:"GW"}:{value:e/1e12,unit:"TW"}},greenShare(){const{chargePower:e,greenPower:t}=this.result;return e?100/e*t:0},greenEnergy(){const{greenEnergy:e=0}=this.result;return e<1e3?{value:e,unit:"kWh"}:e<1e6?{value:e/1e3,unit:"MWh"}:e<1e9?{value:e/1e6,unit:"GWh"}:{value:e/1e9,unit:"TWh"}}},async mounted(){this.refresh=setInterval(this.update,1e4),await this.update()},unmounted(){clearInterval(this.refresh)},methods:{async update(){try{const e=await Es.get("total");this.result=e.data||{}}catch(e){console.error(e)}},fmtAnimation(e){let t=0;return e<100&&(t=1),e<10&&(t=2),this.fmtNumber(e,t)}}},[["render",function(e,t,i,a,o,r){const s=p("SavingsTile");return g(),n("div",Ds,[u(s,{class:"text-accent2",icon:"car",title:e.$t("footer.community.power"),value:r.chargePower.value,valueFmt:r.fmtAnimation,unit:r.chargePower.unit,sub1:e.$t("footer.community.powerSub1",{totalClients:r.totalClients,activeClients:r.activeClients}),sub2:e.$t("footer.community.powerSub2")},null,8,["title","value","valueFmt","unit","sub1","sub2"]),u(s,{class:"text-accent1",icon:"sun",title:e.$t("footer.community.greenShare"),value:r.greenShare,valueFmt:r.fmtAnimation,unit:"%",sub1:e.$t("footer.community.greenShareSub1"),sub2:e.$t("footer.community.greenShareSub2")},null,8,["title","value","valueFmt","sub1","sub2"]),u(s,{class:"text-accent3",icon:"lightning",title:e.$t("footer.community.greenEnergy"),value:r.greenEnergy.value,valueFmt:r.fmtAnimation,unit:r.greenEnergy.unit,sub1:e.$t("footer.community.greenEnergySub1"),sub2:e.$t("footer.community.greenEnergySub2")},null,8,["title","value","valueFmt","unit","sub1","sub2"])])}]]),TelemetrySettings:J,CustomSelect:z},mixins:[a],props:{statistics:{type:Object,default:()=>({})},co2Configured:Boolean,sponsor:Object,currency:String},data:()=>({communityView:!1,telemetryEnabled:!1,period:L.savingsPeriod||"30d",selectedRegion:L.savingsRegion||"Germany",referenceGrid:void 0}),computed:{tariffLink:()=>`${X()}/docs/reference/configuration/tariffs`,percent(){return this.fmtPercentage(this.solarPercentage||0)},regionOptions(){return Rs.regions.map((e=>({value:e.name,name:`${e.name} (${this.fmtCo2Short(e.co2)})`})))},region(){if(this.selectedRegion){const e=Rs.regions.find((e=>e.name===this.selectedRegion));if(e)return e}return Rs.regions[0]},periodOptions(){return["30d","365d","thisYear","total"].map((e=>({value:e,name:this.$t(`footer.savings.period.${e}`)})))},avgPriceFormatted(){return{value:this.fmtPricePerKWh(this.currentStatistics.avgPrice,this.currency,!1,!1),unit:this.pricePerKWhUnit(this.currency)}},currentStatistics(){return this.statistics[this.period]||{}},totalCharged(){return this.currentStatistics.chargedKWh},solarPercentage(){return this.currentStatistics.solarPercentage},solarCharged(){return this.solarPercentage/100*this.totalCharged},gridCharged(){return this.totalCharged-this.solarCharged},avgPrice(){return this.currentStatistics.avgPrice},avgCo2(){return this.currentStatistics.avgCo2},priceConfigured(){return void 0!==this.referenceGrid}},methods:{showCommunity(){this.communityView=!0},showMyData(){this.communityView=!1},openModal(){$.getOrCreateInstance(document.getElementById("savingsModal")).show(),this.updateReferenceGrid()},selectPeriod(e){this.period=e,L.savingsPeriod=e},selectRegion(e){this.selectedRegion=e,L.savingsRegion=e},updateReferenceGrid:async function(){try{const e=await j.get("tariff/grid",{validateStatus:e=>e>=200&&e<500}),{rates:t}=e.data.result;this.referenceGrid=t.reduce(((e,t)=>e+t.price),0)/t.length}catch(e){this.referenceGrid=void 0,console.error(e)}}}},qs={class:"d-inline d-sm-none text-decoration-underline"},Os={class:"d-none d-sm-inline text-decoration-underline"},Fs={id:"savingsModal",ref:"modal",class:"modal fade text-dark","data-bs-backdrop":"true",tabindex:"-1",role:"dialog","aria-hidden":"true","data-testid":"savings-modal"},Ws={class:"modal-dialog modal-lg modal-dialog-centered",role:"document"},_s={class:"modal-content"},zs={class:"modal-header"},js={class:"modal-title"},Hs={class:"modal-body"},Gs={class:"nav nav-tabs"},Ks={class:"nav-item"},Zs={class:"nav-item"},Ys={key:0,class:"my-4"},Qs={class:"d-block d-lg-flex mb-2 justify-content-between"},Js={class:"my-3 lh-2"},Xs={class:"d-flex"},el={for:"savingsPeriod",class:"me-1"},tl={class:"text-decoration-underline evcc-gray"},il={key:0,class:"d-flex flex-wrap","data-testid":"savings-reference"},al={class:"me-1"},nl={class:"evcc-gray me-1"},ol={class:"evcc-gray d-flex"},rl={class:"me-1"},sl={class:"text-decoration-underline"},ll={key:1},cl=["href"],dl={key:1,class:"my-4"},hl={class:"footer"},ul={class:"container py-2"},ml={class:"d-flex justify-content-between"},pl=i({name:"Footer",components:{Version:Ss,Savings:i(Us,[["render",function(e,t,i,a,o,s){const d=p("SavingsTile"),h=p("CustomSelect"),b=p("LiveCommunity"),y=p("TelemetrySettings"),w=p("Sponsor");return g(),n("div",null,[r("button",{class:"btn btn-link pe-0 text-decoration-none evcc-default-text text-nowrap d-flex align-items-end","data-testid":"savings-button",onClick:t[0]||(t[0]=(...e)=>s.openModal&&s.openModal(...e))},[r("span",qs,c(e.$t("footer.savings.footerShort",{percent:s.percent})),1),r("span",Os,c(e.$t("footer.savings.footerLong",{percent:s.percent})),1),t[5]||(t[5]=r("shopicon-regular-sun",{class:"ms-2 text-evcc"},null,-1))]),(g(),C(H,{to:"body"},[r("div",Fs,[r("div",Ws,[r("div",_s,[r("div",zs,[r("h5",js,c(e.$t("footer.savings.modalTitle")),1),t[6]||(t[6]=r("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),r("div",Hs,[r("ul",Gs,[r("li",Ks,[r("a",{class:l(["nav-link",{active:!o.communityView}]),href:"#",onClick:t[1]||(t[1]=V(((...e)=>s.showMyData&&s.showMyData(...e)),["prevent"]))},c(e.$t("footer.savings.tabTitle")),3)]),r("li",Zs,[r("a",{class:l(["nav-link",{active:o.communityView}]),href:"#",onClick:t[2]||(t[2]=V(((...e)=>s.showCommunity&&s.showCommunity(...e)),["prevent"]))},c(e.$t("footer.community.tabTitle")),3)])]),o.communityView?(g(),n("div",dl,[u(b),u(y,{sponsorActive:!!i.sponsor.name},null,8,["sponsorActive"])])):(g(),n("div",Ys,[r("div",Qs,[u(d,{class:"text-accent1",icon:"sun","data-testid":"savings-tile-solar",title:e.$t("footer.savings.percentTitle"),value:e.fmtNumber(s.solarPercentage,1),unit:"%",sub1:e.$t("footer.savings.percentSelf",{self:e.fmtW(1e3*s.solarCharged,e.POWER_UNIT.KW,!1,0)}),sub2:e.$t("footer.savings.percentGrid",{grid:e.fmtW(1e3*s.gridCharged,e.POWER_UNIT.KW,!1,0)})},null,8,["title","value","sub1","sub2"]),u(d,{class:"text-accent2",icon:"receivepayment","data-testid":"savings-tile-price",title:e.$t("footer.savings.priceTitle"),value:s.priceConfigured?s.avgPriceFormatted.value:"__",unit:s.avgPriceFormatted.unit,sub1:s.priceConfigured?`${e.fmtMoney((o.referenceGrid-s.avgPrice)*s.totalCharged,i.currency,!1)} ${e.fmtCurrencySymbol(i.currency)} ${e.$t("footer.savings.moneySaved")}`:""},null,8,["title","value","unit","sub1"]),u(d,{class:"text-accent3",icon:"eco","data-testid":"savings-tile-co2",title:e.$t("footer.savings.co2Title"),value:i.co2Configured?e.fmtNumber(s.avgCo2,0):"__",unit:"g/kWh",sub1:s.region&&i.co2Configured?`${e.fmtNumber((s.region.co2-s.avgCo2)*s.totalCharged/1e3,0,"kilogram")} ${e.$t("footer.savings.co2Saved")}`:""},null,8,["title","value","sub1"])]),r("div",Js,[r("div",Xs,[r("label",el,c(e.$t("footer.savings.periodLabel")),1),u(h,{id:"savingsPeriod",selected:o.period,options:s.periodOptions,"data-testid":"savings-period-select",onChange:t[3]||(t[3]=e=>s.selectPeriod(e.target.value))},{default:m((()=>[r("span",tl,c(e.$t(`footer.savings.period.${o.period}`)),1)])),_:1},8,["selected","options"])]),s.region?(g(),n("div",il,[r("div",al,c(e.$t("footer.savings.referenceLabel")),1),r("div",nl,c(s.priceConfigured?e.fmtPricePerKWh(o.referenceGrid,i.currency):"___")+" ("+c(e.$t("footer.savings.referenceGrid"))+"), ",1),r("div",ol,[r("div",rl,"⌀ "+c(e.fmtCo2Medium(s.region.co2)),1),u(h,{class:"me-1 evcc-gray",selected:s.region.name,options:s.regionOptions,"data-testid":"savings-region-select",onChange:t[4]||(t[4]=e=>s.selectRegion(e.target.value))},{default:m((()=>[t[7]||(t[7]=v(" (")),r("span",sl,c(s.region.name),1),t[8]||(t[8]=v(") "))])),_:1},8,["selected","options"])])])):f("",!0),s.priceConfigured&&i.co2Configured?f("",!0):(g(),n("div",ll,[r("a",{href:s.tariffLink,class:"evcc-gray",target:"_blank"},c(e.$t("footer.savings.configurePriceCo2")),9,cl)]))])])),u(w,P(x(i.sponsor)),null,16)])])])],512)]))])}]])},props:{version:Object,savings:Object}},[["render",function(e,t,i,a,o,s){const l=p("Version"),c=p("Savings");return g(),n("footer",hl,[r("div",ul,[r("div",ml,[u(l,P(x(i.version)),null,16),u(c,P(x(i.savings)),null,16)])])])}]]),gl={data:()=>({leftIconIndex:2,centerIconIndex:6,rightIconIndex:10,updatePosition:0,icons:["shopicon-regular-batterythreequarters","shopicon-regular-cablecharge","shopicon-regular-car3","shopicon-regular-eco1","shopicon-regular-heart","shopicon-regular-home","shopicon-regular-lightning","shopicon-regular-moonstars","shopicon-regular-powersupply","shopicon-regular-receivepayment","shopicon-regular-sun","shopicon-regular-clock","shopicon-regular-car1",ee(ni),ee(Jt),ee(R)],interval:null}),computed:{leftIcon(){return this.icons[this.leftIconIndex]},centerIcon(){return this.icons[this.centerIconIndex]},rightIcon(){return this.icons[this.rightIconIndex]}},mounted(){this.interval=setInterval(this.rotateIcons,3e3)},unmounted(){clearInterval(this.interval)},methods:{getRandomIcon(e){const t=Array.from(Array(this.icons.length).keys()).filter((t=>!e.includes(t)));return t[Math.floor(Math.random()*t.length)]},rotateIcons(){const e=[this.leftIconIndex,this.centerIconIndex,this.rightIconIndex];switch(this.updatePosition){case 0:this.leftIconIndex=this.getRandomIcon(e);break;case 1:this.centerIconIndex=this.getRandomIcon(e);break;case 2:this.rightIconIndex=this.getRandomIcon(e)}this.updatePosition=(this.updatePosition+Math.ceil(2*Math.random()))%3}}},fl={class:"d-flex justify-content-center gap-4 my-5 color-transition"},vl={name:"Site",components:{Loadpoints:Hr,Energyflow:wt,Footer:pl,Notifications:Ce,TopNavigation:ae,WelcomeIcons:i(gl,[["render",function(e,t,i,a,o,r){return g(),n("div",fl,[u(te,{name:"fade",mode:"out-in"},{default:m((()=>[(g(),C(k(r.leftIcon),{key:o.leftIconIndex,class:"animated-icon"}))])),_:1}),u(te,{name:"fade",mode:"out-in"},{default:m((()=>[(g(),C(k(r.centerIcon),{key:o.centerIconIndex,class:"animated-icon"}))])),_:1}),u(te,{name:"fade",mode:"out-in"},{default:m((()=>[(g(),C(k(r.rightIcon),{key:o.rightIconIndex,class:"animated-icon"}))])),_:1})])}],["__scopeId","data-v-4d4f9d3a"]])},mixins:[a,I],props:{loadpoints:Array,selectedLoadpointIndex:Number,notifications:Array,offline:Boolean,gridConfigured:Boolean,grid:Object,homePower:Number,pvPower:Number,pv:Array,batteryPower:Number,batterySoc:Number,batteryDischargeControl:Boolean,batteryGridChargeLimit:{type:Number,default:null},batteryGridChargeActive:Boolean,batteryMode:String,battery:Array,gridCurrents:Array,prioritySoc:Number,bufferSoc:Number,bufferStartSoc:Number,siteTitle:String,vehicles:Object,auth:Object,currency:String,statistics:Object,tariffFeedIn:Number,tariffGrid:Number,tariffCo2:Number,tariffPriceHome:Number,tariffCo2Home:Number,tariffPriceLoadpoints:Number,tariffCo2Loadpoints:Number,availableVersion:String,releaseNotes:String,hasUpdater:Boolean,uploadMessage:String,uploadProgress:Number,sponsor:{type:Object,default:()=>({})},smartCostType:String,fatal:Object,forecast:Object},computed:{batteryConfigured:function(){return this.battery?.length>0},pvConfigured:function(){return this.pv?.length>0},gridPower:function(){return this.grid?.power||0},energyflow:function(){return this.collectProps(wt)},loadpointTitles:function(){return this.loadpoints.map((e=>e.title))},loadpointsCompact:function(){return this.loadpoints.map((e=>{const t=this.vehicles?.[e.vehicleName]?.icon;return{icon:e.chargerIcon||t||"car",charging:e.charging,power:e.chargePower||0}}))},vehicleList:function(){const e=this.vehicles||{};return Object.entries(e).map((([e,t])=>({name:e,...t})))},topNavigation:function(){return{vehicleLogins:this.auth?this.auth.vehicles:{},...this.collectProps(ae)}},showParkingLot:function(){return!1},isInitialSetup:function(){return 0===this.loadpoints.length},footer:function(){return{version:{installed:window.evcc.version,commit:window.evcc.commit,available:this.availableVersion,releaseNotes:this.releaseNotes,hasUpdater:this.hasUpdater,uploadMessage:this.uploadMessage,uploadProgress:this.uploadProgress},savings:{sponsor:this.sponsor,statistics:this.statistics,co2Configured:void 0!==this.tariffCo2,priceConfigured:void 0!==this.tariffGrid,currency:this.currency}}}},methods:{selectedLoadpointChanged(e){this.$router.push({query:{lp:e+1}})}}},bl={class:"d-flex flex-column site safe-area-inset"},yl={class:"container px-4 top-area"},wl={class:"d-flex justify-content-between align-items-center my-3 my-md-4"},Sl={class:"d-block my-0"},Pl={key:0},xl={class:"d-flex"},Cl={class:"d-flex flex-column justify-content-between content-area"},Tl={key:0,class:"flex-grow-1 align-items-center d-flex justify-content-center"},kl={class:"mb-5 text-gray fs-4"},Il={key:1,class:"flex-grow-1 d-flex align-items-center justify-content-center p-3"},$l={class:"welcome d-flex align-items-center flex-column justify-content-center text-center"},Ll={class:"mb-0 fs-4 d-flex align-items-center gap-2"};e("default",i({name:"Main",components:{Site:i(vl,[["render",function(e,t,i,a,o,s){const l=p("Notifications"),d=p("TopNavigation"),h=p("Energyflow"),b=p("WelcomeIcons"),y=p("router-link"),w=p("Loadpoints"),S=p("Footer");return g(),n("div",bl,[r("div",yl,[r("div",wl,[r("h1",Sl,[s.isInitialSetup?f("",!0):(g(),n("span",Pl,c(i.siteTitle||"evcc"),1))]),r("div",xl,[u(l,{notifications:i.notifications,loadpointTitles:s.loadpointTitles,class:"me-2"},null,8,["notifications","loadpointTitles"]),u(d,P(x(s.topNavigation)),null,16)])]),i.loadpoints.length>0?(g(),C(h,P(T({key:0},s.energyflow)),null,16)):f("",!0)]),r("div",Cl,[i.fatal?(g(),n("div",Tl,[r("h1",kl,c(e.$t("startupError.title")),1)])):s.isInitialSetup?(g(),n("div",Il,[r("div",$l,[r("h1",Ll,c(e.$t("main.welcome")),1),u(b,{class:"welcome-icons"}),u(y,{class:"btn btn-lg btn-outline-primary configure-button",to:"/config"},{default:m((()=>[v(c(e.$t("main.startConfiguration")),1)])),_:1})])])):i.loadpoints.length>0?(g(),C(w,{key:2,class:"mt-1 mt-sm-2 flex-grow-1",loadpoints:i.loadpoints,vehicles:s.vehicleList,smartCostType:i.smartCostType,tariffGrid:i.tariffGrid,tariffCo2:i.tariffCo2,currency:i.currency,gridConfigured:i.gridConfigured,pvConfigured:s.pvConfigured,batteryConfigured:s.batteryConfigured,batterySoc:i.batterySoc,selectedIndex:i.selectedLoadpointIndex,onIndexChanged:s.selectedLoadpointChanged},null,8,["loadpoints","vehicles","smartCostType","tariffGrid","tariffCo2","currency","gridConfigured","pvConfigured","batteryConfigured","batterySoc","selectedIndex","onIndexChanged"])):f("",!0),u(S,P(x(s.footer)),null,16)])])}],["__scopeId","data-v-e1fddd6b"]])},props:{notifications:Array,selectedLoadpointIndex:Number},data:function(){return ie}},[["render",function(e,t,i,a,n,o){const r=p("Site");return g(),C(r,T({notifications:i.notifications},e.state,{"selected-loadpoint-index":i.selectedLoadpointIndex}),null,16,["notifications","selected-loadpoint-index"])}]]))}}}));
